var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(r,S,J){if(J.get||J.set)throw new TypeError("ES3 does not support getters and setters.");r!=Array.prototype&&r!=Object.prototype&&(r[S]=J.value)};$jscomp.getGlobal=function(r){return"undefined"!=typeof window&&window===r?r:"undefined"!=typeof global&&null!=global?global:r};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var r=$jscomp.global.Symbol.iterator;r||(r=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[r]&&$jscomp.defineProperty(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(r){var S=0;return $jscomp.iteratorPrototype(function(){return S<r.length?{done:!1,value:r[S++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(r){$jscomp.initSymbolIterator();r={next:r};r[$jscomp.global.Symbol.iterator]=function(){return this};return r};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(r,S){$jscomp.initSymbolIterator();r instanceof String&&(r+="");var J=0,q={next:function(){if(J<r.length){var V=J++;return{value:S(V,r[V]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};
$jscomp.polyfill=function(r,S,J,q){if(S){J=$jscomp.global;r=r.split(".");for(q=0;q<r.length-1;q++){var V=r[q];V in J||(J[V]={});J=J[V]}r=r[r.length-1];q=J[r];S=S(q);S!=q&&null!=S&&$jscomp.defineProperty(J,r,{configurable:!0,writable:!0,value:S})}};$jscomp.polyfill("Array.prototype.keys",function(r){return r?r:function(){return $jscomp.iteratorFromArray(this,function(r){return r})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(r,S,J){if(null==r)throw new TypeError("The 'this' value for String.prototype."+J+" must not be null or undefined");if(S instanceof RegExp)throw new TypeError("First argument to String.prototype."+J+" must not be a regular expression");return r+""};
$jscomp.polyfill("String.prototype.startsWith",function(r){return r?r:function(r,J){var q=$jscomp.checkStringArgs(this,r,"startsWith");r+="";for(var S=q.length,pa=r.length,O=Math.max(0,Math.min(J|0,q.length)),y=0;y<pa&&O<S;)if(q[O++]!=r[y++])return!1;return y>=pa}},"es6-impl","es3");$jscomp.findInternal=function(r,S,J){r instanceof String&&(r=String(r));for(var q=r.length,V=0;V<q;V++){var pa=r[V];if(S.call(J,pa,V,r))return{i:V,v:pa}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(r){return r?r:function(r,J){return $jscomp.findInternal(this,r,J).v}},"es6-impl","es3");$jscomp.polyfill("String.prototype.endsWith",function(r){return r?r:function(r,J){var q=$jscomp.checkStringArgs(this,r,"endsWith");r+="";void 0===J&&(J=q.length);for(var S=Math.max(0,Math.min(J|0,q.length)),pa=r.length;0<pa&&0<S;)if(q[--S]!=r[--pa])return!1;return 0>=pa}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(r){return r?r:function(r){var J=$jscomp.checkStringArgs(this,null,"repeat");if(0>r||1342177279<r)throw new RangeError("Invalid count value");r|=0;for(var q="";r;)if(r&1&&(q+=J),r>>>=1)J+=J;return q}},"es6-impl","es3");
(function(r,S){function J(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function q(a){return a instanceof Array?function(){return y.iter(a)}:"function"==typeof a.iterator?V(a,a.iterator):a.iterator}function V(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=qb++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},
c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var pa=function(){};pa.__name__=["DateTools"];pa.getMonthDays=function(a){var b=a.getMonth();a=a.getFullYear();return 1!=b?pa.DAYS_OF_MONTH[b]:0==a%4&&0!=a%100||0==a%400?29:28};var O=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};O.__name__=["EReg"];O.prototype={r:null,match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];
throw new W("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new W("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;var d=this.r;b=0>c?a:y.substr(a,0,b+c);this.r.m=d.exec(b);if(b=null!=this.r.m)this.r.s=a;return b}if(d=this.match(0>c?y.substr(a,b,null):y.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return d},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},
map:function(a,b){for(var c=0,d="";!(c>=a.length);){if(!this.matchSub(a,c)){d+=z.string(y.substr(a,c,null));break}var e=this.matchedPos(),d=d+z.string(y.substr(a,c,e.pos-c)),d=d+z.string(b(this));0==e.len?(d+=z.string(y.substr(a,e.pos,1)),c=e.pos+1):c=e.pos+e.len;if(!this.r.global)break}!this.r.global&&0<c&&c<a.length&&(d+=z.string(y.substr(a,c,null)));return d},__class__:O};var y=function(){};y.__name__=["HxOverrides"];y.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),
h=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>h?"0"+h:""+h)};y.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new W("Invalid date format : "+
a);}};y.cca=function(a,b){var c=a.charCodeAt(b);if(c==c)return c};y.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};y.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};y.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Pa=function(){};Pa.__name__=["Lambda"];Pa.has=function(a,b){for(var c=q(a)();c.hasNext();)if(c.next()==
b)return!0;return!1};Math.__name__=["Math"];var ya=function(){this.map=new La;this.count=0};ya.__name__=["ProbabilitiesResult"];ya.fromObject=function(a){var b=new ya;b.count=t.field(a,"count");a=t.field(a,"values");for(var c=t.fields(a),d=0;d<c.length;){var e=c[d];++d;var h=b.map,f=z.parseInt(e),e=t.field(a,e);h.h[f]=e}return b};ya.prototype={map:null,count:null,add:function(a){this.map.h.hasOwnProperty(a)?this.map.h[a]+=1:this.map.h[a]=1;this.count++},addQt:function(a,b){this.map.h.hasOwnProperty(a)?
this.map.h[a]+=b:this.map.h[a]=b;this.count+=b},toObject:function(){for(var a={},b=this.map.keys();b.hasNext();){var c=b.next();a[c]=this.map.h[c]}return{count:this.count,values:a}},bucket:function(a){for(var b=new ya,c=this.map.keys();c.hasNext();){var d=c.next();b.addQt(Math.ceil(d/a),this.map.h[d])}return b},stats:function(){return new Ua(this.map,this.count)},__class__:ya};var Ua=function(a,b){this.table=a;this.count=b;if(0!=b){var c=p.toArray(a.keys()),d=c.shift();this.maxValue=this.minValue=
d;this.minWeight=this.maxWeight=this.total=a.h[d];for(d=0;d<c.length;){var e=c[d];++d;var h=a.h[e];e<this.minValue&&(this.minValue=e);e>this.maxValue&&(this.maxValue=e);h<this.minWeight&&(this.minWeight=h);h>this.maxWeight&&(this.maxWeight=h);this.total+=h}}};Ua.__name__=["ProbabilitiesStats"];Ua.prototype={minValue:null,maxValue:null,minWeight:null,maxWeight:null,total:null,count:null,table:null,map:function(a){for(var b=0,c=this.total,d=new Va(0,0,b,c,this.minValue,this.maxValue,this.minWeight,
this.maxWeight,this.total),e=[],h=this.minValue,f=this.maxValue+1;h<f;){var g=h++;d.value=g;d.weight=this.table.h.hasOwnProperty(g)?this.table.h[g]:0;b+=d.weight;d.accWeight=b;d.revWeight=c;c-=d.weight;e.push(a(d))}return e},__class__:Ua};var Va=function(a,b,c,d,e,h,f,g,k){this.value=a;this.weight=b;this.accWeight=c;this.revWeight=d;this.minValue=e;this.maxValue=h;this.minWeight=f;this.maxWeight=g;this.total=k};Va.__name__=["Sample"];Va.prototype={value:null,weight:null,accWeight:null,revWeight:null,
minValue:null,maxValue:null,minWeight:null,maxWeight:null,total:null,percent:null,maxPercent:null,accPercent:null,revPercent:null,get_percent:function(){return this.weight/this.total},get_maxPercent:function(){return this.get_percent()/(this.maxWeight/this.total)},get_accPercent:function(){return this.accWeight/this.total},get_revPercent:function(){return this.revWeight/this.total},__class__:Va};var t=function(){};t.__name__=["Reflect"];t.field=function(a,b){try{return a[b]}catch(c){return Q.lastException=
c,null}};t.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};t.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};t.compare=function(a,b){return a==b?0:a>b?1:-1};t.compareMethods=function(a,b){return a==b?!0:t.isFunction(a)&&t.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};t.isObject=function(a){if(null==a)return!1;var b=typeof a;return"string"==
b||"object"==b&&null==a.__enum__?!0:"function"==b?null!=(a.__name__||a.__ename__):!1};t.isEnumValue=function(a){return null!=a?null!=a.__enum__:!1};t.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var z=function(){};z.__name__=["Std"];z.string=function(a){return F.__string_rec(a,"")};z.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=y.cca(a,1)&&88!=y.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};z.random=function(a){return 0>=a?0:Math.floor(Math.random()*
a)};var Wa=function(){this.b=""};Wa.__name__=["StringBuf"];Wa.prototype={b:null,__class__:Wa};var L=function(){};L.__name__=["StringTools"];L.startsWith=function(a,b){return a.length>=b.length?y.substr(a,0,b.length)==b:!1};L.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?y.substr(a,d-c,c)==b:!1};L.isSpace=function(a,b){var c=y.cca(a,b);return 8<c&&14>c?!0:32==c};L.ltrim=function(a){for(var b=a.length,c=0;c<b&&L.isSpace(a,c);)++c;return 0<c?y.substr(a,c,b-c):a};L.rtrim=function(a){for(var b=
a.length,c=0;c<b&&L.isSpace(a,b-c-1);)++c;return 0<c?y.substr(a,0,b-c):a};L.trim=function(a){return L.ltrim(L.rtrim(a))};L.lpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a=b+a;return a};L.rpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a+=b;return a};L.replace=function(a,b,c){return a.split(b).join(c)};var I={__ename__:["ValueType"],__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" "),TNull:["TNull",0]};I.TNull.__enum__=I;I.TInt=
["TInt",1];I.TInt.__enum__=I;I.TFloat=["TFloat",2];I.TFloat.__enum__=I;I.TBool=["TBool",3];I.TBool.__enum__=I;I.TObject=["TObject",4];I.TObject.__enum__=I;I.TFunction=["TFunction",5];I.TFunction.__enum__=I;I.TClass=function(a){a=["TClass",6,a];a.__enum__=I;return a};I.TEnum=function(a){a=["TEnum",7,a];a.__enum__=I;return a};I.TUnknown=["TUnknown",8];I.TUnknown.__enum__=I;var E=function(){};E.__name__=["Type"];E.getEnum=function(a){return null==a?null:a.__enum__};E.getSuperClass=function(a){return a.__super__};
E.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};E.getEnumName=function(a){return a.__ename__.join(".")};E.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],
b[11],b[12],b[13]);default:throw new W("Too many arguments");}};E.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};E.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);y.remove(b,"__class__");y.remove(b,"__properties__");return b};E["typeof"]=function(a){switch(typeof a){case "boolean":return I.TBool;case "function":return a.__name__||a.__ename__?I.TObject:I.TFunction;case "number":return Math.ceil(a)==a%2147483648?I.TInt:I.TFloat;case "object":if(null==
a)return I.TNull;var b=a.__enum__;if(null!=b)return I.TEnum(b);a=F.getClass(a);return null!=a?I.TClass(a):I.TObject;case "string":return I.TClass(String);case "undefined":return I.TNull;default:return I.TUnknown}};var ia={__ename__:["dr","DiceExpression"],__constructs__:["Die","Literal","DiceReduce","BinaryOp","UnaryOp"],Die:function(a){a=["Die",0,a];a.__enum__=ia;return a},Literal:function(a){a=["Literal",1,a];a.__enum__=ia;return a},DiceReduce:function(a,b){var c=["DiceReduce",2,a,b];c.__enum__=
ia;return c},BinaryOp:function(a,b,c){a=["BinaryOp",3,a,b,c];a.__enum__=ia;return a},UnaryOp:function(a,b){var c=["UnaryOp",4,a,b];c.__enum__=ia;return c}},da={__ename__:["dr","DiceReducer"],__constructs__:["Sum","Average","Min","Max","Median"],Sum:["Sum",0]};da.Sum.__enum__=da;da.Average=["Average",1];da.Average.__enum__=da;da.Min=["Min",2];da.Min.__enum__=da;da.Max=["Max",3];da.Max.__enum__=da;da.Median=["Median",4];da.Median.__enum__=da;var Da={__ename__:["dr","DiceReduceable"],__constructs__:["DiceExpressions",
"DiceListWithFilter","DiceListWithMap"],DiceExpressions:function(a){a=["DiceExpressions",0,a];a.__enum__=Da;return a},DiceListWithFilter:function(a,b){var c=["DiceListWithFilter",1,a,b];c.__enum__=Da;return c},DiceListWithMap:function(a,b){var c=["DiceListWithMap",2,a,b];c.__enum__=Da;return c}},Qa={__ename__:["dr","DiceFilterable"],__constructs__:["DiceArray","DiceExpressions"],DiceArray:function(a){a=["DiceArray",0,a];a.__enum__=Qa;return a},DiceExpressions:function(a){a=["DiceExpressions",1,a];
a.__enum__=Qa;return a}},Ma={__ename__:["dr","DiceFilter"],__constructs__:["Drop","Keep"],Drop:function(a,b){var c=["Drop",0,a,b];c.__enum__=Ma;return c},Keep:function(a,b){var c=["Keep",1,a,b];c.__enum__=Ma;return c}},Na={__ename__:["dr","DiceFunctor"],__constructs__:["Explode","Reroll"],Explode:function(a,b){var c=["Explode",0,a,b];c.__enum__=Na;return c},Reroll:function(a,b){var c=["Reroll",1,a,b];c.__enum__=Na;return c}},xa={__ename__:["dr","Times"],__constructs__:["Always","UpTo"],Always:["Always",
0]};xa.Always.__enum__=xa;xa.UpTo=function(a){a=["UpTo",1,a];a.__enum__=xa;return a};var ra={__ename__:["dr","Range"],__constructs__:["Exact","Between","ValueOrMore","ValueOrLess","Composite"],Exact:function(a){a=["Exact",0,a];a.__enum__=ra;return a},Between:function(a,b){var c=["Between",1,a,b];c.__enum__=ra;return c},ValueOrMore:function(a){a=["ValueOrMore",2,a];a.__enum__=ra;return a},ValueOrLess:function(a){a=["ValueOrLess",3,a];a.__enum__=ra;return a},Composite:function(a){a=["Composite",4,a];
a.__enum__=ra;return a}},sa={__ename__:["dr","LowHigh"],__constructs__:["Low","High"],Low:["Low",0]};sa.Low.__enum__=sa;sa.High=["High",1];sa.High.__enum__=sa;var ea={__ename__:["dr","DiceBinOp"],__constructs__:["Sum","Difference","Division","Multiplication"],Sum:["Sum",0]};ea.Sum.__enum__=ea;ea.Difference=["Difference",1];ea.Difference.__enum__=ea;ea.Division=["Division",2];ea.Division.__enum__=ea;ea.Multiplication=["Multiplication",3];ea.Multiplication.__enum__=ea;var Xa={__ename__:["dr","DiceUnOp"],
__constructs__:["Negate"],Negate:["Negate",0]};Xa.Negate.__enum__=Xa;var x=function(){};x.__name__=["dr","DiceExpressionExtensions"];x.toString=function(a){switch(a[1]){case 0:return x.diceToString(1,a[2]);case 1:return""+a[2];case 2:switch(a[2][1]){case 0:var b=a[3];return x.expressionsToString(a[2][2])+x.expressionExtractorToString(b);case 1:switch(a[2][2][1]){case 0:var b=a[3],c=a[2][3];return x.sidesToString(a[2][2][2])+x.diceFilterToString(c)+x.expressionExtractorToString(b);case 1:return b=
a[3],c=a[2][3],x.expressionsToString(a[2][2][2])+x.diceFilterToString(c)+x.expressionExtractorToString(b)}break;case 2:return b=a[3],x.diceBagToString(a[2][2],a[2][3])+x.expressionExtractorToString(b)}break;case 3:b=a[4];c=a[2];a=x.toString(a[3])+" ";var d;switch(c[1]){case 0:d="+";break;case 1:d="-";break;case 2:d="/";break;case 3:d="*"}return a+d+" "+x.toString(b);case 4:return"-"+x.toString(a[3])}};x.diceToString=function(a,b){return 1==a?100==b?"d%":"d"+b:100==b?""+a+"d%":""+a+"d"+b};x.diceBagToString=
function(a,b){var c=x.sidesToString(a),d;switch(b[1]){case 0:d=b[3];d=[" explode"].concat([x.timesToString(b[2])]).concat([x.rangeToString(d)]).filter(m.hasContent).join(" ");break;case 1:d=b[3],d=[" reroll"].concat([x.timesToString(b[2])]).concat([x.rangeToString(d)]).filter(m.hasContent).join(" ")}return c+d};x.sidesToString=function(a){return 1==g.distinct(a).length?x.diceToString(a.length,a[0]):"("+a.map(function(a){return x.diceToString(1,a)}).join(",")+")"};x.timesToString=function(a){switch(a[1]){case 0:return"";
case 1:switch(a[2]){case 1:return"once";case 2:return"twice";default:return""+a[2]+" times"}}};x.rangeToString=function(a){switch(a[1]){case 0:return"on "+a[2];case 1:return""+a[2]+"..."+a[3];case 2:return"on "+a[2]+" or more";case 3:return"on "+a[2]+" or less";case 4:return"("+a[2].map(x.rangeToString).join(",")+")"}};x.expressionsToString=function(a){return x.allOneDieSameSides(a)?(1<a.length?""+a.length:"")+x.toString(a[0]):1!=a.length||x.needsBraces(a[0])?"("+a.map(x.toString).join(",")+")":a.map(x.toString).join(",")};
x.allOneDieSameSides=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;if(0==d[1])b.push(d[2]);else return!1}return 1==g.distinct(b).length};x.expressionExtractorToString=function(a){switch(a[1]){case 0:return"";case 1:return" average";case 2:return" min";case 3:return" max";case 4:return" median"}};x.diceFilterToString=function(a){switch(a[1]){case 0:switch(a[2][1]){case 0:return" drop "+a[3];case 1:return" drop highest "+a[3]}break;case 1:switch(a[2][1]){case 0:return" keep lowest "+a[3];
case 1:return" keep "+a[3]}}};x.needsBraces=function(a){switch(a[1]){case 0:return!1;case 1:return!1;case 2:return!1;case 3:return!0;case 4:return!1}};x.calculateBasicRollsReduceable=function(a){switch(a[1]){case 0:return ja.sum(a[2].map(x.calculateBasicRolls));case 1:switch(a[2][1]){case 0:return a[2][2].length;case 1:return ja.sum(a[2][2].map(x.calculateBasicRolls))}break;case 2:return a[2].length}};x.calculateBasicRolls=function(a){switch(a[1]){case 0:return 1;case 1:return 1;case 2:return x.calculateBasicRollsReduceable(a[2]);
case 3:var b=a[4];return x.calculateBasicRolls(a[3])+x.calculateBasicRolls(b);case 4:return x.calculateBasicRolls(a[3])}};x.validateExpr=function(a){switch(a[1]){case 0:return a=a[2],0>=a?[Z.InsufficientSides(a)]:[];case 1:return[];case 2:return x.validateDiceReduceable(a[2]);case 3:var b=a[4];return x.validateExpr(a[3]).concat(x.validateExpr(b));case 4:return x.validateExpr(a[3])}};x.validateDiceReduceable=function(a){switch(a[1]){case 0:if(0==a[2].length)return[Z.EmptySet];var b=a[2].map(x.validateExpr);
return Array.prototype.concat.apply([],b);case 1:var c=a[3],d=a[2];a=[];switch(d[1]){case 0:b=d[2].length;break;case 1:b=d[2].length}switch(c[1]){case 0:1>c[3]?a.push(Z.DropOrKeepShouldBePositive):(c=c[3],c>=b&&a.push(Z.TooManyDrops(b,c)));break;case 1:1>c[3]?a.push(Z.DropOrKeepShouldBePositive):(c=c[3],c>b&&a.push(Z.TooManyKeeps(b,c)))}return a;case 2:var e=a[3];a=a[2];b=g.reduce(a,function(a,b){return 0<b?a:a.concat([Z.InsufficientSides(b)])},[]);a=a.map(function(a){return x.checkFunctor(a,e)});
return b.concat(Array.prototype.concat.apply([],a))}};x.alwaysInRange=function(a,b){for(var c=1,d=a+1;c<d;){var e=c++;if(!ta.matchRange(e,b))return!1}return!0};x.checkFunctor=function(a,b){switch(b[1]){case 0:var c=b[3];return x.alwaysInRange(a,c)?[Z.InfiniteReroll(a,c)]:[];case 1:return c=b[3],x.alwaysInRange(a,c)?[Z.InfiniteReroll(a,c)]:[];default:return[]}};x.validate=function(a){return P.fromArray(x.validateExpr(a))};var Z={__ename__:["dr","ValidationMessage"],__constructs__:"InsufficientSides EmptySet InfiniteReroll TooManyDrops TooManyKeeps DropOrKeepShouldBePositive".split(" "),
InsufficientSides:function(a){a=["InsufficientSides",0,a];a.__enum__=Z;return a},EmptySet:["EmptySet",1]};Z.EmptySet.__enum__=Z;Z.InfiniteReroll=function(a,b){var c=["InfiniteReroll",2,a,b];c.__enum__=Z;return c};Z.TooManyDrops=function(a,b){var c=["TooManyDrops",3,a,b];c.__enum__=Z;return c};Z.TooManyKeeps=function(a,b){var c=["TooManyKeeps",4,a,b];c.__enum__=Z;return c};Z.DropOrKeepShouldBePositive=["DropOrKeepShouldBePositive",5];Z.DropOrKeepShouldBePositive.__enum__=Z;var f=function(){};f.__name__=
["parsihax","Parser"];f.index=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return{status:!0,index:c,value:c,furthest:-1,expected:[]}};return a};f.letter=function(){return f.as(f.regexp(new O("[a-z]","i")),"a letter")};f.letters=function(){return f.regexp(new O("[a-z]*","i"))};f.digit=function(){return f.as(f.regexp(new O("[0-9]","")),"a digit")};f.digits=function(){return f.regexp(new O("[0-9]*",""))};f.whitespace=function(){return f.as(f.regexp(new O("\\s+","")),"whitespace")};f.optWhitespace=
function(){return f.regexp(new O("\\s*",""))};f.any=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return c>=a.length?{status:!1,index:-1,value:null,furthest:c,expected:["any character"]}:{status:!0,index:c+1,value:a.charAt(c),furthest:-1,expected:[]}};return a};f.all=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return{status:!0,index:a.length,value:a.substring(c),furthest:-1,expected:[]}};return a};f.eof=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return c<
a.length?{status:!1,index:-1,value:null,furthest:c,expected:["EOF"]}:{status:!0,index:c,value:null,furthest:-1,expected:[]}};return a};f.string=function(a){var b=a.length,c="'"+a+"'",d=Array(1);d[0]=function(d,h){null==h&&(h=0);var e=d.substring(h,h+b);return e==a?{status:!0,index:h+b,value:e,furthest:-1,expected:[]}:{status:!1,index:-1,value:null,furthest:h,expected:[c]}};return d};f["char"]=function(a){return f.as(f.test(function(b){return a==b}),"'"+a+"'")};f.oneOf=function(a){return f.test(function(b){return 0<=
a.indexOf(b)})};f.noneOf=function(a){return f.test(function(b){return 0>a.indexOf(b)})};f.regexp=function(a,b){null==b&&(b=0);var c=z.string(a),d=Array(1);d[0]=function(d,h){null==h&&(h=0);var e=d.substring(h);if(a.match(e)){var e=a.matched(b),f=a.matchedPos();if(null!=e&&0==f.pos)return{status:!0,index:h+f.len,value:e,furthest:-1,expected:[]}}return{status:!1,index:-1,value:null,furthest:h,expected:[c]}};return d};f.succeed=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);return{status:!0,
index:d,value:a,furthest:-1,expected:[]}};return b};f.fail=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);return{status:!1,index:-1,value:null,furthest:d,expected:[a]}};return b};f.empty=function(){return f.fail("empty")};f.seq=function(a){if(0==a.length)return f.fail("sequence of parsers");var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=null,h=[],f=0;f<a.length;){var g=a[f];++f;c=ka.mergeReplies(g[0](b,d),c);if(!c.status)return c;h.push(c.value);d=c.index}return ka.mergeReplies({status:!0,
index:d,value:h,furthest:-1,expected:[]},c)};return b};f.alt=function(a){if(0==a.length)return f.fail("at least one alt");var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=null,h=0;h<a.length;){var f=a[h];++h;c=ka.mergeReplies(f[0](b,d),c);if(c.status)break}return c};return b};f.sepBy=function(a,b){return f.or(f.sepBy1(a,b),f.succeed([]))};f.sepBy1=function(a,b){var c=f.many(f.then(b,a));return f.flatMap(a,function(a){return f.map(c,function(b){return[a].concat(b)})})};f.test=function(a){var b=
Array(1);b[0]=function(b,d){null==d&&(d=0);var c=b.charAt(d);return d<b.length&&a(c)?{status:!0,index:d+1,value:c,furthest:-1,expected:[]}:{status:!1,index:-1,value:null,furthest:d,expected:["a character matching "+z.string(a)]}};return b};f.takeWhile=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=d;;){var h;c<b.length?(h=b.charAt(c),h=a(h)):h=!1;if(!h)break;++c}return{status:!0,index:c,value:b.substring(d,c),furthest:-1,expected:[]}};return b};f.or=function(a,b){return f.alt([a,
b])};f.flatMap=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a[0](c,e);if(!d.status)return d;var f=b(d.value);return ka.mergeReplies(f[0](c,d.index),d)};return c};f.then=function(a,b){return f.flatMap(a,function(a){return b})};f.map=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a[0](c,e);return d.status?ka.mergeReplies({status:!0,index:d.index,value:b(d.value),furthest:-1,expected:[]},d):d};return c};f.result=function(a,b){return f.map(a,function(a){return b})};
f.skip=function(a,b){return f.flatMap(a,function(a){return f.result(b,a)})};f.many=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=[],h=null;;)if(h=ka.mergeReplies(a[0](b,d),h),h.status)d=h.index,c.push(h.value);else return ka.mergeReplies({status:!0,index:d,value:c,furthest:-1,expected:[]},h)};return b};f.many1=function(a){return f.atLeast(a,1)};f.times=function(a,b,c){null==c&&(c=b);var d=Array(1);d[0]=function(d,h){null==h&&(h=0);for(var e=[],f,g=null,k=0;k<b;)if(k++,f=a[0](d,
h),g=ka.mergeReplies(f,g),f.status)h=f.index,e.push(f.value);else return g;for(var k=0,l=c;k<l;)if(k++,f=a[0](d,h),g=ka.mergeReplies(f,g),f.status)h=f.index,e.push(f.value);else break;return ka.mergeReplies({status:!0,index:h,value:e,furthest:-1,expected:[]},g)};return d};f.atMost=function(a,b){return f.times(a,0,b)};f.atLeast=function(a,b){return f.map(f.seq([f.times(a,b),f.many(a)]),function(a){return a[0].concat(a[1])})};f.as=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=
a[0](c,e);d.status||(d.expected=[b]);return d};return c};f.lazy=function(a){var b=null,c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a()[0];return(b[0]=d)(c,e)};return b=c};var ka=function(){};ka.__name__=["parsihax","ParseUtil"];ka.formatError=function(a,b){var c=1==a.expected.length?a.expected[0]:"one of "+a.expected.join(", "),d=a.furthest,e=b.substring(0,d).split("\n"),h=e.length,e=e[e.length-1].length+1;if(d==b.length)d=", got the end of the stream";else var f=12<b.length-d?"...'":"'",d=
" at line "+h+" column "+e+", got "+(0<d?"'...":"'")+b.substring(d,d+12)+f;return"expected "+c+d};ka.makeSuccess=function(a,b){return{status:!0,index:a,value:b,furthest:-1,expected:[]}};ka.makeFailure=function(a,b){return{status:!1,index:-1,value:null,furthest:a,expected:[b]}};ka.mergeReplies=function(a,b){if(null==b||a.furthest>b.furthest)return a;var c=a.furthest==b.furthest?ka.unsafeUnion(a.expected,b.expected):b.expected;return{status:a.status,index:a.index,value:a.value,furthest:b.furthest,expected:c}};
ka.unsafeUnion=function(a,b){if(0==a.length)return b;if(0==b.length)return a;var c=a.concat(b);c.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a<b?-1:a>b?1:0});return c};var F=function(){};F.__name__=["js","Boot"];F.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=F.__nativeClassName(a);return null!=a?F.__resolveNativeClass(a):null};F.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=
typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;)var h=d++,c=2!=h?c+(","+F.__string_rec(a[h],b)):c+F.__string_rec(a[h],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)h=e++,d+=(0<h?",":"")+F.__string_rec(a[h],b);return d+"]"}try{d=a.toString}catch(rb){return Q.lastException=rb,"???"}if(null!=d&&d!=Object.toString&&
"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+F.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};F.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=
0,e=c.length;d<e;){var h=d++,h=c[h];if(h==b||F.__interfLoop(h,b))return!0}return F.__interfLoop(a.__super__,b)};F.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case fb:return"boolean"==typeof a;case tb:return!0;case gb:return"number"==typeof a;case ub:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||F.__interfLoop(F.getClass(a),b))return!0}else{if("object"==
typeof b&&F.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==hb&&null!=a.__name__||b==ib&&null!=a.__ename__?!0:a.__enum__==b}};F.__nativeClassName=function(a){a=F.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};F.__isNativeObj=function(a){return null!=F.__nativeClassName(a)};F.__resolveNativeClass=function(a){return S[a]};var Ea={__ename__:["dr","MoreLess"],__constructs__:["More","Less"],More:["More",0]};Ea.More.__enum__=Ea;Ea.Less=["Less",
1];Ea.Less.__enum__=Ea;var g=function(){};g.__name__=["thx","Arrays"];g.append=function(a,b){a.push(b);return a};g.appendIf=function(a,b,c){b&&a.push(c);return a};g.applyIndexes=function(a,b,c){null==c&&(c=!1);if(b.length!=a.length)throw new aa("`Arrays.applyIndexes` can only be applied to two arrays with the same length",null,{fileName:"Arrays.hx",lineNumber:55,className:"thx.Arrays",methodName:"applyIndexes"});var d=[];if(c){c=X.createInt();for(var e=0,h=a.length;e<h;){for(var f=e++,g=b[f];c.h.hasOwnProperty(g);)++g;
X.add(c,g);d[g]=a[f]}}else for(c=0,e=a.length;c<e;)h=c++,d[b[h]]=a[h];return d};g.monoid=function(){return{zero:[],append:function(a,b){return a.concat(b)}}};g.after=function(a,b){return a.slice(za.indexOf(a,b)+1)};g.atIndex=function(a,b){return 0<=b&&b<a.length?v.Some(a[b]):v.None};g.getOption=function(a,b){var c=a[b];return null==c?v.None:v.Some(c)};g.each=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(a[e])}};g.eachi=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(a[e],e)}};g.all=
function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(!b(a[e]))return!1}return!0};g.any=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return!0}return!1};g.at=function(a,b){return b.map(function(b){return a[b]})};g.before=function(a,b){return a.slice(0,za.indexOf(a,b))};g.commonsFromStart=function(a,b,c){null==c&&(c=ha.equality);var d=0,e=0;for(b=g.zip(a,b);e<b.length;){var h=b[e];++e;if(c(h._0,h._1))++d;else break}return a.slice(0,d)};g.compact=function(a){return a.filter(function(a){return null!=
a})};g.compare=function(a,b){var c=D.compare(a.length,b.length);if(0!=c)return c;for(var d=0,e=a.length;d<e;)if(c=d++,c=T.compare(a[c],b[c]),0!=c)return c;return 0};g.contains=function(a,b,c){if(null==c)return 0<=za.indexOf(a,b);for(var d=0,e=a.length;d<e;){var h=d++;if(c(a[h],b))return!0}return!1};g.containsAll=function(a,b,c){for(b=q(b)();b.hasNext();){var d=b.next();if(!g.contains(a,d,c))return!1}return!0};g.containsAny=function(a,b,c){for(b=q(b)();b.hasNext();){var d=b.next();if(g.contains(a,
d,c))return!0}return!1};g.create=function(a,b){for(var c=0<a?Array(a):[],d=0;d<a;){var e=d++;c[e]=b}return c};g.fromItem=function(a){return[a]};g.cross=function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;for(var h=0;h<b.length;){var f=b[h];++h;c.push([e,f])}}return c};g.crossMulti=function(a){a=a.slice();for(var b=a.shift().map(function(a){return[a]});0<a.length;)for(var c=a.shift(),d=b,b=[],e=0;e<c.length;){var h=c[e];++e;for(var f=0;f<d.length;){var g=d[f];++f;g=g.slice();g.push(h);b.push(g)}}return b};
g.distinct=function(a,b){var c=[];if(1>=a.length)return a.slice();null==b&&(b=ha.equality);for(var d=0;d<a.length;){var e=[a[d]];++d;g.any(c,function(a){return function(c){return b(c,a[0])}}(e))||c.push(e[0])}return c};g.eachPair=function(a,b){for(var c=0,d=a.length;c<d;)for(var e=c++,h=e,f=a.length;h<f;){var g=h++;if(!b(a[e],a[g]))return}};g.equals=function(a,b,c){if(null==a||null==b||a.length!=b.length)return!1;null==c&&(c=ha.equality);for(var d=0,e=a.length;d<e;){var h=d++;if(!c(a[h],b[h]))return!1}return!0};
g.extract=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return a.splice(e,1)[0]}return null};g.filterNull=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;null!=d&&b.push(d)}return b};g.filterOption=function(a){return g.reduce(a,function(a,c){switch(c[1]){case 0:a.push(c[2])}return a},[])};g.flattenOptions=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;switch(d[1]){case 0:b.push(d[2]);break;case 1:return v.None}}return v.Some(b)};g.find=function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;if(b(d))return d}return null};g.findi=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e],e))return a[e]}return null};g.findiOption=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e],e))return v.Some(a[e])}return v.None};g.findOption=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;if(b(d))return v.Some(d)}return v.None};g.findMap=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=b(d);if(!l.isNone(d))return d}return v.None};g.filterMap=
function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;e=b(e);switch(e[1]){case 0:c.push(e[2])}}return c};g.findSome=function(a){for(var b=0;b<a.length;){var c=a[b];++b;if(!l.isNone(c))return c}return v.None};g.findIndex=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return e}return-1};g.findLast=function(a,b){for(var c=a.length,d,e=0;e<c;)if(d=e++,d=c-d-1,b(a[d]))return a[d];return null};g.first=function(a){return a[0]};g.firstOption=function(a){a=a[0];return null==a?v.None:
v.Some(a)};g.flatMap=function(a,b){var c=a.map(b);return Array.prototype.concat.apply([],c)};g.flatten=function(a){return Array.prototype.concat.apply([],a)};g.from=function(a,b){return a.slice(za.indexOf(a,b))};g.groupByAppend=function(a,b,c){for(var d=0,e=a.length;d<e;){var h=d++,h=a[h],f=b(h),g=c.get(f);null==g?c.set(f,[h]):g.push(h)}return c};g.spanByIndex=function(a,b){for(var c=[],d=null,e=-1,h=0,f=a.length;h<f;){var g=h++,k=b(g);if(null==k)throw new aa("spanKey function returned null for index "+
g,null,{fileName:"Arrays.hx",lineNumber:633,className:"thx.Arrays",methodName:"spanByIndex"});d==k?c[e].push(a[g]):(d=k,++e,c.push([a[g]]))}return c};g.hasElements=function(a){return null!=a?0<a.length:!1};g.head=function(a){return a[0]};g.ifEmpty=function(a,b){return null!=a&&0!=a.length?a:b};g.initial=function(a){return a.slice(0,a.length-1)};g.intersperse=function(a,b){return g.reducei(a,function(a,b,e){a[2*e]=b;return a},g.create(2*a.length-1,b))};g.interspersef=function(a,b){if(0==a.length)return[];
for(var c=[a[0]],d=1,e=a.length;d<e;){var h=d++;c.push(b());c.push(a[h])}return c};g.isEmpty=function(a){return null!=a?0==a.length:!0};g.last=function(a){return a[a.length-1]};g.lastOption=function(a){a=a[a.length-1];return null==a?v.None:v.Some(a)};g.map=function(a,b){for(var c=[],d=0,e=a.length;d<e;){var h=d++;c.push(b(a[h]))}return c};g.mapi=function(a,b){for(var c=[],d=0,e=a.length;d<e;){var h=d++;c.push(b(a[h],h))}return c};g.mapRight=function(a,b){for(var c=a.length,d=[];0<=--c;)d.push(b(a[c]));
return d};g.order=function(a,b){var c=a.slice();c.sort(b);return c};g.pull=function(a,b,c){for(var d=0;d<b.length;){var e=b[d];++d;g.removeAll(a,e,c)}};g.pushIf=function(a,b,c){b&&a.push(c);return a};g.rank=function(a,b,c){null==c&&(c=!0);for(var d=[],e=0,h=a.length;e<h;){var f=e++;d.push({_0:a[f],_1:f})}d.sort(function(a,c){return b(a._0,c._0)});if(c){var k=X.createInt();return g.reducei(d,function(a,c,e){for(e=0<e&&0==b(d[e-1]._0,c._0)?a[d[e-1]._1]:e;k.h.hasOwnProperty(e);)++e;X.add(k,e);a[c._1]=
e;return a},[])}return g.reducei(d,function(a,c,e){a[c._1]=0<e&&0==b(d[e-1]._0,c._0)?a[d[e-1]._1]:e;return a},[])};g.reduce=function(a,b,c){for(var d=0;d<a.length;){var e=a[d];++d;c=b(c,e)}return c};g.foldLeft=function(a,b,c){return g.reduce(a,c,b)};g.foldLeft1=function(a,b){var c=g.dropLeft(a,1),d=a[0];return null==d?v.None:v.Some(g.reduce(c,b,d))};g.foldLeftEither=function(a,b,c){b=C.Right(b);for(var d=0;d<a.length;){var e=a[d];++d;switch(b[1]){case 0:return b;case 1:b=c(b[2],e)}}return b};g.foldMap=
function(a,b,c){return g.reduce(a.map(b),function(a,b){return Aa.append(c,a,b)},Aa.get_zero(c))};g.fold=function(a,b){return g.foldMap(a,ha.identity,b)};g.nel=function(a){return P.fromArray(a)};g.foldS=function(a,b){return l.map(g.nel(a),function(a){return P.fold(a,b)})};g.resize=function(a,b,c){for(;a.length<b;)a.push(c);a.splice(b,a.length-b);return a};g.resized=function(a,b,c){a=a.slice();return g.resize(a,b,c)};g.reducei=function(a,b,c){for(var d=0,e=a.length;d<e;){var h=d++;c=b(c,a[h],h)}return c};
g.reduceRight=function(a,b,c){for(var d=a.length;0<=--d;)c=b(c,a[d]);return c};g.removeAll=function(a,b,c){null==c&&(c=ha.equality);for(var d=a.length;0<=--d;)c(a[d],b)&&a.splice(d,1)};g.rest=function(a){return a.slice(1)};g.reversed=function(a){a=a.slice();a.reverse();return a};g.sample=function(a,b){var c=a.length;b<c||(b=c);for(var c=a.slice(),d=[],e=0,h=b;e<h;)e++,d.push(c.splice(z.random(c.length),1)[0]);return d};g.sampleOne=function(a){return a[z.random(a.length)]};g.string=function(a){return"["+
a.map(T.string).join(", ")+"]"};g.shuffle=function(a){for(var b=D.range(a.length),c=[];0<b.length;){var d=z.random(b.length),e=b[d];b.splice(d,1);c.push(a[e])}return c};g.split=function(a,b){return g.splitBy(a,Math.ceil(a.length/b))};g.splitBy=function(a,b){var c=[],d=a.length;b<d||(b=d);for(var d=0,e=Math.ceil(a.length/b);d<e;){var h=d++;c.push(a.slice(h*b,(h+1)*b))}return c};g.splitByPad=function(a,b,c){for(a=g.splitBy(a,b);a[a.length-1].length<b;)a[a.length-1].push(c);return a};g.tail=function(a){return a.slice(1)};
g.take=function(a,b){return a.slice(0,b)};g.takeLast=function(a,b){return a.slice(a.length-b)};g.traverseOption=function(a,b){return g.reduce(a,function(a,d){return l.ap(b(d),l.map(a,function(a){return function(b){a.push(b);return a}}))},v.Some([]))};g.traverseEither=function(a,b){return g.reduce(a,function(a,d){return K.ap(b(d),K.map(a,function(a){return function(b){a.push(b);return a}}))},C.Right([]))};g.traverseValidation=function(a,b,c){return g.reduce(a,function(a,e){return u.ap(b(e),u.map(a,
function(a){return function(b){a.push(b);return a}}),c)},C.Right([]))};g.traverseValidationIndexed=function(a,b,c){return g.reducei(a,function(a,e,h){return u.ap(b(e,h),u.map(a,function(a){return function(b){a.push(b);return a}}),c)},C.Right([]))};g.rotate=function(a){for(var b=[],c=0,d=a[0].length;c<d;){var e=c++,h=[];b.push(h);for(var f=0,g=a.length;f<g;){var k=f++;h.push(a[k][e])}}return b};g.sliding2=function(a,b){if(2>a.length)return[];for(var c=[],d=0,e=a.length-1;d<e;){var h=d++;c.push(b(a[h],
a[h+1]))}return c};g.unzip=function(a){var b=[],c=[];a.map(function(a){b.push(a._0);c.push(a._1)});return{_0:b,_1:c}};g.unzip3=function(a){var b=[],c=[],d=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2)});return{_0:b,_1:c,_2:d}};g.unzip4=function(a){var b=[],c=[],d=[],e=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3)});return{_0:b,_1:c,_2:d,_3:e}};g.unzip5=function(a){var b=[],c=[],d=[],e=[],h=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3);
h.push(a._4)});return{_0:b,_1:c,_2:d,_3:e,_4:h}};g.zip=function(a,b){for(var c=a.length,d=b.length,e=[],h=0,c=c<d?c:d;h<c;)d=h++,e.push({_0:a[d],_1:b[d]});return e};g.zip3=function(a,b,c){for(var d=[],e=0,h=ja.min([a.length,b.length,c.length]);e<h;){var f=e++;d.push({_0:a[f],_1:b[f],_2:c[f]})}return d};g.zip4=function(a,b,c,d){for(var e=[],h=0,f=ja.min([a.length,b.length,c.length,d.length]);h<f;){var g=h++;e.push({_0:a[g],_1:b[g],_2:c[g],_3:d[g]})}return e};g.zip5=function(a,b,c,d,e){for(var h=[],
f=0,g=ja.min([a.length,b.length,c.length,d.length,e.length]);f<g;){var k=f++;h.push({_0:a[k],_1:b[k],_2:c[k],_3:d[k],_4:e[k]})}return h};g.zipAp=function(a,b){for(var c=[],d=0,e=a.length,h=b.length,e=e<h?e:h;d<e;)h=d++,c.push(b[h](a[h]));return c};g.zip2Ap=function(a,b,c){return g.zipAp(c,b.map(M.curry(a)))};g.zip3Ap=function(a,b,c,d){return g.zipAp(d,g.zip2Ap(function(b,c){return function(d){return a(b,c,d)}},b,c))};g.zip4Ap=function(a,b,c,d,e){return g.zipAp(e,g.zip3Ap(function(b,c,d){return function(e){return a(b,
c,d,e)}},b,c,d))};g.zip5Ap=function(a,b,c,d,e,h){return g.zipAp(h,g.zip4Ap(function(b,c,d,e){return function(h){return a(b,c,d,e,h)}},b,c,d,e))};g.withPrepend=function(a,b){return[b].concat(a)};g["with"]=function(a,b){return a.concat([b])};g.withSlice=function(a,b,c,d){null==d&&(d=0);return a.slice(0,c).concat(b).concat(a.slice(c+d))};g.withInsert=function(a,b,c){return a.slice(0,c).concat([b]).concat(a.slice(c))};g.maxBy=function(a,b){return 0==a.length?v.None:v.Some(g.reduce(a,function(a,d){return Fa.max(b,
a,d)},a[0]))};g.minBy=function(a,b){return 0==a.length?v.None:v.Some(g.reduce(a,function(a,d){return Fa.min(b,a,d)},a[0]))};g.toMap=function(a,b){for(var c=N.Tip,d=[],e=0,h=a.length;e<h;){var f=e++,f=a[f];l.isNone(w.lookup(c,f._0,b))?c=w.insert(c,f._0,f._1,b):d.push(f._0)}return l.toFailure(P.fromArray(d),c)};g.toStringMap=function(a){return g.reduce(a,function(a,c){var b=c._0,e=c._1;null!=fa[b]?a.setReserved(b,e):a.h[b]=e;return a},new qa)};g.partition=function(a,b){return g.reduce(a,function(a,
d){b(d)?a._0.push(d):a._1.push(d);return a},{_0:[],_1:[]})};g.partitionWhile=function(a,b){var c=!0;return g.reduce(a,function(a,e){c?b(e)?a._0.push(e):(c=!1,a._1.push(e)):a._1.push(e);return a},{_0:[],_1:[]})};g.dropLeft=function(a,b){return b>=a.length?[]:a.slice(b)};g.dropRight=function(a,b){return b>=a.length?[]:a.slice(0,a.length-b)};g.dropWhile=function(a,b){for(var c=[].concat(a),d=0;d<a.length;){var e=a[d];++d;if(b(e))c.shift();else break}return c};g.pad=function(a,b,c){var d=[],e=0;for(b-=
a.length;e<b;)e++,d.push(c);return a.concat(d)};g.fill=function(a,b){return a.map(function(a){return null==a?b:a})};var k=function(){};k.__name__=["dr","DiceParser"];k.parse=function(a){var b=k.grammar[0](a);if(1==b.status)return C.Right(b.value);a=Ba.fromResult(b,a);return C.Left(a)};k.unsafeParse=function(a){a=k.parse(a);switch(a[1]){case 0:throw new W(a[2]);case 1:return a[2]}};k.normalize=function(a){return x.toString(k.unsafeParse(a))};k.dirValue=function(a,b){return f.then(f.then(a,k.OWS),f.alt([f.flatMap(k.lowOrHigh,
function(a){return f.then(k.OWS,f.map(k.positive,function(b){return{dir:a,value:b}}))}),f.map(k.positive,function(a){return{dir:b,value:a}})]))};k.diceFunctorConst=function(a,b){return f.alt([f.then(f.then(f.string(a),k.OWS),f.flatMap(k.functorTimes,function(a){return f.then(k.OWS,f.map(k.range,function(c){return b(a,c)}))}))])};k.diceReduce=function(a){return f.or(f.flatMap(a,function(a){return f.then(k.OWS,f.map(f.alt([f.result(k.SUM,da.Sum),f.result(k.AVERAGE,da.Average),f.result(k.MEDIAN,da.Median),
f.result(k.MIN,da.Min),f.result(k.MAX,da.Max)]),function(b){return ia.DiceReduce(a,b)}))}),f.map(a,function(a){return ia.DiceReduce(a,da.Sum)}))};k.commaSeparated=function(a){return f.then(f.then(k.OPEN_SET_BRACKET,k.OWS),f.skip(f.or(f.sepBy1(a,f.then(f.then(k.OWS,k.COMMA),k.OWS)),f.succeed([])),f.then(k.OWS,k.CLOSE_SET_BRACKET)))};var Ba=function(a,b,c){this.expected=a;this.furthest=b;this.input=c};Ba.__name__=["dr","DiceParseError"];Ba.fromResult=function(a,b){var c=g.distinct(a.expected.map(Ba.expectedToString));
return new Ba(c,a.furthest,b)};Ba.expectedToString=function(a){a=z.string(a);L.startsWith(a,"{\n\tr : ")&&(a=m.trimCharsRight(m.trimCharsLeft(a,"{ \n\tr:"),"\n\t }"));return a};Ba.prototype={expected:null,furthest:null,input:null,positionToString:function(){return this.furthest>=this.input.length?v.None:v.Some(this.input.substring(this.furthest))},toString:function(){var a=this.positionToString(),a=l.getOrElse(l.map(a,function(a){return"\u2026"+m.ellipsis(a,20)}),"end of file");return"expected "+
this.expected.join(", ")+" but got "+a},__class__:Ba};var la={__ename__:["dr","RollResult"],__constructs__:["OneResult","LiteralResult","DiceReduceResult","BinaryOpResult","UnaryOpResult"],OneResult:function(a){a=["OneResult",0,a];a.__enum__=la;return a},LiteralResult:function(a,b){var c=["LiteralResult",1,a,b];c.__enum__=la;return c},DiceReduceResult:function(a,b,c){a=["DiceReduceResult",2,a,b,c];a.__enum__=la;return a},BinaryOpResult:function(a,b,c,d){a=["BinaryOpResult",3,a,b,c,d];a.__enum__=la;
return a},UnaryOpResult:function(a,b,c){a=["UnaryOpResult",4,a,b,c];a.__enum__=la;return a}},Ga={__ename__:["dr","DiceReduceableResult"],__constructs__:["DiceExpressionsResult","DiceFilterableResult","DiceMapeableResult"],DiceExpressionsResult:function(a){a=["DiceExpressionsResult",0,a];a.__enum__=Ga;return a},DiceFilterableResult:function(a,b){var c=["DiceFilterableResult",1,a,b];c.__enum__=Ga;return c},DiceMapeableResult:function(a,b){var c=["DiceMapeableResult",2,a,b];c.__enum__=Ga;return c}},
Ha={__ename__:["dr","DiceResultMapped"],__constructs__:["Rerolled","Exploded","Normal"],Rerolled:function(a){a=["Rerolled",0,a];a.__enum__=Ha;return a},Exploded:function(a){a=["Exploded",1,a];a.__enum__=Ha;return a},Normal:function(a){a=["Normal",2,a];a.__enum__=Ha;return a}},Ya={__ename__:["dr","DieResultFilter"],__constructs__:["Keep","Discard"],Keep:function(a){a=["Keep",0,a];a.__enum__=Ya;return a},Discard:function(a){a=["Discard",1,a];a.__enum__=Ya;return a}},ma=function(){};ma.__name__=["dr",
"RollResultExtensions"];ma.getResult=function(a){switch(a[1]){case 0:return a[2].result;case 1:return a[3];case 2:return a[4];case 3:return a[5];case 4:return a[4]}};var ta=function(a){this.dieRoll=a};ta.__name__=["dr","Roller"];ta.matchRange=function(a,b){switch(b[1]){case 0:return 0==D.compare(a,b[2]);case 1:var c=b[3];return 0<=D.compare(a,b[2])?0>=D.compare(a,c):!1;case 2:return 0<=D.compare(a,b[2]);case 3:return 0>=D.compare(a,b[2]);case 4:return g.reduce(b[2],function(b,c){return b?!0:ta.matchRange(a,
c)},!1)}};ta.filterf=function(a){switch(a[1]){case 0:switch(a[2][1]){case 0:var b=a[3];return function(a,c){return a>=b};case 1:var c=a[3];return function(a,b){return a<b-c}}break;case 1:switch(a[2][1]){case 0:var d=a[3];return function(a,b){return a<d};case 1:var e=a[3];return function(a,b){return a>=b-e}}}};ta.prototype={dieRoll:null,roll:function(a){var b=this;switch(a[1]){case 0:return a=a[2],la.OneResult({result:this.dieRoll(a),sides:a});case 1:return a=a[2],la.LiteralResult(a,a);case 2:switch(a[2][1]){case 0:var c=
a[3];a=a[2][2].map(V(this,this.roll));var d=this.reduceRolls(a,c);return la.DiceReduceResult(Ga.DiceExpressionsResult(a),c,d);case 1:switch(a[2][2][1]){case 0:c=a[3];d=a[2][3];a=a[2][2][2].map(function(a){return b.roll(ia.Die(a))});a=this.filterRolls(a,d);var e=this.keepFilteredRolls(a),e=this.reduceRolls(e,c);return la.DiceReduceResult(Ga.DiceFilterableResult(a,d),c,e);case 1:return c=a[3],d=a[2][3],a=a[2][2][2].map(V(this,this.roll)),a=this.filterRolls(a,d),e=this.keepFilteredRolls(a),e=this.reduceRolls(e,
c),la.DiceReduceResult(Ga.DiceFilterableResult(a,d),c,e)}break;case 2:return c=a[3],d=a[2][3],a=a[2][2].map(function(a){return{result:b.dieRoll(a),sides:a}}),a=this.mapRolls(a,d),e=this.keepMappedRolls(a),e=this.reduceRolls(e.map(la.OneResult),c),la.DiceReduceResult(Ga.DiceMapeableResult(a,d),c,e)}break;case 3:d=a[4];c=a[2];a=this.roll(a[3]);d=this.roll(d);switch(c[1]){case 0:return la.BinaryOpResult(ea.Sum,a,d,ma.getResult(a)+ma.getResult(d));case 1:return la.BinaryOpResult(ea.Difference,a,d,ma.getResult(a)-
ma.getResult(d));case 2:return la.BinaryOpResult(ea.Division,a,d,Math.round(ma.getResult(a)/ma.getResult(d)));case 3:return la.BinaryOpResult(ea.Multiplication,a,d,ma.getResult(a)*ma.getResult(d))}break;case 4:return a=this.roll(a[3]),la.UnaryOpResult(Xa.Negate,a,-ma.getResult(a))}},mapRolls:function(a,b){switch(b[1]){case 0:switch(b[2][1]){case 0:var c=b[3],d=V(this,this.explodeRoll);return a.map(function(a){return d(a,-1,c)});case 1:var e=b[3],h=b[2][2],f=V(this,this.explodeRoll);return a.map(function(a){return f(a,
h,e)})}break;case 1:switch(b[2][1]){case 0:var g=b[3],k=V(this,this.rerollRoll);return a.map(function(a){return k(a,-1,g)});case 1:var l=b[3],m=b[2][2],n=V(this,this.rerollRoll);return a.map(function(a){return n(a,m,l)})}}},explodeRoll:function(a,b,c){a=this.rollRange(a,b,c);return 1==a.length?Ha.Normal(a[0]):Ha.Exploded(a)},rerollRoll:function(a,b,c){a=this.rollRange(a,b,c);return 1==a.length?Ha.Normal(a[0]):Ha.Rerolled(a)},rollRange:function(a,b,c){for(var d=[a];0!=b&&ta.matchRange(a.result,c);)a=
{result:this.dieRoll(a.sides),sides:a.sides},d.push(a),--b;return d},keepMappedRolls:function(a){a=a.map(function(a){switch(a[1]){case 0:return a=a[2],[a[a.length-1]];case 1:return a[2];case 2:return[a[2]]}});return Array.prototype.concat.apply([],a)},filterRolls:function(a,b){for(var c=g.rank(a,function(a,b){return D.compare(ma.getResult(a),ma.getResult(b))},!0),d=ta.filterf(b),e=[],h=0,f=a.length;h<f;){var k=h++,l=a[k];e.push(d(c[k],c.length)?Ya.Keep(l):Ya.Discard(l))}return e},keepFilteredRolls:function(a){return g.filterMap(a,
function(a){switch(a[1]){case 0:return v.Some(a[2]);case 1:return v.None}})},reduceRolls:function(a,b){return this.reduceResults(this.getRollResults(a),b)},reduceResults:function(a,b){switch(b[1]){case 0:return g.reduce(a,function(a,b){return a+b},0);case 1:return Math.round(ja.average(a));case 2:return ja.min(a);case 3:return ja.max(a);case 4:var c=g.order(a,D.compare),d=c.length;return 0==d%2?Math.round((c[Math.floor(d/2)]+c[Math.floor(d/2)])/2):c[Math.floor(d/2)]}},getRollResults:function(a){return a.map(ma.getResult)},
__class__:ta};var na={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:["CFunction",0]};na.CFunction.__enum__=na;na.Module=function(a){a=["Module",1,a];a.__enum__=na;return a};na.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=na;return a};na.Method=function(a,b){var c=["Method",3,a,b];c.__enum__=na;return c};na.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=na;return a};var Q=function(){};Q.__name__=["haxe","CallStack"];
Q.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var c=[],d=0;d<b.length;){var f=b[d];++d;null!=Q.wrapCallSite&&(f=Q.wrapCallSite(f));var g=null,k=f.getFunctionName();if(null!=k){var l=k.lastIndexOf(".");0<=l&&(g=y.substr(k,0,l),k=y.substr(k,l+1,null),g=na.Method(g,k))}c.push(na.FilePos(g,f.getFileName(),f.getLineNumber()))}return c};a=Q.makeStack(a.stack);Error.prepareStackTrace=b;return a};Q.callStack=function(){try{throw Error();
}catch(b){Q.lastException=b;b instanceof W&&(b=b.val);var a=Q.getStack(b);a.shift();return a}};Q.exceptionStack=function(){return Q.getStack(Q.lastException)};Q.toString=function(a){for(var b=new Wa,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";Q.itemToString(b,d)}return b.b};Q.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var c=b[2];a.b+="module ";a.b+=null==c?"null":""+c;break;case 2:var c=b[4],d=b[3],e=b[2];null!=e&&(Q.itemToString(a,e),a.b+=" (");a.b+=
null==d?"null":""+d;a.b+=" line ";a.b+=null==c?"null":""+c;null!=e&&(a.b+=")");break;case 3:c=b[3];d=b[2];a.b+=null==d?"null":""+d;a.b+=".";a.b+=null==c?"null":""+c;break;case 4:c=b[2],a.b+="local function #",a.b+=null==c?"null":""+c}};Q.makeStack=function(a){if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new O("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){var e=c.matched(1).split("."),
h=e.pop(),f=c.matched(2),g=z.parseInt(c.matched(3));b.push(na.FilePos("Anonymous function"==h?na.LocalFunction():"Global code"==h?null:na.Method(e.join("."),h),f,g))}else b.push(na.Module(L.trim(e)))}return b}return a};var ua=function(){};ua.__name__=["haxe","IMap"];ua.prototype={get:null,set:null,exists:null,remove:null,keys:null,iterator:null,__class__:ua};var jb={__name__:["haxe","_Int32","Int32_Impl_"]},Ia=function(){};Ia.__name__=["haxe","Utf8"];Ia.compare=function(a,b){return a>b?1:a==b?0:-1};
var db=function(){};db.__name__=["haxe","crypto","Base64"];var Ra=function(){};Ra.__name__=["haxe","ds","BalancedTree"];Ra.prototype={root:null,set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},remove:function(a){try{return this.root=this.removeLoop(a,this.root),!0}catch(b){Q.lastException=b;b instanceof W&&(b=b.val);if(F.__instanceof(b,String))return!1;throw b;
}},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return y.iter(a)},keys:function(){var a=[];this.keysLoop(this.root,a);return y.iter(a)},setLoop:function(a,b,c){if(null==c)return new oa(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new oa(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return a=this.setLoop(a,b,c.left),this.balance(a,c.key,c.value,c.right);
a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},removeLoop:function(a,b){if(null==b)throw new W("Not_found");var c=this.compare(a,b.key);return 0==c?this.merge(b.left,b.right):0>c?this.balance(this.removeLoop(a,b.left),b.key,b.value,b.right):this.balance(b.left,b.key,b.value,this.removeLoop(a,b.right))},iteratorLoop:function(a,b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},keysLoop:function(a,b){null!=a&&(this.keysLoop(a.left,b),b.push(a.key),
this.keysLoop(a.right,b))},merge:function(a,b){if(null==a)return b;if(null==b)return a;var c=this.minBinding(b);return this.balance(a,c.key,c.value,this.removeMinBinding(b))},minBinding:function(a){if(null==a)throw new W("Not_found");return null==a.left?a:this.minBinding(a.left)},removeMinBinding:function(a){return null==a.left?a.right:this.balance(this.removeMinBinding(a.left),a.key,a.value,a.right)},balance:function(a,b,c,d){var e=null==a?0:a._height,h=null==d?0:d._height;return e>h+2?(e=a.left,
h=a.right,(null==e?0:e._height)>=(null==h?0:h._height)?new oa(a.left,a.key,a.value,new oa(a.right,b,c,d)):new oa(new oa(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new oa(a.right.right,b,c,d))):h>e+2?(e=d.right,h=d.left,(null==e?0:e._height)>(null==h?0:h._height)?new oa(new oa(a,b,c,d.left),d.key,d.value,d.right):new oa(new oa(a,b,c,d.left.left),d.left.key,d.left.value,new oa(d.left.right,d.key,d.value,d.right))):new oa(a,b,c,d,(e>h?e:h)+1)},compare:function(a,b){return t.compare(a,
b)},__class__:Ra};var oa=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;-1==e?(a=this.left,b=this.right,a=(null==a?0:a._height)>(null==b?0:b._height)?this.left:this.right,a=null==a?0:a._height,this._height=a+1):this._height=e};oa.__name__=["haxe","ds","TreeNode"];oa.prototype={left:null,right:null,key:null,value:null,_height:null,__class__:oa};var Oa=function(){};Oa.__name__=["haxe","ds","EnumValueMap"];Oa.__interfaces__=[ua];Oa.__super__=Ra;Oa.prototype=J(Ra.prototype,
{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return t.isEnumValue(a)&&t.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):t.compare(a,b)},
__class__:Oa});var La=function(){this.h={}};La.__name__=["haxe","ds","IntMap"];La.__interfaces__=[ua];La.prototype={h:null,set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return y.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){var a=this.it.next();return this.ref[a]}}},__class__:La};var Ja=function(){this.h={__keys__:{}}};Ja.__name__=["haxe","ds","ObjectMap"];Ja.__interfaces__=[ua];Ja.prototype={h:null,set:function(a,b){var c=a.__id__||(a.__id__=++Ja.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},
keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return y.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:Ja};var v={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"],Some:function(a){a=["Some",0,a];a.__enum__=v;return a},None:["None",1]};v.None.__enum__=v;var Za=function(a,b){this.map=a;this.keys=
b;this.index=0;this.count=b.length};Za.__name__=["haxe","ds","_StringMap","StringMapIterator"];Za.prototype={map:null,keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=fa[b]?a.getReserved(b):a.h[b]},__class__:Za};var qa=function(){this.h={}};qa.__name__=["haxe","ds","StringMap"];qa.__interfaces__=[ua];qa.prototype={h:null,rh:null,set:function(a,b){null!=fa[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=
fa[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=fa[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=fa[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a]}return!0},keys:function(){return y.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Za(this,this.arrayKeys())},__class__:qa};var W=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,W)};W.__name__=["js","_Boot","HaxeError"];W.wrap=function(a){return a instanceof
Error?a:new W(a)};W.__super__=Error;W.prototype=J(Error.prototype,{val:null,__class__:W});var ja=function(){};ja.__name__=["thx","ArrayInts"];ja.average=function(a){return ja.sum(a)/a.length};ja.max=function(a){return l.get(g.maxBy(a,D.order))};ja.min=function(a){return l.get(g.minBy(a,D.order))};ja.resize=function(a,b,c){for(null==c&&(c=0);a.length<b;)a.push(c);a.splice(b,a.length-b);return a};ja.resized=function(a,b,c){null==c&&(c=0);a=a.slice();return ja.resize(a,b,c)};ja.sum=function(a){return g.reduce(a,
function(a,c){return a+c},0)};var Ca=function(){};Ca.__name__=["thx","Bools"];Ca.compare=function(a,b){return a==b?0:a?-1:1};Ca.toInt=function(a){return a?1:0};Ca.canParse=function(a){a=a.toLowerCase();if(null==a)return!0;switch(a){case "0":case "1":case "false":case "off":case "on":case "true":return!0;default:return!1}};Ca.parse=function(a){a=a.toLowerCase();if(null==a)return!1;switch(a){case "1":case "on":case "true":return!0;case "0":case "false":case "off":return!1;default:throw new W('unable to parse "'+
a+'"');}};Ca.xor=function(a,b){return a!=b};Ca.option=function(a,b){return a?v.Some(b):v.None};var Fa={__name__:["thx","_Ord","Ord_Impl_"],order:function(a,b,c){return a(b,c)},max:function(a,b,c){switch(a(b,c)[1]){case 1:return b;case 0:case 2:return c}},min:function(a,b,c){switch(a(b,c)[1]){case 1:return c;case 0:case 2:return b}},equal:function(a,b,c){return a(b,c)==ba.EQ},contramap:function(a,b){return function(c,d){var e=b(c),h=b(d);return a(e,h)}},inverse:function(a){return function(b,c){return a(c,
b)}},intComparison:function(a,b,c){switch(a(b,c)[1]){case 0:return-1;case 1:return 1;case 2:return 0}},fromIntComparison:function(a){return function(b,c){return kb.fromInt(a(b,c))}},forComparable:function(){return function(a,b){return kb.fromInt(a.compareTo(b))}},forComparableOrd:function(){return function(a,b){return a.compareTo(b)}}},kb={__name__:["thx","_Ord","Ordering_Impl_"],fromInt:function(a){return 0>a?ba.LT:0<a?ba.GT:ba.EQ},fromFloat:function(a){return 0>a?ba.LT:0<a?ba.GT:ba.EQ},toInt:function(a){switch(a[1]){case 0:return-1;
case 1:return 1;case 2:return 0}}},ba={__ename__:["thx","OrderingImpl"],__constructs__:["LT","GT","EQ"],LT:["LT",0]};ba.LT.__enum__=ba;ba.GT=["GT",1];ba.GT.__enum__=ba;ba.EQ=["EQ",2];ba.EQ.__enum__=ba;var n=function(){};n.__name__=["thx","Dates"];n.compare=function(a,b){var c=a.getTime(),d=b.getTime();return c<d?-1:c>d?1:0};n.create=function(a,b,c,d,e,h){null==h&&(h=0);null==e&&(e=0);null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);e+=Math.floor(h/60);h%=60;0>h&&(h+=60);d+=Math.floor(e/60);e%=60;0>e&&
(e+=60);c+=Math.floor(d/24);d%=24;0>d&&(d+=24);0==c&&(--b,0>b&&(b=11,--a),c=n.daysInMonth(a,b));a+=Math.floor(b/12);b%=12;0>b&&(b+=12);for(var f=n.daysInMonth(a,b);c>f;)c>f&&(c-=f,++b),11<b&&(b-=12,++a),f=n.daysInMonth(a,b);return new Date(a,b,c,d,e,h)};n.daysRange=function(a,b){if(0>n.compare(b,a))return[];for(var c=[];!n.sameDay(a,b);)c.push(a),a=n.jump(a,H.Day,1);c.push(b);return c};n.equals=function(a,b){return a.getTime()==b.getTime()};n.nearEquals=function(a,b,c,d){null==c&&(c=1);null==d&&(d=
H.Second);0>c&&(c=-c);var e=n.jump(a,d,-c);a=n.jump(a,d,c);return 0>=n.compare(e,b)?0<=n.compare(a,b):!1};n.greater=function(a,b){return 0<n.compare(a,b)};n.more=function(a,b){return 0<n.compare(a,b)};n.less=function(a,b){return 0>n.compare(a,b)};n.greaterEquals=function(a,b){return 0<=n.compare(a,b)};n.moreEqual=function(a,b){return 0<=n.compare(a,b)};n.lessEquals=function(a,b){return 0>=n.compare(a,b)};n.lessEqual=function(a,b){return 0>=n.compare(a,b)};n.isLeapYear=function(a){return 0!=a%4?!1:
0==a%100?0==a%400:!0};n.isInLeapYear=function(a){return n.isLeapYear(a.getFullYear())};n.daysInMonth=function(a,b){switch(b){case 1:return n.isLeapYear(a)?29:28;case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 3:case 5:case 8:case 10:return 30;default:throw new W('Invalid month "'+b+'".  Month should be a number, Jan=0, Dec=11');}};n.numDaysInMonth=function(a,b){return n.daysInMonth(b,a)};n.daysInThisMonth=function(a){return n.daysInMonth(a.getFullYear(),a.getMonth())};n.numDaysInThisMonth=
function(a){return n.daysInThisMonth(a)};n.sameYear=function(a,b){return a.getFullYear()==b.getFullYear()};n.sameMonth=function(a,b){return n.sameYear(a,b)?a.getMonth()==b.getMonth():!1};n.sameDay=function(a,b){return n.sameMonth(a,b)?a.getDate()==b.getDate():!1};n.sameHour=function(a,b){return n.sameDay(a,b)?a.getHours()==b.getHours():!1};n.sameMinute=function(a,b){return n.sameHour(a,b)?a.getMinutes()==b.getMinutes():!1};n.snapNext=function(a,b){var c=eb.snapNext(a.getTime(),b);return new Date(c)};
n.snapPrev=function(a,b){var c=eb.snapPrev(a.getTime(),b);return new Date(c)};n.snapTo=function(a,b){var c=eb.snapTo(a.getTime(),b);return new Date(c)};n.jump=function(a,b,c){var d=a.getSeconds(),e=a.getMinutes(),h=a.getHours(),f=a.getDate(),g=a.getMonth();a=a.getFullYear();switch(b[1]){case 0:d+=c;break;case 1:e+=c;break;case 2:h+=c;break;case 3:f+=c;break;case 4:f+=7*c;break;case 5:g+=c;break;case 6:a+=c}return n.create(a,g,f,h,e,d)};n.max=function(a,b){return a.getTime()>b.getTime()?a:b};n.min=
function(a,b){return a.getTime()<b.getTime()?a:b};n.snapToWeekDay=function(a,b,c){null==c&&(c=0);var d=a.getDay();b<c&&(b+=7);d<c&&(d+=7);return n.jump(a,H.Day,b-d)};n.snapNextWeekDay=function(a,b){var c=a.getDay(),d=b;d<c&&(d+=7);return n.jump(a,H.Day,d-c)};n.snapPrevWeekDay=function(a,b){var c=a.getDay(),d=b;d>c&&(d-=7);return n.jump(a,H.Day,d-c)};n.prevYear=function(a){return n.jump(a,H.Year,-1)};n.nextYear=function(a){return n.jump(a,H.Year,1)};n.prevMonth=function(a){return n.jump(a,H.Month,
-1)};n.nextMonth=function(a){return n.jump(a,H.Month,1)};n.prevWeek=function(a){return n.jump(a,H.Week,-1)};n.nextWeek=function(a){return n.jump(a,H.Week,1)};n.prevDay=function(a){return n.jump(a,H.Day,-1)};n.nextDay=function(a){return n.jump(a,H.Day,1)};n.prevHour=function(a){return n.jump(a,H.Hour,-1)};n.nextHour=function(a){return n.jump(a,H.Hour,1)};n.prevMinute=function(a){return n.jump(a,H.Minute,-1)};n.nextMinute=function(a){return n.jump(a,H.Minute,1)};n.prevSecond=function(a){return n.jump(a,
H.Second,-1)};n.nextSecond=function(a){return n.jump(a,H.Second,1)};n.withYear=function(a,b){return n.create(b,a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())};n.withMonth=function(a,b){return n.create(a.getFullYear(),b,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())};n.withDay=function(a,b){return n.create(a.getFullYear(),a.getMonth(),b,a.getHours(),a.getMinutes(),a.getSeconds())};n.withHour=function(a,b){return n.create(a.getFullYear(),a.getMonth(),a.getDate(),b,a.getMinutes(),
a.getSeconds())};n.withMinute=function(a,b){return n.create(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),b,a.getSeconds())};n.withSecond=function(a,b){return n.create(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),b)};n.parseDate=function(a){try{return C.Right(y.strDate(a))}catch(b){return Q.lastException=b,C.Left(""+a+" could not be parsed to a valid Date value.")}};var T=function(){};T.__name__=["thx","Dynamics"];T.equals=function(a,b){if(!U.sameType(a,b))return!1;
if(a==b)return!0;var c=E["typeof"](a);switch(c[1]){case 0:case 1:case 2:case 3:return!1;case 4:for(var c=t.fields(a),d=t.fields(b),e=0;e<c.length;){var h=c[e];++e;y.remove(d,h);if(!Object.prototype.hasOwnProperty.call(b,h))return!1;var f=t.field(a,h);if(!t.isFunction(f)&&(h=t.field(b,h),!T.equals(f,h)))return!1}if(0<d.length)return!1;if((d=p.isIterator(a))||A.isIterable(a)){if(d&&!p.isIterator(b)||!d&&!A.isIterable(b))return!1;c=d?p.toArray(a):p.toArray(q(a)());d=d?p.toArray(b):p.toArray(q(b)());
if(c.length!=d.length)return!1;e=0;for(f=c.length;e<f;)if(h=e++,!T.equals(c[h],d[h]))return!1}return!0;case 5:return t.compareMethods(a,b);case 6:c=E.getClassName(c[2]);d=E.getClassName(null==b?null:F.getClass(b));if(c!=d||"string"==typeof a)return!1;if(a instanceof Array&&null==a.__enum__){if(a.length!=b.length)return!1;c=0;for(d=a.length;c<d;)if(e=c++,!T.equals(a[e],b[e]))return!1;return!0}if(F.__instanceof(a,Date))return a.getTime()==b.getTime();if(F.__instanceof(a,ua)){c=p.toArray(a.keys());d=
p.toArray(b.keys());if(c.length!=d.length)return!1;for(d=0;d<c.length;)if(e=c[d],++d,!b.exists(e)||!T.equals(a.get(e),b.get(e)))return!1;return!0}if((d=p.isIterator(a))||A.isIterable(a)){c=d?p.toArray(a):p.toArray(q(a)());d=d?p.toArray(b):p.toArray(q(b)());if(c.length!=d.length)return!1;e=0;for(f=c.length;e<f;)if(h=e++,!T.equals(c[h],d[h]))return!1;return!0}c=null;Object.prototype.hasOwnProperty.call(a,"equals")?(c=t.field(a,"equals"),d=t.isFunction(c)):d=!1;if(d)return c.apply(a,[b]);c=E.getInstanceFields(null==
a?null:F.getClass(a));for(d=0;d<c.length;)if(f=c[d],++d,e=t.field(a,f),!t.isFunction(e)&&(f=t.field(b,f),!T.equals(e,f)))return!1;return!0;case 7:c=E.getEnumName(c[2]);d=E.getEnum(b);d=E.getEnumName(d);if(c!=d||a[1]!=b[1])return!1;c=a.slice(2);d=b.slice(2);e=0;for(f=c.length;e<f;)if(h=e++,!T.equals(c[h],d[h]))return!1;return!0;case 8:throw new W("Unable to compare two unknown types");}};T.clone=function(a,b){null==b&&(b=!1);var c=E["typeof"](a);switch(c[1]){case 0:return null;case 4:return G.copyTo(a,
{});case 1:case 2:case 3:case 5:case 7:case 8:return a;case 6:var d=c[2];switch(E.getClassName(d)){case "Array":return a.map(function(a){return T.clone(a,b)});case "Date":case "String":return a;default:if(b){for(var c=E.createEmptyInstance(d),e=0,d=E.getInstanceFields(d);e<d.length;){var h=d[e];++e;c[h]=T.clone(t.field(a,h),b)}return c}return a}}};T.compare=function(a,b){if(null==a&&null==b)return 0;if(null==a)return-1;if(null==b)return 1;if(!U.sameType(a,b))return Ia.compare(U.toString(E["typeof"](a)),
U.toString(E["typeof"](b)));var c=E["typeof"](a);switch(c[1]){case 1:return D.compare(a,b);case 2:return a<b?-1:a>b?1:0;case 3:return Ca.compare(a,b);case 4:return G.compare(a,b);case 6:switch(E.getClassName(c[2])){case "Array":return g.compare(a,b);case "Date":return n.compare(a,b);case "String":return Ia.compare(a,b);default:return Object.prototype.hasOwnProperty.call(a,"compare")?t.field(a,"compare").apply(a,[b]):Ia.compare(z.string(a),z.string(b))}case 7:return va.compare(a,b);default:return 0}};
T.string=function(a){var b=E["typeof"](a);switch(b[1]){case 0:return"null";case 1:case 2:case 3:return""+z.string(a);case 4:return G.string(a);case 5:return"<function>";case 6:switch(E.getClassName(b[2])){case "Array":return g.string(a);case "Date":return y.dateStr(a);case "String":return a;default:return F.__instanceof(a,ua)?ga.string(a):z.string(a)}case 7:return va.string(a);case 8:return"<unknown>"}};var C={__ename__:["thx","Either"],__constructs__:["Left","Right"],Left:function(a){a=["Left",0,
a];a.__enum__=C;return a},Right:function(a){a=["Right",1,a];a.__enum__=C;return a}},K=function(){};K.__name__=["thx","Eithers"];K.isLeft=function(a){switch(a[1]){case 0:return!0;case 1:return!1}};K.isRight=function(a){switch(a[1]){case 0:return!1;case 1:return!0}};K.toLeft=function(a){switch(a[1]){case 0:return v.Some(a[2]);case 1:return v.None}};K.toRight=function(a){switch(a[1]){case 0:return v.None;case 1:return v.Some(a[2])}};K.toLeftUnsafe=function(a){switch(a[1]){case 0:return a[2];case 1:return null}};
K.toRightUnsafe=function(a){switch(a[1]){case 0:return null;case 1:return a[2]}};K.map=function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:return C.Right(b(a[2]))}};K.ap=function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:var c=a[2];return K.map(b,function(a){return a(c)})}};K.flatMap=function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:return b(a[2])}};K.leftMap=function(a,b){switch(a[1]){case 0:return C.Left(b(a[2]));case 1:return C.Right(a[2])}};K.orThrow=function(a,b){switch(a[1]){case 0:throw new aa(""+
b+": "+z.string(a[2]),null,{fileName:"Eithers.hx",lineNumber:103,className:"thx.Eithers",methodName:"orThrow"});case 1:return a[2]}};K.toValidation=function(a){return a};K.toVNel=function(a){return K.leftMap(a,P.pure)};K.cata=function(a,b,c){switch(a[1]){case 0:return b(a[2]);case 1:return c(a[2])}};K.foldLeft=function(a,b,c){switch(a[1]){case 0:return b;case 1:return c(b,a[2])}};K.foldMap=function(a,b,c){return K.foldLeft(K.map(a,b),Aa.get_zero(c),function(a,b){return Aa.append(c,a,b)})};K.orElse=
function(a,b){return 0==a[1]?b:a};K.each=function(a,b){switch(a[1]){case 1:b(a[2])}};K.eachLeft=function(a,b){switch(a[1]){case 0:b(a[2])}};K.ensure=function(a,b,c){return 1==a[1]?b(a[2])?a:C.Left(c):a};var va=function(){};va.__name__=["thx","Enums"];va.string=function(a){var b=a[0],c=[],d=0;for(a=a.slice(2);d<a.length;){var e=a[d];++d;c.push(T.string(e))}return b+(0==c.length?"":"("+c.join(", ")+")")};va.compare=function(a,b){var c=D.compare(a[1],b[1]);return 0!=c?c:g.compare(a.slice(2),b.slice(2))};
va.sameConstructor=function(a,b){return a[1]==b[1]};va.min=function(a,b){return 0>va.compare(a,b)?a:b};va.max=function(a,b){return 0<va.compare(a,b)?a:b};var aa=function(a,b,c){Error.call(this,a);this.message=a;if(null==b){try{b=Q.exceptionStack()}catch(d){Q.lastException=d,b=[]}if(0==b.length)try{b=Q.callStack()}catch(d){Q.lastException=d,b=[]}}this.stackItems=b;this.pos=c};aa.__name__=["thx","Error"];aa.fromDynamic=function(a,b){return F.__instanceof(a,aa)?a:new Sa(""+z.string(a),a,null,b)};aa.__super__=
Error;aa.prototype=J(Error.prototype,{pos:null,stackItems:null,toString:function(){return this.message+"\nfrom: "+this.getPosition()+"\n\n"+this.stackToString()},getPosition:function(){return this.pos.className+"."+this.pos.methodName+"() at "+this.pos.lineNumber},stackToString:function(){return Q.toString(this.stackItems)},__class__:aa});var B=function(){};B.__name__=["thx","Floats"];B.angleDifference=function(a,b,c){null==c&&(c=360);a=(b-a)%c;0>a&&(a+=c);a>c/2&&(a-=c);return a};B.ceilTo=function(a,
b){var c=Math.pow(10,b);return Math.ceil(a*c)/c};B.canParse=function(a){return B.pattern_parse.match(a)};B.clamp=function(a,b,c){return a<b?b:a>c?c:a};B.clampSym=function(a,b){var c=-b;return a<c?c:a>b?b:a};B.compare=function(a,b){return a<b?-1:a>b?1:0};B.floorTo=function(a,b){var c=Math.pow(10,b);return Math.floor(a*c)/c};B.interpolate=function(a,b,c){return(c-b)*a+b};B.interpolateAngle=function(a,b,c,d){null==d&&(d=360);return B.wrapCircular(B.interpolate(a,b,b+B.angleDifference(b,c,d)),d)};B.interpolateAngleWidest=
function(a,b,c,d){null==d&&(d=360);return B.wrapCircular(B.interpolateAngle(a,b,c,d)-d/2,d)};B.interpolateAngleCW=function(a,b,c,d){null==d&&(d=360);b=B.wrapCircular(b,d);c=B.wrapCircular(c,d);c<b&&(c+=d);return B.wrapCircular(B.interpolate(a,b,c),d)};B.interpolateAngleCCW=function(a,b,c,d){null==d&&(d=360);b=B.wrapCircular(b,d);c=B.wrapCircular(c,d);c>b&&(c-=d);return B.wrapCircular(B.interpolate(a,b,c),d)};B.max=function(a,b){return a>b?a:b};B.min=function(a,b){return a<b?a:b};B.nearEquals=function(a,
b,c){null==c&&(c=1E-9);return isFinite(a)?Math.abs(a-b)<=c:isNaN(a)?isNaN(b):isNaN(b)?!1:isFinite(b)?!1:0<a==0<b};B.nearEqualAngles=function(a,b,c,d){null==d&&(d=1E-9);null==c&&(c=360);return Math.abs(B.angleDifference(a,b,c))<=d};B.nearZero=function(a,b){null==b&&(b=1E-9);return Math.abs(a)<=b};B.normalize=function(a){return 0>a?0:1<a?1:a};B.parse=function(a){"+"==a.substring(0,1)&&(a=a.substring(1));return parseFloat(a)};B.root=function(a,b){return Math.pow(a,1/b)};B.roundTo=function(a,b){var c=
Math.pow(10,b);return Math.round(a*c)/c};B.sign=function(a){return 0>a?-1:1};B.toString=function(a){return""+a};B.toFloat=function(a){return B.parse(a)};B.trunc=function(a){return 0>a?Math.ceil(a):Math.floor(a)};B.ftrunc=function(a){return 0>a?Math.ceil(a):Math.floor(a)};B.wrap=function(a,b,c){c=c-b+1;a<b&&(a+=c*((b-a)/c+1));return b+(a-b)%c};B.wrapCircular=function(a,b){a%=b;0>a&&(a+=b);return a};var M=function(){};M.__name__=["thx","Functions2"];M.memoize=function(a,b){null==b&&(b=function(a,b){return""+
z.string(a)+":"+z.string(b)});var c=new qa;return function(d,e){var h=b(d,e);if(null!=fa[h]?c.existsReserved(h):c.h.hasOwnProperty(h))return null!=fa[h]?c.getReserved(h):c.h[h];var f=a(d,e);null!=fa[h]?c.setReserved(h,f):c.h[h]=f;return f}};M.curry=function(a){return function(b){return function(c){return a(b,c)}}};M.join=function(a,b){return function(c,d){a(c,d);b(c,d)}};M.negate=function(a){return function(b,c){return!a(b,c)}};var ha=function(){};ha.__name__=["thx","Functions"];ha.equality=function(a,
b){return a==b};ha.identity=function(a){return a};ha.noop=function(){};ha.lift=function(a,b){return b(a)};var D=function(){};D.__name__=["thx","Ints"];D.abs=function(a){return 0>a?-a:a};D.canParse=function(a){return D.pattern_parse.match(a)};D.clamp=function(a,b,c){return a<b?b:a>c?c:a};D.clampSym=function(a,b){var c=-b;return a<c?c:a>b?b:a};D.compare=function(a,b){return a-b};D.gcd=function(a,b){0>a&&(a=-a);0>b&&(b=-b);return 0==b?a:D.gcd(b,a%b)};D.interpolate=function(a,b,c){return Math.round(b+
(c-b)*a)};D.isEven=function(a){return 0==a%2};D.isOdd=function(a){return 0!=a%2};D.lpad=function(a,b,c){null==b&&(b="0");var d=!1;0>a&&(d=!0,a=-a);return(d?"-":"")+L.lpad(""+a,b,c)};D.lcm=function(a,b){0>a&&(a=-a);0>b&&(b=-b);return 0==b?a:a*(b/D.gcd(a,b)|0)};D.rpad=function(a,b,c){null==b&&(b="0");return L.rpad(""+a,b,c)};D.max=function(a,b){return a>b?a:b};D.min=function(a,b){return a<b?a:b};D.parse=function(a,b){null==b&&(b="0x"==a.substring(0,2)?16:10);var c=parseInt(a,b);return isNaN(c)?null:
c};D.random=function(a,b){null==a&&(a=0);return z.random(b-a+1)+a};D.range=function(a,b,c){null==c&&(c=1);null==b&&(b=a,a=0);if(Infinity==(b-a)/c)throw new W("infinite range");var d=[],e=-1,h;if(0>c)for(;;){h=a+c*++e;if(!(h>b))break;d.push(h)}else for(;;){h=a+c*++e;if(!(h<b))break;d.push(h)}return d};D.rangeIter=function(a,b,c){null==c&&(c=1);return new $a(a,b,c)};D.toString=function(a,b){return a.toString(b)};D.toBase=function(a,b){return a.toString(b)};D.toBool=function(a){return 0!=a};D.toInt=
function(a,b){return D.parse(a,b)};D.sign=function(a){return 0>a?-1:1};D.wrapCircular=function(a,b){a%=b;0>a&&(a+=b);return a};var $a=function(a,b,c){null==c&&(c=1);this.current=a;this.stop=b;this.step=c};$a.__name__=["thx","RangeIterator"];$a.prototype={current:null,stop:null,step:null,hasNext:function(){return null==this.stop||0<=this.step&&this.current<this.stop?!0:0>this.step?this.current>this.stop:!1},next:function(){var a=this.current;this.current+=this.step;return a},__class__:$a};var A=function(){};
A.__name__=["thx","Iterables"];A.all=function(a,b){return p.all(q(a)(),b)};A.any=function(a,b){return p.any(q(a)(),b)};A.eachPair=function(a,b){p.eachPair(q(a)(),b)};A.equals=function(a,b,c){return p.equals(q(a)(),q(b)(),c)};A.filter=function(a,b){return p.filter(q(a)(),b)};A.find=function(a,b){return p.find(q(a)(),b)};A.findOption=function(a,b){var c=p.find(q(a)(),b);return null==c?v.None:v.Some(c)};A.first=function(a){return p.first(q(a)())};A.get=function(a,b){return p.get(q(a)(),b)};A.getOption=
function(a,b){var c=p.get(q(a)(),b);return null==c?v.None:v.Some(c)};A.last=function(a){return p.last(q(a)())};A.hasElements=function(a){return q(a)().hasNext()};A.indexOf=function(a,b){return p.indexOf(q(a)(),b)};A.isEmpty=function(a){return!q(a)().hasNext()};A.isIterable=function(a){var b;b=t.isObject(a)&&null==(null==a?null:F.getClass(a))?t.fields(a):E.getInstanceFields(null==a?null:F.getClass(a));return Pa.has(b,"iterator")?t.isFunction(t.field(a,"iterator")):!1};A.map=function(a,b){return p.map(q(a)(),
b)};A.fmap=function(a,b){return{iterator:function(){return p.fmap(q(a)(),b)}}};A.mapi=function(a,b){return p.mapi(q(a)(),b)};A.fmapi=function(a,b){return{iterator:function(){return p.fmapi(q(a)(),b)}}};A.order=function(a,b){return p.order(q(a)(),b)};A.reduce=function(a,b,c){return p.reduce(q(a)(),b,c)};A.reducei=function(a,b,c){return p.reducei(q(a)(),b,c)};A.toArray=function(a){return p.toArray(q(a)())};A.minBy=function(a,b,c){var d=v.None;for(a=q(a)();a.hasNext();){var e=[a.next()];l.any(d,function(a){return function(d){d=
b(d);var e=b(a[0]);return c(d,e)==ba.LT}}(e))||(d=v.Some(e[0]))}return d};A.maxBy=function(a,b,c){return A.minBy(a,b,Fa.inverse(c))};A.min=function(a,b){return A.minBy(a,ha.identity,b)};A.max=function(a,b){return A.minBy(a,ha.identity,Fa.inverse(b))};A.extremaBy=function(a,b,c){var d=v.None;for(a=q(a)();a.hasNext();){var e=a.next();switch(d[1]){case 0:var h=d[2];c(b(e),b(h._0))==ba.LT?d=v.Some({_0:e,_1:h._1}):(h=d[2],c(b(e),b(h._1))==ba.GT&&(d=v.Some({_0:h._0,_1:e})));break;case 1:d=v.Some({_0:e,
_1:e})}}return d};A.extrema=function(a,b){return A.extremaBy(a,ha.identity,b)};A.takeUntil=function(a,b){return p.takeUntil(q(a)(),b)};A.dropLeft=function(a,b){return{iterator:function(){for(var c=q(a)();0<b;)c.hasNext()&&c.next();return{next:V(c,c.next),hasNext:V(c,c.hasNext)}}}};A.dropUntil=function(a,b){return p.dropUntil(q(a)(),b)};A.unionBy=function(a,b,c){var d=[];for(a=q(a)();a.hasNext();){var e=a.next();d.push(e)}for(b=q(b)();b.hasNext();)a=[b.next()],A.any(d,function(a){return function(b){return c(b,
a[0])}}(a))||d.push(a[0]);return d};A.differenceBy=function(a,b,c){var d=[];for(a=q(a)();a.hasNext();){var e=[a.next()];A.any(b,function(a){return function(b){return c(b,a[0])}}(e))||d.push(e[0])}return d};A.unzip=function(a){return p.unzip(q(a)())};A.unzip3=function(a){return p.unzip3(q(a)())};A.unzip4=function(a){return p.unzip4(q(a)())};A.unzip5=function(a){return p.unzip5(q(a)())};A.zip=function(a,b){return p.zip(q(a)(),q(b)())};A.zip3=function(a,b,c){return p.zip3(q(a)(),q(b)(),q(c)())};A.zip4=
function(a,b,c,d){return p.zip4(q(a)(),q(b)(),q(c)(),q(d)())};A.zip5=function(a,b,c,d,e){return p.zip5(q(a)(),q(b)(),q(c)(),q(d)(),q(e)())};var p=function(){};p.__name__=["thx","Iterators"];p.all=function(a,b){for(;a.hasNext();){var c=a.next();if(!b(c))return!1}return!0};p.any=function(a,b){for(;a.hasNext();){var c=a.next();if(b(c))return!0}return!1};p.equals=function(a,b,c){null==c&&(c=ha.equality);for(var d,e;;){d=a.hasNext();e=b.hasNext();if(!d&&!e)return!0;if(!d||!e||!c(a.next(),b.next()))return!1}};
p.get=function(a,b){for(var c=0;a.hasNext();){var d=a.next();if(c++==b)return d}return null};p.getOption=function(a,b){var c=p.get(a,b);return null==c?v.None:v.Some(c)};p.eachPair=function(a,b){g.eachPair(p.toArray(a),b)};p.filter=function(a,b){return p.reduce(a,function(a,d){b(d)&&a.push(d);return a},[])};p.find=function(a,b){for(;a.hasNext();){var c=a.next();if(b(c))return c}return null};p.findOption=function(a,b){var c=p.find(a,b);return null==c?v.None:v.Some(c)};p.first=function(a){return a.hasNext()?
a.next():null};p.hasElements=function(a){return a.hasNext()};p.indexOf=function(a,b){for(var c=0;a.hasNext();){var d=a.next();if(b==d)return c;++c}return-1};p.isEmpty=function(a){return!a.hasNext()};p.isIterator=function(a){var b;b=t.isObject(a)&&null==(null==a?null:F.getClass(a))?t.fields(a):E.getInstanceFields(null==a?null:F.getClass(a));return Pa.has(b,"next")&&Pa.has(b,"hasNext")?t.isFunction(t.field(a,"next"))?t.isFunction(t.field(a,"hasNext")):!1:!1};p.last=function(a){for(var b=null;a.hasNext();)b=
a.next();return b};p.forEach=function(a,b){for(;a.hasNext();)b(a.next())};p.map=function(a,b){for(var c=[];a.hasNext();){var d=a.next();c.push(b(d))}return c};p.fmap=function(a,b){return new ab(a,b)};p.mapi=function(a,b){for(var c=[],d=0;a.hasNext();){var e=a.next();c.push(b(e,d++))}return c};p.fmapi=function(a,b){return new bb(a,b)};p.order=function(a,b){var c=p.toArray(a);c.sort(b);return c};p.reduce=function(a,b,c){for(;a.hasNext();)c=b(c,a.next());return c};p.reducei=function(a,b,c){p.mapi(a,
function(a,e){c=b(c,a,e)});return c};p.foldLeft=function(a,b,c){return p.reduce(a,c,b)};p.foldMap=function(a,b,c){return p.foldLeft(p.fmap(a,b),Aa.get_zero(c),function(a,b){return Aa.append(c,a,b)})};p.takeUntil=function(a,b){for(var c=[];a.hasNext();){var d=a.next();if(b(d))c.push(d);else break}return c};p.dropUntil=function(a,b){for(var c=!1,d=[];a.hasNext();){var e=a.next();c?d.push(e):b(e)||(c=!0,d.push(e))}return d};p.toArray=function(a){for(var b=[];a.hasNext();){var c=a.next();b.push(c)}return b};
p.unzip=function(a){var b=[],c=[];p.forEach(a,function(a){b.push(a._0);c.push(a._1)});return{_0:b,_1:c}};p.unzip3=function(a){var b=[],c=[],d=[];p.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2)});return{_0:b,_1:c,_2:d}};p.unzip4=function(a){var b=[],c=[],d=[],e=[];p.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3)});return{_0:b,_1:c,_2:d,_3:e}};p.unzip5=function(a){var b=[],c=[],d=[],e=[],h=[];p.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3);
h.push(a._4)});return{_0:b,_1:c,_2:d,_3:e,_4:h}};p.zip=function(a,b){for(var c=[];a.hasNext()&&b.hasNext();){var d={_0:a.next(),_1:b.next()};c.push(d)}return c};p.zip3=function(a,b,c){for(var d=[];a.hasNext()&&b.hasNext()&&c.hasNext();){var e={_0:a.next(),_1:b.next(),_2:c.next()};d.push(e)}return d};p.zip4=function(a,b,c,d){for(var e=[];a.hasNext()&&b.hasNext()&&c.hasNext()&&d.hasNext();){var h={_0:a.next(),_1:b.next(),_2:c.next(),_3:d.next()};e.push(h)}return e};p.zip5=function(a,b,c,d,e){for(var h=
[];a.hasNext()&&b.hasNext()&&c.hasNext()&&d.hasNext()&&e.hasNext();){var f={_0:a.next(),_1:b.next(),_2:c.next(),_3:d.next(),_4:e.next()};h.push(f)}return h};var ab=function(a,b){this.base=a;this.f=b};ab.__name__=["thx","MapIterator"];ab.prototype={base:null,f:null,next:function(){return this.f(this.base.next())},hasNext:function(){return this.base.hasNext()},__class__:ab};var bb=function(a,b){this.i=0;this.base=a;this.f=b};bb.__name__=["thx","MapIIterator"];bb.prototype={base:null,f:null,i:null,next:function(){var a=
this.f(this.base.next(),this.i);this.i++;return a},hasNext:function(){return this.base.hasNext()},__class__:bb};var ga=function(){};ga.__name__=["thx","Maps"];ga.copyTo=function(a,b){for(var c=a.keys();c.hasNext();){var d=c.next();b.set(d,a.get(d))}return b};ga.tuples=function(a){return p.map(a.keys(),function(b){return{_0:b,_1:a.get(b)}})};ga.mapValues=function(a,b,c){return ga.reduce(a,function(a,c){a.set(c._0,b(c._1));return a},c)};ga.reduce=function(a,b,c){return g.reduce(ga.tuples(a),b,c)};ga.values=
function(a){return p.map(a.keys(),function(b){return a.get(b)})};ga.foldLeftWithKeys=function(a,b,c){return p.reduce(a.keys(),function(c,e){return b(c,e,a.get(e))},c)};ga.getOption=function(a,b){var c=a.get(b);return null==c?v.None:v.Some(c)};ga.toObject=function(a){return g.reduce(ga.tuples(a),function(a,c){a[c._0]=c._1;return a},{})};ga.getAlt=function(a,b,c){a=a.get(b);return null==a?c:a};ga.isMap=function(a){return F.__instanceof(a,ua)};ga.string=function(a){return"["+ga.tuples(a).map(function(a){return T.string(a._0)+
" => "+T.string(a._1)}).join(", ")+"]"};ga.merge=function(a,b){return g.reduce(b,function(a,b){return p.reduce(b.keys(),function(a,c){a.set(c,b.get(c));return a},a)},a)};var Aa={__name__:["thx","_Monoid","Monoid_Impl_"],get_semigroup:function(a){return a.append},get_zero:function(a){return a.zero},append:function(a,b,c){return a.append(b,c)}},P={__name__:["thx","_Nel","Nel_Impl_"],nel:function(a,b){var c=P.fromArray(b);switch(c[1]){case 0:return P.cons(a,c[2]);case 1:return P.pure(a)}},pure:function(a){return wa.Single(a)},
cons:function(a,b){return wa.ConsNel(a,b)},fromArray:function(a){if(0==a.length)return v.None;for(var b=wa.Single(a[a.length-1]),c=D.rangeIter(a.length-2,-1,-1);c.hasNext();)var d=c.next(),b=wa.ConsNel(a[d],b);return v.Some(b)},map:function(a,b){return P.flatMap(a,function(a){return P.pure(b(a))})},flatMap:function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:var c=a[3];return P.append(b(a[2]),P.flatMap(c,b))}},fold:function(a,b){switch(a[1]){case 0:return a[2];case 1:return b(a[2],P.fold(a[3],
b))}},append:function(a,b){switch(a[1]){case 0:return wa.ConsNel(a[2],b);case 1:return wa.ConsNel(a[2],P.append(a[3],b))}},head:function(a){switch(a[1]){case 0:return a[2];case 1:return a[2]}},tail:function(a){switch(a[1]){case 0:return[];case 1:return P.toArray(a[3])}},init:function(a){switch(a[1]){case 0:return[];case 1:return[a[2]].concat(P.init(a[3]))}},last:function(a){switch(a[1]){case 0:return a[2];case 1:return P.last(a[3])}},push:function(a,b){return P.append(a,wa.Single(b))},pop:function(a){return{_0:P.last(a),
_1:P.init(a)}},unshift:function(a,b){return wa.ConsNel(b,a)},shift:function(a){return{_0:P.head(a),_1:P.tail(a)}},toArray:function(a){var b=null,b=function(a,d){switch(d[1]){case 0:return g.append(a,d[2]);case 1:var c=d[3],h=g.append(a,d[2]);return b(h,c)}};return b([],a)},semigroup:function(){return function(a,b){return P.append(a,b)}}},wa={__ename__:["thx","NonEmptyList"],__constructs__:["Single","ConsNel"],Single:function(a){a=["Single",0,a];a.__enum__=wa;return a},ConsNel:function(a,b){var c=
["ConsNel",1,a,b];c.__enum__=wa;return c}},lb={__ename__:["thx","Nil"],__constructs__:["nil"],nil:["nil",0]};lb.nil.__enum__=lb;var G=function(){};G.__name__=["thx","Objects"];G.compare=function(a,b){var c,d=t.fields(a);c=g.compare(d,t.fields(b));if(0!=c)return c;for(var e=0;e<d.length;)if(c=d[e],++e,c=T.compare(t.field(a,c),t.field(b,c)),0!=c)return c;return 0};G.isEmpty=function(a){return 0==t.fields(a).length};G.exists=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};G.fields=function(a){return t.fields(a)};
G.deflate=function(a,b){null==b&&(b=!0);var c=null,c=function(a){return a instanceof Array&&null==a.__enum__?b?C.Right(g.reducei(a,function(a,b,d){b=c(b);switch(b[1]){case 0:b=b[2];d=""+d;null!=fa[d]?a.setReserved(d,b):a.h[d]=b;break;case 1:b=b[2];for(var e=b.keys();e.hasNext();){var h=e.next(),f=""+d+"."+h,h=null!=fa[h]?b.getReserved(h):b.h[h];null!=fa[f]?a.setReserved(f,h):a.h[f]=h}}return a},new qa)):C.Left(a):t.isObject(a)&&null==(null==a?null:F.getClass(a))?C.Right(g.reduce(t.fields(a),function(b,
d){var e=t.field(a,d),e=c(e);switch(e[1]){case 0:var e=e[2],h=""+d;null!=fa[h]?b.setReserved(h,e):b.h[h]=e;break;case 1:for(e=e[2],h=e.keys();h.hasNext();){var f=h.next(),g=""+d+"."+f,f=null!=fa[f]?e.getReserved(f):e.h[f];null!=fa[g]?b.setReserved(g,f):b.h[g]=f}}return b},new qa)):C.Left(a)},d=c(a);switch(d[1]){case 0:return d[2];case 1:return ga.toObject(d[2])}};G.inflate=function(a){return g.reduce(t.fields(a),function(b,c){return G.setPath(b,c,t.field(a,c))},{})};G.combine=function(a,b){return G.shallowCombine(a,
b)};G.shallowCombine=function(a,b){for(var c={},d=0,e=t.fields(a);d<e.length;){var h=e[d];++d;c[h]=t.field(a,h)}d=0;for(e=t.fields(b);d<e.length;)h=e[d],++d,c[h]=t.field(b,h);return c};G.deepCombine=function(a,b){return G.copyTo(b,a,!0)};G.assign=function(a,b,c){null==c&&(c=function(a,b,c){return c});for(var d=0,e=t.fields(b);d<e.length;){var h=e[d];++d;var f=t.field(b,h);Object.prototype.hasOwnProperty.call(a,h)?a[h]=c(h,t.field(a,h),f):a[h]=f}return a};G.copyTo=function(a,b,c){null==c&&(c=!1);for(var d=
0,e=t.fields(a);d<e.length;){var f=e[d];++d;var g=T.clone(t.field(a,f),c),k=t.field(b,f),l;t.isObject(g)?(l=g,l=null==(null==l?null:F.getClass(l))):l=!1;l?t.isObject(k)?(l=k,l=null==(null==l?null:F.getClass(l))):l=!1:l=!1;l?G.copyTo(g,k):b[f]=g}return b};G.clone=function(a,b){null==b&&(b=!1);return T.clone(a,b)};G.toMap=function(a){return g.reduce(G.tuples(a),function(a,c){var b=c._0,e=c._1;null!=fa[b]?a.setReserved(b,e):a.h[b]=e;return a},new qa)};G.size=function(a){return t.fields(a).length};G.string=
function(a){return"{"+t.fields(a).map(function(b){var c=t.field(a,b),c="string"==typeof c?m.quote(c):T.string(c);return""+b+" : "+c}).join(", ")+"}"};G.stringImpl=function(a,b){};G.values=function(a){return t.fields(a).map(function(b){return t.field(a,b)})};G.tuples=function(a){return t.fields(a).map(function(b){return{_0:b,_1:t.field(a,b)}})};G.hasPath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");for(var c=b.split("."),d=a,e=0;e<c.length;){var f=c[e];++e;if(m.DIGITS.match(f)){f=z.parseInt(f);
d=d instanceof Array?d:null;if(null==d||d.length<=f)return!1;d=d[f]}else if(Object.prototype.hasOwnProperty.call(d,f))d=t.field(d,f);else return!1}return!0};G.hasPathValue=function(a,b){return null!=G.getPath(a,b)};G.getPath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");for(var c=b.split("."),d=a,e=0;e<c.length;){var f=c[e];++e;if(null==d)return null;if(m.DIGITS.match(f)){f=z.parseInt(f);d=d instanceof Array?d:null;if(null==d)return null;d=d[f]}else if(Object.prototype.hasOwnProperty.call(d,
f))d=t.field(d,f);else return null}return d};G.getPathOption=function(a,b){var c=G.getPath(a,b);return null==c?v.None:v.Some(c)};G.parsePath=function(a,b,c){a=l.toSuccessNel(G.getPathOption(a,b),"Object does not contain path "+b);switch(a[1]){case 0:return C.Left(a[2]);case 1:return c(a[2])}};G.getPathOr=function(a,b,c){return l.getOrElse(G.getPathOption(a,b),c)};G.setPath=function(a,b,c){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");var d=b.split(".");b=a;for(var e=0,f=d.length-1;e<f;){var g=e++,
k=d[g],g=d[g+1];m.DIGITS.match(k)||"*"==k?(k="*"==k?b.length:z.parseInt(k),null==b[k]&&(m.DIGITS.match(g)||"*"==g?b[k]=[]:b[k]={}),b=b[k]):(Object.prototype.hasOwnProperty.call(b,k)||(m.DIGITS.match(g)||"*"==g?b[k]=[]:b[k]={}),b=t.field(b,k))}d=d[d.length-1];m.DIGITS.match(d)?(d=z.parseInt(d),b[d]=c):"*"==d?b.push(c):b[d]=c;return a};G.removePath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");var c=b.split("."),d=c.pop();try{var e=g.reduce(c,function(a,b){if("*"==b)return a.pop();if(m.DIGITS.match(b)){var c=
z.parseInt(b);return a[c]}return t.field(a,b)},a);null!=e&&t.deleteField(e,d)}catch(h){Q.lastException=h}return a};G.normalizePath=function(a){return a.replace(RegExp("\\[(\\d+)\\]","g"),".$1")};var l=function(){};l.__name__=["thx","Options"];l.ofValue=function(a){return null==a?v.None:v.Some(a)};l.maybe=function(a){return null==a?v.None:v.Some(a)};l.equals=function(a,b,c){switch(a[1]){case 0:return 0==b[1]?(a=a[2],b=b[2],null==c&&(c=function(a,b){return a==b}),c(a,b)):!1;case 1:return 1==b[1]?!0:
!1}};l.equalsValue=function(a,b,c){return l.equals(a,null==b?v.None:v.Some(b),c)};l.map=function(a,b){switch(a[1]){case 0:return v.Some(b(a[2]));case 1:return v.None}};l.ap=function(a,b){switch(a[1]){case 0:var c=a[2];return l.map(b,function(a){return a(c)});case 1:return v.None}};l.flatMap=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return v.None}};l.join=function(a){switch(a[1]){case 0:return a[2];case 1:return v.None}};l.cata=function(a,b,c){switch(a[1]){case 0:return c(a[2]);case 1:return b}};
l.cataf=function(a,b,c){switch(a[1]){case 0:return c(a[2]);case 1:return b()}};l.foldLeft=function(a,b,c){switch(a[1]){case 0:return c(b,a[2]);case 1:return b}};l.foldLeftf=function(a,b,c){switch(a[1]){case 0:return a=a[2],c(b(),a);case 1:return b()}};l.foldMap=function(a,b,c){return l.foldLeft(l.map(a,b),Aa.get_zero(c),function(a,b){return Aa.append(c,a,b)})};l.filter=function(a,b){return 0==a[1]?b(a[2])?a:v.None:v.None};l.toArray=function(a){switch(a[1]){case 0:return[a[2]];case 1:return[]}};l.toBool=
function(a){switch(a[1]){case 0:return!0;case 1:return!1}};l.isNone=function(a){return!l.toBool(a)};l.toOption=function(a){return null==a?v.None:v.Some(a)};l.get=function(a){switch(a[1]){case 0:return a[2];case 1:return null}};l.getOrElse=function(a,b){switch(a[1]){case 0:return a[2];case 1:return b}};l.getOrThrow=function(a,b,c){null==b&&(b=new aa("Could not extract value from option",null,c));switch(a[1]){case 0:return a[2];case 1:throw b;}};l.getOrFail=function(a,b,c){return l.getOrThrow(a,new aa(b,
null,c),{fileName:"Options.hx",lineNumber:199,className:"thx.Options",methodName:"getOrFail"})};l.orElse=function(a,b){switch(a[1]){case 0:return a;case 1:return b}};l.all=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return!0}};l.any=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return!1}};l.traverseValidation=function(a,b){switch(a[1]){case 0:return u.map(b(a[2]),function(a){return v.Some(a)});case 1:return C.Right(v.None)}};l.toSuccess=function(a,b){switch(a[1]){case 0:return C.Right(a[2]);
case 1:return C.Left(b)}};l.toSuccessNel=function(a,b){switch(a[1]){case 0:return C.Right(a[2]);case 1:return C.Left(P.pure(b))}};l.toFailure=function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:return C.Right(b)}};l.toFailureNel=function(a,b){switch(a[1]){case 0:return C.Left(P.pure(a[2]));case 1:return C.Right(b)}};l.toRight=function(a,b){switch(a[1]){case 0:return C.Right(a[2]);case 1:return C.Left(b)}};l.toLeft=function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:return C.Right(b)}};
l.each=function(a,b){switch(a[1]){case 0:return b(a[2]),a;case 1:return a}};l.ap2=function(a,b,c){return l.ap(c,l.map(b,M.curry(a)))};l.ap3=function(a,b,c,d){return l.ap(d,l.ap(c,l.map(b,M.curry(function(b,c){return function(d){return a(b,c,d)}}))))};l.ap4=function(a,b,c,d,e){var f=function(b,c,d){return function(e){return a(b,c,d,e)}};return l.ap(e,l.ap(d,l.ap(c,l.map(b,M.curry(function(a,b){return function(c){return f(a,b,c)}})))))};l.ap5=function(a,b,c,d,e,f){var h=function(b,c,d,e){return function(f){return a(b,
c,d,e,f)}},g=function(a,b,c){return function(d){return h(a,b,c,d)}};return l.ap(f,l.ap(e,l.ap(d,l.ap(c,l.map(b,M.curry(function(a,b){return function(c){return g(a,b,c)}}))))))};l.ap6=function(a,b,c,d,e,f,g){var h=function(b,c,d,e,f){return function(h){return a(b,c,d,e,f,h)}},k=function(a,b,c,d){return function(e){return h(a,b,c,d,e)}},m=function(a,b,c){return function(d){return k(a,b,c,d)}};return l.ap(g,l.ap(f,l.ap(e,l.ap(d,l.ap(c,l.map(b,M.curry(function(a,b){return function(c){return m(a,b,c)}})))))))};
l.ap7=function(a,b,c,d,e,f,g,k){var h=function(b,c,d,e,f,h){return function(g){return a(b,c,d,e,f,h,g)}},m=function(a,b,c,d,e){return function(f){return h(a,b,c,d,e,f)}},n=function(a,b,c,d){return function(e){return m(a,b,c,d,e)}},p=function(a,b,c){return function(d){return n(a,b,c,d)}};return l.ap(k,l.ap(g,l.ap(f,l.ap(e,l.ap(d,l.ap(c,l.map(b,M.curry(function(a,b){return function(c){return p(a,b,c)}}))))))))};l.ap8=function(a,b,c,d,e,f,g,k,m){var h=function(b,c,d,e,f,h,g){return function(k){return a(b,
c,d,e,f,h,g,k)}},n=function(a,b,c,d,e,f){return function(g){return h(a,b,c,d,e,f,g)}},p=function(a,b,c,d,e){return function(f){return n(a,b,c,d,e,f)}},u=function(a,b,c,d){return function(e){return p(a,b,c,d,e)}},q=function(a,b,c){return function(d){return u(a,b,c,d)}};return l.ap(m,l.ap(k,l.ap(g,l.ap(f,l.ap(e,l.ap(d,l.ap(c,l.map(b,M.curry(function(a,b){return function(c){return q(a,b,c)}})))))))))};l.combine=function(a,b){return l.ap(b,l.map(a,M.curry(mb.of)))};l.combine2=function(a,b){return l.ap(b,
l.map(a,M.curry(mb.of)))};l.combine3=function(a,b,c){var d=vb.of;return l.ap(c,l.ap(b,l.map(a,M.curry(function(a,b){return function(c){return d(a,b,c)}}))))};l.combine4=function(a,b,c,d){var e=wb.of,f=function(a,b,c){return function(d){return e(a,b,c,d)}};return l.ap(d,l.ap(c,l.ap(b,l.map(a,M.curry(function(a,b){return function(c){return f(a,b,c)}})))))};l.combine5=function(a,b,c,d,e){var f=xb.of,g=function(a,b,c,d){return function(e){return f(a,b,c,d,e)}},k=function(a,b,c){return function(d){return g(a,
b,c,d)}};return l.ap(e,l.ap(d,l.ap(c,l.ap(b,l.map(a,M.curry(function(a,b){return function(c){return k(a,b,c)}}))))))};l.combine6=function(a,b,c,d,e,f){var h=yb.of,g=function(a,b,c,d,e){return function(f){return h(a,b,c,d,e,f)}},k=function(a,b,c,d){return function(e){return g(a,b,c,d,e)}},m=function(a,b,c){return function(d){return k(a,b,c,d)}};return l.ap(f,l.ap(e,l.ap(d,l.ap(c,l.ap(b,l.map(a,M.curry(function(a,b){return function(c){return m(a,b,c)}})))))))};l.spread2=function(a,b){return l.map(a,
function(a){return b(a._0,a._1)})};l.spread=function(a,b){return l.map(a,function(a){return b(a._0,a._1)})};l.spread3=function(a,b){return l.map(a,function(a){return b(a._0,a._1,a._2)})};l.spread4=function(a,b){return l.map(a,function(a){return b(a._0,a._1,a._2,a._3)})};l.spread5=function(a,b){return l.map(a,function(a){return b(a._0,a._1,a._2,a._3,a._4)})};l.spread6=function(a,b){return l.map(a,function(a){return b(a._0,a._1,a._2,a._3,a._4,a._5)})};var za={__name__:["thx","_ReadonlyArray","ReadonlyArray_Impl_"],
empty:function(){return[]},flatten:function(a){return Array.prototype.concat.apply([],a)},indexOf:function(a,b,c){null==c&&(c=ha.equality);for(var d=0,e=a.length;d<e;){var f=d++;if(c(b,a[f]))return f}return-1},lastIndexOf:function(a,b,c){null==c&&(c=ha.equality);for(var d=a.length,e=0;e<d;){var f=e++;if(c(b,a[d-f-1]))return f}return-1},get_length:function(a){return a.length},get:function(a,b){return a[b]},head:function(a){return a[0]},tail:function(a){return a.slice(1)},reduce:function(a,b,c,d){for(a=
0;a<b.length;){var e=b[a];++a;d=c(d,e)}return d},reducei:function(a,b,c){for(var d=0,e=a.length;d<e;){var f=d++;c=b(c,a[f],f)}return c},reverse:function(a){a=a.slice();a.reverse();return a},toArray:function(a){return a.slice()},unsafe:function(a){return a},concat:function(a,b){return a.concat(b)},insertAt:function(a,b,c){return a.slice(0,b).concat([c]).concat(a.slice(b))},insertAfter:function(a,b,c,d){b=za.indexOf(a,b,d);0>b&&(b=a.length-1);b+=1;return a.slice(0,b).concat([c]).concat(a.slice(b))},
insertBefore:function(a,b,c,d){b=za.indexOf(a,b,d);return a.slice(0,b).concat([c]).concat(a.slice(b))},replace:function(a,b,c,d){b=za.indexOf(a,b,d);if(0>b)throw new aa("unable to find reference element",null,{fileName:"ReadonlyArray.hx",lineNumber:94,className:"thx._ReadonlyArray.ReadonlyArray_Impl_",methodName:"replace"});return a.slice(0,b).concat([c]).concat(a.slice(b+1))},replaceAt:function(a,b,c){return a.slice(0,b).concat([c]).concat(a.slice(b+1))},remove:function(a,b,c){b=za.indexOf(a,b,c);
return a.slice(0,b).concat(a.slice(b+1))},removeAt:function(a,b){return a.slice(0,b).concat(a.slice(b+1))},prepend:function(a,b){return[b].concat(a)},append:function(a,b){return a.concat([b])},unshift:function(a,b){return[b].concat(a)},shift:function(a){if(0==a.length)return{_0:null,_1:a};var b=a[0];a=a.slice(0,0).concat(a.slice(1));return{_0:b,_1:a}},push:function(a,b){return a.concat([b])},pop:function(a){if(0==a.length)return{_0:null,_1:a};var b=a[a.length-1],c=a.length-1;a=a.slice(0,c).concat(a.slice(c+
1));return{_0:b,_1:a}},iterator:function(a){return y.iter(a)}},nb={__name__:["thx","_Semigroup","Semigroup_Impl_"],get_append:function(a){return a}},X={__name__:["thx","_Set","Set_Impl_"],createString:function(a){var b=new qa;null!=a&&X.pushMany(b,a);return b},createInt:function(a){var b=new La;null!=a&&X.pushMany(b,a);return b},createObject:function(a){var b=new Ja;null!=a&&X.pushMany(b,a);return b},createEnum:function(a){var b=new Oa;null!=a&&X.pushMany(b,a);return b},_new:function(a){return a},
add:function(a,b){if(a.exists(b))return!1;a.set(b,!0);return!0},copy:function(a){var b=X.empty(a);for(a=a.keys();a.hasNext();){var c=a.next();b.set(c,!0)}return b},empty:function(a){return E.createInstance(null==a?null:F.getClass(a),[])},difference:function(a,b){for(var c=X.copy(a),d=q(X)(b);d.hasNext();){var e=d.next();c.remove(e)}return c},filter:function(a,b){return X.reduce(a,function(a,d){b(d)&&X.add(a,d);return a},X.empty(a))},map:function(a,b){return X.reduce(a,function(a,d){a.push(b(d));return a},
[])},exists:function(a,b){return a.exists(b)},remove:function(a,b){return a.remove(b)},intersection:function(a,b){for(var c=X.empty(a),d=q(X)(a);d.hasNext();){var e=d.next();b.exists(e)&&c.set(e,!0)}return c},push:function(a,b){a.set(b,!0)},pushMany:function(a,b){for(var c=q(b)();c.hasNext();){var d=c.next();a.set(d,!0)}},reduce:function(a,b,c){for(a=q(X)(a);a.hasNext();){var d=a.next();c=b(c,d)}return c},iterator:function(a){return a.keys()},union:function(a,b){var c=X.copy(a);X.pushMany(c,X.toArray(b));
return c},toArray:function(a){var b=[];for(a=a.keys();a.hasNext();){var c=a.next();b.push(c)}return b},toString:function(a){return"{"+X.toArray(a).join(", ")+"}"},get_length:function(a){var b=0;for(a=a.iterator();a.hasNext();)a.next(),++b;return b}},m=function(){};m.__name__=["thx","Strings"];m.after=function(a,b){var c=a.indexOf(b);return 0>c?"":a.substring(c+b.length)};m.afterLast=function(a,b){var c=a.lastIndexOf(b);return 0>c?"":a.substring(c+b.length)};m.capitalize=function(a){return y.substr(a,
0,1).toUpperCase()+y.substr(a,1,a.length-1)};m.capitalizeWords=function(a,b){null==b&&(b=!1);return b?m.UCWORDSWS.map(y.substr(a,0,1).toUpperCase()+y.substr(a,1,a.length-1),m.upperMatch):m.UCWORDS.map(y.substr(a,0,1).toUpperCase()+y.substr(a,1,a.length-1),m.upperMatch)};m.canonicalizeNewlines=function(a){return a.replace(m.CANONICALIZE_LINES.r,"\n")};m.caseInsensitiveCompare=function(a,b){return null==a&&null==b?0:null==a?-1:null==b?1:Ia.compare(a.toLowerCase(),b.toLowerCase())};m.caseInsensitiveEndsWith=
function(a,b){return L.endsWith(a.toLowerCase(),b.toLowerCase())};m.caseInsensitiveEndsWithAny=function(a,b){return m.endsWithAny(a.toLowerCase(),b.map(function(a){return a.toLowerCase()}))};m.caseInsensitiveStartsWith=function(a,b){return L.startsWith(a.toLowerCase(),b.toLowerCase())};m.caseInsensitiveStartsWithAny=function(a,b){return m.startsWithAny(a.toLowerCase(),b.map(function(a){return a.toLowerCase()}))};m.collapse=function(a){var b=m.WSG;return L.trim(a).replace(b.r," ")};m.compare=function(a,
b){return Ia.compare(a,b)};m.caseInsensitiveContains=function(a,b){return 0<=a.toLowerCase().indexOf(b.toLowerCase())};m.contains=function(a,b){return 0<=a.indexOf(b)};m.count=function(a,b){return a.split(b).length-1};m.caseInsensitiveContainsAny=function(a,b){return g.any(b,function(b){return m.caseInsensitiveContains(a,b)})};m.containsAny=function(a,b){return g.any(b,function(b){return m.contains(a,b)})};m.caseInsensitiveContainsAll=function(a,b){return g.all(b,function(b){return m.caseInsensitiveContains(a,
b)})};m.containsAll=function(a,b){return g.all(b,function(b){return m.contains(a,b)})};m.dasherize=function(a){return L.replace(a,"_","-")};m.diffAt=function(a,b){for(var c=a.length,d=b.length,c=c<d?c:d,d=0;d<c;){var e=d++;if(a.substring(e,e+1)!=b.substring(e,e+1))return e}return c};m.ellipsis=function(a,b,c){null==c&&(c="\u2026");null==b&&(b=20);var d=c.length;return a.length>b?b<d?y.substr(c,d-b,b):y.substr(a,0,b-d)+c:a};m.ellipsisMiddle=function(a,b,c){null==c&&(c="\u2026");null==b&&(b=20);var d=
a.length,e=c.length;if(d>b){if(b<=e)return m.ellipsis(a,b,c);var f=Math.floor((b-e)/2);return y.substr(a,0,Math.ceil((b-e)/2))+c+y.substr(a,d-f,f)}return a};m.endsWithAny=function(a,b){return A.any(b,function(b){return L.endsWith(a,b)})};m.filter=function(a,b){return a.split("").filter(b).join("")};m.filterCharcode=function(a,b){return m.map(a,function(a){return y.cca(a,0)}).filter(b).map(function(a){return String.fromCharCode(a)}).join("")};m.from=function(a,b){var c=a.indexOf(b);return 0>c?"":a.substring(c)};
m.hashCode=function(a){for(var b=0,c=0,d=a.length;c<d;)var e=c++,e=y.cca(a,e),b=(jb._mul(m.HASCODE_MUL,b)+e|0)%m.HASCODE_MAX;return b};m.hasContent=function(a){return null!=a?0<a.length:!1};m.humanize=function(a){return L.replace(m.underscore(a),"_"," ")};m.isAlpha=function(a){return 0<a.length?!m.IS_ALPHA.match(a):!1};m.isAlphaNum=function(a){return m.ALPHANUM.match(a)};m.isBreakingWhitespace=function(a){return!m.IS_BREAKINGWHITESPACE.match(a)};m.isLowerCase=function(a){return a.toLowerCase()==a};
m.isUpperCase=function(a){return a.toUpperCase()==a};m.ifEmpty=function(a,b){return null!=a&&""!=a?a:b};m.isDigitsOnly=function(a){return m.DIGITS.match(a)};m.isEmpty=function(a){return null!=a?""==a:!0};m.lowerCaseFirst=function(a){return a.substring(0,1).toLowerCase()+a.substring(1)};m.random=function(a,b){null==b&&(b=1);return y.substr(a,Math.floor((a.length-b+1)*Math.random()),b)};m.randomSequence=function(a,b){return D.range(0,b).map(function(b){return m.random(a)}).join("")};m.randomSequence64=
function(a){return m.randomSequence(db.CHARS,a)};m.iterator=function(a){return y.iter(a.split(""))};m.map=function(a,b){return a.split("").map(b)};m.remove=function(a,b){return L.replace(a,b,"")};m.removeAfter=function(a,b){return L.endsWith(a,b)?a.substring(0,a.length-b.length):a};m.removeAt=function(a,b,c){return a.substring(0,b)+a.substring(b+c)};m.removeBefore=function(a,b){return L.startsWith(a,b)?a.substring(b.length):a};m.removeOne=function(a,b){var c=a.indexOf(b);return 0>c?a:a.substring(0,
c)+a.substring(c+b.length)};m.repeat=function(a,b){for(var c=[],d=0;d<b;)d++,c.push(a);return c.join("")};m.reverse=function(a){a=a.split("");a.reverse();return a.join("")};m.quote=function(a){return 0>a.indexOf('"')?'"'+a+'"':0>a.indexOf("'")?"'"+a+"'":'"'+L.replace(a,'"','\\"')+'"'};m.splitOnce=function(a,b){var c=a.indexOf(b);return 0>c?[a]:[a.substring(0,c),a.substring(c+b.length)]};m.startsWithAny=function(a,b){return A.any(b,function(b){return L.startsWith(a,b)})};m.stripTags=function(a){return a.replace(m.STRIPTAGS.r,
"")};m.surround=function(a,b,c){return""+b+a+(null==c?b:c)};m.toArray=function(a){return a.split("")};m.toCharcodes=function(a){return m.map(a,function(a){return y.cca(a,0)})};m.toChunks=function(a,b){for(var c=[];0<a.length;)c.push(y.substr(a,0,b)),a=y.substr(a,b,a.length-b);return c};m.toLines=function(a){return m.SPLIT_LINES.split(a)};m.trimChars=function(a,b){return m.trimCharsRight(m.trimCharsLeft(a,b),b)};m.trimCharsLeft=function(a,b){for(var c=0,d=0,e=a.length;d<e;){var f=d++;if(0<=b.indexOf(a.charAt(f)))++c;
else break}return a.substring(c)};m.trimCharsRight=function(a,b){for(var c=a.length,d=c,e,f=0;f<c;)if(e=f++,e=c-e-1,0<=b.indexOf(a.charAt(e)))d=e;else break;return a.substring(0,d)};m.underscore=function(a){a=a.replace(RegExp("::","g"),"/");a=a.replace(RegExp("([A-Z]+)([A-Z][a-z])","g"),"$1_$2");a=a.replace(RegExp("([a-z\\d])([A-Z])","g"),"$1_$2");a=a.replace(RegExp("-","g"),"_");return a.toLowerCase()};m.upperCaseFirst=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)};m.upTo=function(a,
b){var c=a.indexOf(b);return 0>c?a:a.substring(0,c)};m.wrapColumns=function(a,b,c,d){null==d&&(d="\n");null==c&&(c="");null==b&&(b=78);return m.SPLIT_LINES.split(a).map(function(a){return m.wrapLine(L.trim(a.replace(m.WSG.r," ")),b,c,d)}).join(d)};m.upperMatch=function(a){return a.matched(0).toUpperCase()};m.wrapLine=function(a,b,c,d){var e=[],f=0,g=a.length,k=c.length;for(b-=k;;){if(f+b>=g-k){e.push(a.substring(f));break}for(var l=0;!L.isSpace(a,f+b-l)&&l<b;)++l;if(l==b){for(l=0;!L.isSpace(a,f+b+
l)&&f+b+l<g;)++l;e.push(a.substring(f,f+b+l));f+=b+l+1}else e.push(a.substring(f,f+b-l)),f+=b-l+1}return c+e.join(d+c)};m.lpad=function(a,b,c){c-=a.length;return 0<c?m.repeat(b,c)+a:a};m.rpad=function(a,b,c){c-=a.length;return 0<c?a+m.repeat(b,c):a};var H={__ename__:["thx","TimePeriod"],__constructs__:"Second Minute Hour Day Week Month Year".split(" "),Second:["Second",0]};H.Second.__enum__=H;H.Minute=["Minute",1];H.Minute.__enum__=H;H.Hour=["Hour",2];H.Hour.__enum__=H;H.Day=["Day",3];H.Day.__enum__=
H;H.Week=["Week",4];H.Week.__enum__=H;H.Month=["Month",5];H.Month.__enum__=H;H.Year=["Year",6];H.Year.__enum__=H;var ca=function(){};ca.__name__=["thx","Timer"];ca.debounce=function(a,b,c){null==c&&(c=!1);var d=ha.noop;return function(){c&&(c=!1,a());d();d=ca.delay(a,b)}};ca.throttle=function(a,b,c){null==c&&(c=!1);var d=!1;return function(){c?(c=!1,a()):d||(d=!0,ca.delay(a,b))}};ca.repeat=function(a,b){var c=setInterval(a,b);return function(){ca.clear(c)}};ca.delay=function(a,b){var c=setTimeout(a,
b);return function(){ca.clear(c)}};ca.frame=function(a){var b=!1,c=ha.noop,d=performance.now(),e,c=function(){b||(e=performance.now(),a(e-d),d=e,requestAnimationFrame(c))};requestAnimationFrame(c);return function(){b=!0}};ca.nextFrame=function(a){var b=requestAnimationFrame(a);return function(){cancelAnimationFrame(b)}};ca.immediate=function(a){var b=setImmediate(a);return function(){ca.clear(b)}};ca.clear=function(a){clearTimeout(a)};ca.time=function(){return performance.now()};ca.resolution=function(){if(null!=
ca._resolution)return ca._resolution;for(var a=performance.now(),b,c=0;++c,b=performance.now(),0==b-a;);return ca._resolution=b-a};var eb={__name__:["thx","_Timestamp","Timestamp_Impl_"],create:function(a,b,c,d,e,f){return n.create(a,b,c,d,e,f).getTime()},now:function(){return(new Date).getTime()},fromDate:function(a){return a.getTime()},fromString:function(a){return y.strDate(a).getTime()},toDate:function(a){return new Date(a)},toString:function(a){return y.dateStr(new Date(a))},snapNext:function(a,
b){switch(b[1]){case 0:return 1E3*Math.ceil(a/1E3);case 1:return 6E4*Math.ceil(a/6E4);case 2:return 36E5*Math.ceil(a/36E5);case 3:var c=new Date(a);return n.create(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,0).getTime();case 4:var c=new Date(a),d=c.getDay();return n.create(c.getFullYear(),c.getMonth(),c.getDate()+7-d,0,0,0).getTime();case 5:return c=new Date(a),n.create(c.getFullYear(),c.getMonth()+1,1,0,0,0).getTime();case 6:return n.create((new Date(a)).getFullYear()+1,0,1,0,0,0).getTime()}},
snapPrev:function(a,b){switch(b[1]){case 0:return 1E3*Math.floor(a/1E3);case 1:return 6E4*Math.floor(a/6E4);case 2:return 36E5*Math.floor(a/36E5);case 3:var c=new Date(a);return n.create(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0).getTime();case 4:var c=new Date(a),d=c.getDay();return n.create(c.getFullYear(),c.getMonth(),c.getDate()-d,0,0,0).getTime();case 5:return c=new Date(a),n.create(c.getFullYear(),c.getMonth(),1,0,0,0).getTime();case 6:return n.create((new Date(a)).getFullYear(),0,1,0,
0,0).getTime()}},snapTo:function(a,b){switch(b[1]){case 0:return 1E3*Math.round(a/1E3);case 1:return 6E4*Math.round(a/6E4);case 2:return 36E5*Math.round(a/36E5);case 3:var c=new Date(a),d=12<=c.getHours()?1:0;return n.create(c.getFullYear(),c.getMonth(),c.getDate()+d,0,0,0).getTime();case 4:return c=new Date(a),d=c.getDay(),d=3>d?-d:3<d?7-d:12>c.getHours()?-d:7-d,n.create(c.getFullYear(),c.getMonth(),c.getDate()+d,0,0,0).getTime();case 5:return c=new Date(a),d=c.getDate()>Math.round(pa.getMonthDays(c)/
2)?1:0,n.create(c.getFullYear(),c.getMonth()+d,1,0,0,0).getTime();case 6:return c=new Date(a),d=a>(new Date(c.getFullYear(),6,2,0,0,0)).getTime()?1:0,n.create(c.getFullYear()+d,0,1,0,0,0).getTime()}},r:function(a,b){return Math.round(a/b)*b},f:function(a,b){return Math.floor(a/b)*b},c:function(a,b){return Math.ceil(a/b)*b}},mb={__name__:["thx","_Tuple","Tuple2_Impl_"],of:function(a,b){return{_0:a,_1:b}},_new:function(a,b){return{_0:a,_1:b}},get_left:function(a){return a._0},get_right:function(a){return a._1},
flip:function(a){return{_0:a._1,_1:a._0}},dropLeft:function(a){return a._1},dropRight:function(a){return a._0},"with":function(a,b){return{_0:a._0,_1:a._1,_2:b}},toString:function(a){return"Tuple2("+z.string(a._0)+","+z.string(a._1)+")"},map:function(a,b){return{_0:a._0,_1:b(a._1)}},squeeze:function(a){return function(b){return a(b._0,b._1)}},arrayToTuple2:function(a){return{_0:a[0],_1:a[1]}}},vb={__name__:["thx","_Tuple","Tuple3_Impl_"],of:function(a,b,c){return{_0:a,_1:b,_2:c}},_new:function(a,
b,c){return{_0:a,_1:b,_2:c}},flip:function(a){return{_0:a._2,_1:a._1,_2:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2}},dropRight:function(a){return{_0:a._0,_1:a._1}},"with":function(a,b){return{_0:a._0,_1:a._1,_2:a._2,_3:b}},toString:function(a){return"Tuple3("+z.string(a._0)+","+z.string(a._1)+","+z.string(a._2)+")"},arrayToTuple3:function(a){return{_0:a[0],_1:a[1],_2:a[2]}},map:function(a,b){return{_0:a._0,_1:a._1,_2:b(a._2)}}},wb={__name__:["thx","_Tuple","Tuple4_Impl_"],of:function(a,b,
c,d){return{_0:a,_1:b,_2:c,_3:d}},_new:function(a,b,c,d){return{_0:a,_1:b,_2:c,_3:d}},flip:function(a){return{_0:a._3,_1:a._2,_2:a._1,_3:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2,_2:a._3}},dropRight:function(a){return{_0:a._0,_1:a._1,_2:a._2}},"with":function(a,b){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3,_4:b}},toString:function(a){return"Tuple4("+z.string(a._0)+","+z.string(a._1)+","+z.string(a._2)+","+z.string(a._3)+")"},arrayToTuple4:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3]}}},
xb={__name__:["thx","_Tuple","Tuple5_Impl_"],of:function(a,b,c,d,e){return{_0:a,_1:b,_2:c,_3:d,_4:e}},_new:function(a,b,c,d,e){return{_0:a,_1:b,_2:c,_3:d,_4:e}},flip:function(a){return{_0:a._4,_1:a._3,_2:a._2,_3:a._1,_4:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2,_2:a._3,_3:a._4}},dropRight:function(a){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3}},"with":function(a,b){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3,_4:a._4,_5:b}},toString:function(a){return"Tuple5("+z.string(a._0)+","+z.string(a._1)+","+
z.string(a._2)+","+z.string(a._3)+","+z.string(a._4)+")"},arrayToTuple5:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3],_4:a[4]}}},yb={__name__:["thx","_Tuple","Tuple6_Impl_"],of:function(a,b,c,d,e,f){return{_0:a,_1:b,_2:c,_3:d,_4:e,_5:f}},_new:function(a,b,c,d,e,f){return{_0:a,_1:b,_2:c,_3:d,_4:e,_5:f}},flip:function(a){return{_0:a._5,_1:a._4,_2:a._3,_3:a._2,_4:a._1,_5:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2,_2:a._3,_3:a._4,_4:a._5}},dropRight:function(a){return{_0:a._0,_1:a._1,_2:a._2,
_3:a._3,_4:a._4}},toString:function(a){return"Tuple6("+z.string(a._0)+","+z.string(a._1)+","+z.string(a._2)+","+z.string(a._3)+","+z.string(a._4)+","+z.string(a._5)+")"},arrayToTuple6:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3],_4:a[4],_5:a[5]}}},U=function(){};U.__name__=["thx","Types"];U.isAnonymousObject=function(a){return t.isObject(a)?null==(null==a?null:F.getClass(a)):!1};U.isObject=function(a){return t.isObject(a)?!U.isPrimitive(a):!1};U.isPrimitive=function(a){a=E["typeof"](a);switch(a[1]){case 1:case 2:case 3:return!0;
case 0:case 4:case 5:case 7:case 8:return!1;case 6:return"String"==E.getClassName(a[2])?!0:"Date"==E.getClassName(a[2])?!0:!1}};U.isEnumValue=function(a){return 7==E["typeof"](a)[1]?!0:!1};U.hasSuperClass=function(a,b){for(;null!=a;){if(a==b)return!0;a=E.getSuperClass(a)}return!1};U.sameType=function(a,b){return U.toString(E["typeof"](a))==U.toString(E["typeof"](b))};U.typeInheritance=function(a){switch(a[1]){case 1:return["Int"];case 2:return["Float"];case 3:return["Bool"];case 4:return["{}"];case 5:return["Function"];
case 6:a=a[2];for(var b=[];null!=a;)b.push(a),a=E.getSuperClass(a);return b.map(E.getClassName);case 7:return[E.getEnumName(a[2])];default:throw new W("invalid type "+z.string(a));}};U.toString=function(a){switch(a[1]){case 0:return"Null";case 1:return"Int";case 2:return"Float";case 3:return"Bool";case 4:return"{}";case 5:return"Function";case 6:return E.getClassName(a[2]);case 7:return E.getEnumName(a[2]);default:throw new W("invalid type "+z.string(a));}};U.valueTypeInheritance=function(a){return U.typeInheritance(E["typeof"](a))};
U.valueTypeToString=function(a){return U.toString(E["typeof"](a))};U.anyValueToString=function(a){return F.__instanceof(a,I)?U.toString(a):F.__instanceof(a,hb)?E.getClassName(a):F.__instanceof(a,ib)?E.getEnumName(a):U.toString(E["typeof"](a))};var u={__name__:["thx","_Validation","Validation_Impl_"],get_either:function(a){return a},pure:function(a){return C.Right(a)},success:function(a){return C.Right(a)},failure:function(a){return C.Left(a)},successNel:function(a){return C.Right(a)},failureNel:function(a){return C.Left(P.pure(a))},
nn:function(a,b){return null==a?C.Left(b):C.Right(a)},nnNel:function(a,b){return null==a?C.Left(P.pure(b)):C.Right(a)},map:function(a,b){return K.map(a,b)},ap:function(a,b,c){switch(a[1]){case 0:a=a[2];switch(b[1]){case 0:return b=b[2],C.Left(nb.get_append(c)(a,b));case 1:return C.Left(a)}break;case 1:switch(c=a[2],b[1]){case 0:return C.Left(b[2]);case 1:return C.Right((0,b[2])(c))}}},flatMapV:function(a,b){switch(a[1]){case 0:return C.Left(a[2]);case 1:return b(a[2])}},orElseV:function(a,b,c){switch(a[1]){case 0:switch(b[1]){case 0:return a=
a[2],b=b[2],C.Left(nb.get_append(c)(a,b));case 1:return b}break;case 1:return a}},foldLeft:function(a,b,c){return K.foldLeft(a,b,c)},foldMap:function(a,b,c){return K.foldMap(a,b,c)},leftMap:function(a,b){return K.leftMap(a,b)},wrapNel:function(a){return K.leftMap(a,P.pure)},ensure:function(a,b,c){return K.ensure(a,b,c)},vnel:function(a){return a},val2:function(a,b,c,d){return u.ap(c,u.map(b,M.curry(a)),d)},val3:function(a,b,c,d,e){return u.ap(d,u.ap(c,u.map(b,M.curry(function(b,c){return function(d){return a(b,
c,d)}})),e),e)},val4:function(a,b,c,d,e,f){var h=function(b,c,d){return function(e){return a(b,c,d,e)}};return u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return h(a,b,c)}})),f),f),f)},val5:function(a,b,c,d,e,f,g){var h=function(b,c,d,e){return function(f){return a(b,c,d,e,f)}},k=function(a,b,c){return function(d){return h(a,b,c,d)}};return u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return k(a,b,c)}})),g),g),g),g)},val6:function(a,b,c,d,
e,f,g,k){var h=function(b,c,d,e,f){return function(h){return a(b,c,d,e,f,h)}},l=function(a,b,c,d){return function(e){return h(a,b,c,d,e)}},m=function(a,b,c){return function(d){return l(a,b,c,d)}};return u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return m(a,b,c)}})),k),k),k),k),k)},val7:function(a,b,c,d,e,f,g,k,l){var h=function(b,c,d,e,f,h){return function(g){return a(b,c,d,e,f,h,g)}},m=function(a,b,c,d,e){return function(f){return h(a,b,c,d,e,f)}},n=function(a,
b,c,d){return function(e){return m(a,b,c,d,e)}},p=function(a,b,c){return function(d){return n(a,b,c,d)}};return u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return p(a,b,c)}})),l),l),l),l),l),l)},val8:function(a,b,c,d,e,f,g,k,l,m){var h=function(b,c,d,e,f,h,g){return function(k){return a(b,c,d,e,f,h,g,k)}},n=function(a,b,c,d,e,f){return function(g){return h(a,b,c,d,e,f,g)}},p=function(a,b,c,d,e){return function(f){return n(a,b,c,d,e,f)}},q=function(a,
b,c,d){return function(e){return p(a,b,c,d,e)}},r=function(a,b,c){return function(d){return q(a,b,c,d)}};return u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return r(a,b,c)}})),m),m),m),m),m),m),m)},val9:function(a,b,c,d,e,f,g,k,l,m,n){var h=function(b,c,d,e,f,h,g,k){return function(l){return a(b,c,d,e,f,h,g,k,l)}},p=function(a,b,c,d,e,f,g){return function(k){return h(a,b,c,d,e,f,g,k)}},q=function(a,b,c,d,e,f){return function(h){return p(a,b,c,
d,e,f,h)}},r=function(a,b,c,d,e){return function(f){return q(a,b,c,d,e,f)}},t=function(a,b,c,d){return function(e){return r(a,b,c,d,e)}},v=function(a,b,c){return function(d){return t(a,b,c,d)}};return u.ap(m,u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return v(a,b,c)}})),n),n),n),n),n),n),n),n)},val10:function(a,b,c,d,e,f,g,k,l,m,n,p){var h=function(b,c,d,e,f,h,g,k,l){return function(m){return a(b,c,d,e,f,h,g,k,l,m)}},q=function(a,b,c,d,e,f,g,
k){return function(l){return h(a,b,c,d,e,f,g,k,l)}},r=function(a,b,c,d,e,f,h){return function(g){return q(a,b,c,d,e,f,h,g)}},t=function(a,b,c,d,e,f){return function(h){return r(a,b,c,d,e,f,h)}},v=function(a,b,c,d,e){return function(f){return t(a,b,c,d,e,f)}},w=function(a,b,c,d){return function(e){return v(a,b,c,d,e)}},x=function(a,b,c){return function(d){return w(a,b,c,d)}};return u.ap(n,u.ap(m,u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return x(a,
b,c)}})),p),p),p),p),p),p),p),p),p)},val11:function(a,b,c,d,e,f,g,k,l,m,n,p,q){var h=function(b,c,d,e,f,h,g,k,l,m){return function(n){return a(b,c,d,e,f,h,g,k,l,m,n)}},r=function(a,b,c,d,e,f,g,k,l){return function(m){return h(a,b,c,d,e,f,g,k,l,m)}},t=function(a,b,c,d,e,f,h,g){return function(k){return r(a,b,c,d,e,f,h,g,k)}},v=function(a,b,c,d,e,f,h){return function(g){return t(a,b,c,d,e,f,h,g)}},w=function(a,b,c,d,e,f){return function(h){return v(a,b,c,d,e,f,h)}},x=function(a,b,c,d,e){return function(f){return w(a,
b,c,d,e,f)}},y=function(a,b,c,d){return function(e){return x(a,b,c,d,e)}},z=function(a,b,c){return function(d){return y(a,b,c,d)}};return u.ap(p,u.ap(n,u.ap(m,u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return z(a,b,c)}})),q),q),q),q),q),q),q),q),q),q)},val12:function(a,b,c,d,e,f,g,k,l,m,n,p,q,r){var h=function(b,c,d,e,f,h,g,k,l,m,n){return function(p){return a(b,c,d,e,f,h,g,k,l,m,n,p)}},t=function(a,b,c,d,e,f,g,k,l,m){return function(n){return h(a,
b,c,d,e,f,g,k,l,m,n)}},v=function(a,b,c,d,e,f,h,g,k){return function(l){return t(a,b,c,d,e,f,h,g,k,l)}},w=function(a,b,c,d,e,f,h,g){return function(k){return v(a,b,c,d,e,f,h,g,k)}},x=function(a,b,c,d,e,f,h){return function(g){return w(a,b,c,d,e,f,h,g)}},y=function(a,b,c,d,e,f){return function(h){return x(a,b,c,d,e,f,h)}},z=function(a,b,c,d,e){return function(f){return y(a,b,c,d,e,f)}},A=function(a,b,c,d){return function(e){return z(a,b,c,d,e)}},B=function(a,b,c){return function(d){return A(a,b,c,
d)}};return u.ap(q,u.ap(p,u.ap(n,u.ap(m,u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return B(a,b,c)}})),r),r),r),r),r),r),r),r),r),r),r)},val13:function(a,b,c,d,e,f,g,k,l,m,n,p,q,r,t){var h=function(b,c,d,e,f,h,g,k,l,m,n,p){return function(q){return a(b,c,d,e,f,h,g,k,l,m,n,p,q)}},v=function(a,b,c,d,e,f,g,k,l,m,n){return function(p){return h(a,b,c,d,e,f,g,k,l,m,n,p)}},w=function(a,b,c,d,e,f,h,g,k,l){return function(m){return v(a,b,c,d,e,f,h,g,k,
l,m)}},x=function(a,b,c,d,e,f,h,g,k){return function(l){return w(a,b,c,d,e,f,h,g,k,l)}},y=function(a,b,c,d,e,f,h,g){return function(k){return x(a,b,c,d,e,f,h,g,k)}},z=function(a,b,c,d,e,f,h){return function(g){return y(a,b,c,d,e,f,h,g)}},A=function(a,b,c,d,e,f){return function(h){return z(a,b,c,d,e,f,h)}},B=function(a,b,c,d,e){return function(f){return A(a,b,c,d,e,f)}},C=function(a,b,c,d){return function(e){return B(a,b,c,d,e)}},D=function(a,b,c){return function(d){return C(a,b,c,d)}};return u.ap(r,
u.ap(q,u.ap(p,u.ap(n,u.ap(m,u.ap(l,u.ap(k,u.ap(g,u.ap(f,u.ap(e,u.ap(d,u.ap(c,u.map(b,M.curry(function(a,b){return function(c){return D(a,b,c)}})),t),t),t),t),t),t),t),t),t),t),t),t)}},Sa=function(a,b,c,d){aa.call(this,a,c,d);this.innerError=b};Sa.__name__=["thx","error","ErrorWrapper"];Sa.__super__=aa;Sa.prototype=J(aa.prototype,{innerError:null,__class__:Sa});var w={__name__:["thx","fp","_Map","Map_Impl_"],empty:function(){return N.Tip},singleton:function(a,b){return N.Bin(1,a,b,N.Tip,N.Tip)},bin:function(a,
b,c,d){return N.Bin(w.size(c)+w.size(d)+1,a,b,c,d)},fromNative:function(a,b){for(var c=N.Tip,d=a.keys();d.hasNext();)var e=d.next(),c=w.insert(c,e,a.get(e),b);return c},lookup:function(a,b,c){switch(a[1]){case 0:return v.None;case 1:var d=a[6],e=a[5],f=a[4];switch(c(b,a[3])[1]){case 0:return w.lookup(e,b,c);case 1:return w.lookup(d,b,c);case 2:return v.Some(f)}}},lookupTuple:function(a,b,c){switch(a[1]){case 0:return v.None;case 1:var d=a[6],e=a[5],f=a[4];a=a[3];switch(c(b,a)[1]){case 0:return w.lookupTuple(e,
b,c);case 1:return w.lookupTuple(d,b,c);case 2:return v.Some({_0:a,_1:f})}}},"delete":function(a,b,c){switch(a[1]){case 0:return N.Tip;case 1:var d=a[6],e=a[5],f=a[4];a=a[3];switch(c(b,a)[1]){case 0:return w.balance(a,f,w["delete"](e,b,c),d);case 1:return w.balance(a,f,e,w["delete"](d,b,c));case 2:return w.glue(e,d)}}},insert:function(a,b,c,d){switch(a[1]){case 0:return N.Bin(1,b,c,N.Tip,N.Tip);case 1:var e=a[6],f=a[5],g=a[4],k=a[3];a=a[2];switch(d(b,k)[1]){case 0:return w.balance(k,g,w.insert(f,
b,c,d),e);case 1:return w.balance(k,g,f,w.insert(e,b,c,d));case 2:return N.Bin(a,b,c,f,e)}}},foldLeft:function(a,b,c){switch(a[1]){case 0:return b;case 1:return w.foldLeft(a[6],w.foldLeft(a[5],c(b,a[4]),c),c)}},map:function(a,b){switch(a[1]){case 0:return N.Tip;case 1:var c=a[6],d=a[5];return N.Bin(a[2],a[3],b(a[4]),w.map(d,b),w.map(c,b))}},values:function(a){return w.foldLeft(a,[],function(a,c){a.push(c);return a})},foldLeftKeys:function(a,b,c){switch(a[1]){case 0:return b;case 1:return w.foldLeftKeys(a[6],
w.foldLeftKeys(a[5],c(b,a[3]),c),c)}},foldLeftAll:function(a,b,c){switch(a[1]){case 0:return b;case 1:return w.foldLeftAll(a[6],w.foldLeftAll(a[5],c(b,a[3],a[4]),c),c)}},foldLeftTuples:function(a,b,c){switch(a[1]){case 0:return b;case 1:return w.foldLeftTuples(a[6],w.foldLeftTuples(a[5],c(b,{_0:a[3],_1:a[4]}),c),c)}},size:function(a){switch(a[1]){case 0:return 0;case 1:return a[2]}},balance:function(a,b,c,d){var e=w.size(c),f=w.size(d),g=e+f+1;return 1>=e+f?N.Bin(g,a,b,c,d):f>=5*e?w.rotateLeft(a,
b,c,d):e>=5*f?w.rotateRight(a,b,c,d):N.Bin(g,a,b,c,d)},glue:function(a,b){if(0==a[1])return b;if(0==b[1])return a;if(w.size(a)>w.size(b)){var c=w.deleteFindMax(a);return w.balance(c.k,c.x,c.t,b)}c=w.deleteFindMin(b);return w.balance(c.k,c.x,a,c.t)},deleteFindMin:function(a){switch(a[1]){case 0:throw new aa("can not return the minimal element of an empty map",null,{fileName:"Map.hx",lineNumber:161,className:"thx.fp._Map.Map_Impl_",methodName:"deleteFindMin"});case 1:if(0==a[5][1])return{k:a[3],x:a[4],
t:a[6]};var b=a[6],c=a[3],d=a[4];a=w.deleteFindMin(a[5]);return{k:a.k,x:a.x,t:w.balance(c,d,a.t,b)}}},deleteFindMax:function(a){switch(a[1]){case 0:throw new aa("can not return the maximal element of an empty map",null,{fileName:"Map.hx",lineNumber:171,className:"thx.fp._Map.Map_Impl_",methodName:"deleteFindMax"});case 1:if(0==a[6][1])return{k:a[3],x:a[4],t:a[5]};var b=a[3],c=a[4],d=a[5];a=w.deleteFindMax(a[6]);return{k:a.k,x:a.x,t:w.balance(b,c,d,a.t)}}},rotateLeft:function(a,b,c,d){if(1==d[1]){var e=
d[6];return w.size(d[5])<2*w.size(e)?w.singleLeft(a,b,c,d):w.doubleLeft(a,b,c,d)}return w.doubleLeft(a,b,c,d)},rotateRight:function(a,b,c,d){if(1==c[1]){var e=c[5];return w.size(c[6])<2*w.size(e)?w.singleRight(a,b,c,d):w.doubleRight(a,b,c,d)}return w.doubleRight(a,b,c,d)},singleLeft:function(a,b,c,d){if(1==d[1]){var e=d[6],f=d[5],g=d[4];d=d[3];a=N.Bin(w.size(c)+w.size(f)+1,a,b,c,f);return N.Bin(w.size(a)+w.size(e)+1,d,g,a,e)}throw new aa("damn it, this should never happen",null,{fileName:"Map.hx",
lineNumber:193,className:"thx.fp._Map.Map_Impl_",methodName:"singleLeft"});},singleRight:function(a,b,c,d){if(1==c[1]){var e=c[6],f=c[5],g=c[4];c=c[3];a=N.Bin(w.size(e)+w.size(d)+1,a,b,e,d);return N.Bin(w.size(f)+w.size(a)+1,c,g,f,a)}throw new aa("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:199,className:"thx.fp._Map.Map_Impl_",methodName:"singleRight"});},doubleLeft:function(a,b,c,d){if(1==d[1]&&1==d[5][1]){var e=d[6],f=d[3],g=d[4],k=d[5][6],l=d[5][5],m=d[5][4];d=d[5][3];
a=N.Bin(w.size(c)+w.size(l)+1,a,b,c,l);e=N.Bin(w.size(k)+w.size(e)+1,f,g,k,e);return N.Bin(w.size(a)+w.size(e)+1,d,m,a,e)}throw new aa("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:206,className:"thx.fp._Map.Map_Impl_",methodName:"doubleLeft"});},doubleRight:function(a,b,c,d){if(1==c[1]&&1==c[6][1]){var e=c[3],f=c[4],g=c[5],k=c[6][6],l=c[6][5],m=c[6][4];c=c[6][3];e=N.Bin(w.size(g)+w.size(l)+1,e,f,g,l);a=N.Bin(w.size(k)+w.size(d)+1,a,b,k,d);return N.Bin(w.size(e)+w.size(a)+
1,c,m,e,a)}throw new aa("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:213,className:"thx.fp._Map.Map_Impl_",methodName:"doubleRight"});}},N={__ename__:["thx","fp","MapImpl"],__constructs__:["Tip","Bin"],Tip:["Tip",0]};N.Tip.__enum__=N;N.Bin=function(a,b,c,d,e){a=["Bin",1,a,b,c,d,e];a.__enum__=N;return a};var R=function(){};R.__name__=["view","DiceWorker"];R.cancel=function(){};R.onMessage=r.onmessage=function(a){null!=a.data.expression?R.evaluate(a.data.expression):null!=
a.data.init&&R.init(a.data.init)};R.init=function(a){for(var b=new qa,c=0,d=t.fields(a);c<d.length;){var e=d[c];++c;try{var f=Ka.create(e),g=t.field(a,e);f.results=ya.fromObject(g);null!=fa[e]?b.setReserved(e,f):b.h[e]=f}catch(sb){Q.lastException=sb}}R.cache=b};R.evaluate=function(a){R.cancel();var b=R.cache,b=null!=fa[a]?b.getReserved(a):b.h[a];if(null==b){b=Ka.create(a);a=b.exprString;var c=R.cache;null!=fa[a]?c.setReserved(a,b):c.h[a]=b}b.results.count>=R.MAXRUNS?R.send(b):R.run(b)};R.run=function(a){for(var b=
performance.now()+R.RUNTIME;;){a.results.add(ma.getResult(a.roller.roll(a.expr)));if(a.results.count==R.MAXRUNS)break;if(performance.now()>=b)break}R.send(a);a.results.count<R.MAXRUNS&&(R.cancel=ca.delay(function(){R.run(a)},R.RUNDELAY))};R.send=function(a){postMessage({expression:a.exprString,results:a.results.toObject()})};var Ka=function(a,b){this.exprString=a;this.expr=b;this.roller=new ta(function(a){return 1+Math.floor(Math.random()*a)});this.results=new ya};Ka.__name__=["view","DiceWorkerData"];
Ka.create=function(a){return new Ka(a,k.unsafeParse(a))};Ka.prototype={results:null,exprString:null,expr:null,roller:null,roll:function(){this.results.add(ma.getResult(this.roller.roll(this.expr)))},__class__:Ka};var qb=0;String.prototype.__class__=String;String.__name__=["String"];Array.__name__=["Array"];Date.prototype.__class__=Date;Date.__name__=["Date"];var ub={__name__:["Int"]},tb={__name__:["Dynamic"]},gb=Number;gb.__name__=["Float"];var fb=Boolean;fb.__ename__=["Bool"];var hb={__name__:["Class"]},
ib={},fa={},Y="undefined"!==typeof window&&window||"undefined"!==typeof global&&global||Function("return this")();Y.setImmediate||(Y.setImmediate=function(a){Y.setTimeout(a,0)});for(var ob=0,cb=["webkit","moz"],Ta=0;Ta<cb.length&&!Y.requestAnimationFrame;)Y.requestAnimationFrame=Y[cb[Ta]+"RequestAnimationFrame"],Y.cancelAnimationFrame=Y[cb[Ta]+"CancelAnimationFrame"]||Y[cb[Ta]+"CancelRequestAnimationFrame"],++Ta;Y.requestAnimationFrame||(Y.requestAnimationFrame=function(a){var b=(new Date).getTime(),
c=Math.max(0,16-(b-ob)),d=Y.setTimeout(function(){a(b+c)},c);ob=b+c;return d});Y.cancelAnimationFrame||(Y.cancelAnimationFrame=function(a){Y.clearTimeout(a)});"undefined"==typeof Y.performance&&(Y.performance={});if("undefined"==typeof Y.performance.now){var pb=(new Date).getTime();Y.performance.timing&&Y.performance.timing.navigationStart&&(pb=Y.performance.timing.navigationStart);Y.performance.now=function(){return new Date-pb}}pa.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];F.__toStr={}.toString;
k.PLUS=f.string("+");k.MINUS=f.string("-");k.positive=f.map(f.regexp(new O("[+]?([1-9][0-9]*)",""),1),z.parseInt);k.negative=f.map(f.regexp(new O("[-]([0-9]*[1-9])","")),z.parseInt);k.whole=f.or(k.positive,k.negative);k.D=f.or(f.string("d"),f.string("D"));k.OPEN_SET_BRACKET=f.string("(");k.CLOSE_SET_BRACKET=f.string(")");k.COMMA=f.string(",");k.PERCENT=f.string("%");k.WS=f.regexp(new O("[\\s_]+","m"));k.OWS=f.or(k.WS,f.string(""));k.MULTIPLICATION=f.as(f.regexp(new O("[*\u22c5\u00d7x]","")),"\u00d7");
k.DIVISION=f.or(f.or(f.string("/"),f.string("\u00f7")),f.string(":"));k.lowOrHigh=f.or(f.result(f.or(f.string("lowest"),f.string("low")),sa.Low),f.result(f.or(f.string("highest"),f.string("high")),sa.High));k.moreLess=f.or(f.result(f.string("more"),Ea.More),f.result(f.string("less"),Ea.Less));k.orMoreLess=f.then(f.then(f.then(k.OWS,f.string("or")),k.OWS),f.as(k.moreLess,"or (more|less)"));k.on=f.then(f.then(f.string("on"),k.WS),k.positive);k.range=f.alt([f.flatMap(k.on,function(a){return f.then(k.OWS,
f.map(k.positive,function(b){return ra.Between(a,b)}))}),f.flatMap(k.on,function(a){return f.then(k.OWS,f.map(k.orMoreLess,function(b){switch(b[1]){case 0:return ra.ValueOrMore(a);case 1:return ra.ValueOrLess(a)}}))}),f.map(k.on,ra.Exact)]);k.diceFunctor=f.lazy(function(){var a=f.then(f.string("e"),k.OWS),a=f.then(a,f.map(k.positive,function(a){return Na.Explode(xa.Always,ra.ValueOrMore(a))})),b=f.then(f.string("r"),k.OWS);return f.alt([a,f.then(b,f.map(k.positive,function(a){return Na.Reroll(xa.Always,
ra.ValueOrLess(a))})),k.diceFunctorConst("explode",Na.Explode),k.diceFunctorConst("reroll",Na.Reroll)])});k.SUM=f.string("sum");k.AVERAGE=f.or(f.string("average"),f.string("avg"));k.MEDIAN=f.or(f.string("median"),f.string("mdn"));k.MIN=f.or(f.or(f.string("minimum"),f.string("min")),f.string("take least"));k.MAX=f.or(f.or(f.string("maximum"),f.string("max")),f.string("take best"));k.times=f.alt([f.result(f.string("once"),1),f.result(f.string("twice"),2),f.result(f.string("thrice"),3),f.skip(k.positive,
f.then(k.OWS,f.string("times")))]);k.functorTimes=f.alt([f.map(k.times,xa.UpTo),f.then(k.OWS,f.result(f.string("always"),xa.Always)),f.result(f.string(""),xa.Always)]);k.DEFAULT_DIE_SIDES=6;k.die=f.as(f.alt([f.result(f.then(k.D,k.PERCENT),100),f.then(k.D,k.positive),f.result(k.D,k.DEFAULT_DIE_SIDES)]),"one die");k.negate=f.as(f.lazy(function(){return f.then(k.MINUS,f.map(k.termExpression,function(a){return ia.UnaryOp(Xa.Negate,a)}))}),"negate");k.unary=f.alt([k.negate]);k.binOpSymbol=f.alt([f.result(k.PLUS,
ea.Sum),f.result(k.MINUS,ea.Difference),f.result(k.MULTIPLICATION,ea.Multiplication),f.result(k.DIVISION,ea.Division)]);k.opRight=f.then(k.OWS,f.flatMap(k.binOpSymbol,function(a){return f.then(k.OWS,f.map(k.termExpression,function(b){return{op:a,right:b}}))}));k.binop=f.lazy(function(){return f.flatMap(k.termExpression,function(a){return f.map(f.times(k.opRight,1,1E3),function(b){return g.reduce(b,function(a,b){switch(b.op[1]){case 0:case 1:return ia.BinaryOp(b.op,a,b.right);case 2:case 3:return 3==
a[1]?ia.BinaryOp(a[2],a[3],ia.BinaryOp(b.op,a[4],b.right)):ia.BinaryOp(b.op,a,b.right)}},a)})})});k.dieExpression=f.or(f.then(f.string("1"),f.map(k.die,ia.Die)),f.as(f.map(k.die,ia.Die),"die"));k.literalExpression=f.as(f.map(k.whole,ia.Literal),"literal");k.diceExpressions=f.lazy(function(){return f.alt([f.flatMap(k.positive,function(a){return f.map(k.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(ia.Die(b));return Da.DiceExpressions(c)})}),f.map(k.commaSeparated(k.expression),Da.DiceExpressions)])});
k.diceFilterable=f.lazy(function(){return f.flatMap(f.alt([f.flatMap(k.positive,function(a){return f.map(k.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(b);return Qa.DiceArray(c)})}),f.map(k.commaSeparated(k.die),function(a){return Qa.DiceArray(a)}),f.map(k.commaSeparated(k.expression),Qa.DiceExpressions)]),function(a){var b=k.OWS,c=f.then(f.string("d"),k.OWS),c=f.then(c,f.map(k.positive,function(a){return Ma.Drop(sa.Low,a)})),d=k.dirValue(f.string("drop"),sa.Low),d=f.map(d,function(a){return Ma.Drop(a.dir,
a.value)}),e=f.then(f.string("k"),k.OWS),e=f.then(e,f.map(k.positive,function(a){return Ma.Keep(sa.High,a)})),g=k.dirValue(f.string("keep"),sa.High);return f.then(b,f.map(f.alt([c,d,e,f.map(g,function(a){return Ma.Keep(a.dir,a.value)})]),function(b){return Da.DiceListWithFilter(a,b)}))})});k.diceMapeable=f.lazy(function(){var a=f.flatMap(k.positive,function(a){return f.map(k.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(b);return c})}),b=k.commaSeparated(k.die),c=f.string("1"),c=f.then(c,f.map(k.die,
function(a){return[a]}));return f.flatMap(f.alt([a,b,c,f.map(k.die,function(a){return[a]})]),function(a){return f.then(k.OWS,f.map(k.diceFunctor,function(b){return Da.DiceListWithMap(a,b)}))})});k.termExpression=f.lazy(function(){return f.alt([k.diceReduce(k.diceMapeable),k.diceReduce(k.diceFilterable),k.diceReduce(k.diceExpressions),k.dieExpression,k.literalExpression,k.unary])});k.expression=f.as(f.lazy(function(){return f.alt([k.binop,k.termExpression])}),"expression");k.grammar=f.then(k.OWS,f.skip(f.skip(k.expression,
k.OWS),f.eof()));jb._mul=null!=Math.imul?Math.imul:function(a,b){return a*(b&65535)+(a*(b>>>16)<<16|0)|0};db.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Ja.count=0;n.order=Fa.fromIntComparison(n.compare);B.TOLERANCE=1E-4;B.EPSILON=1E-9;B.pattern_parse=new O("^(\\+|-)?\\d+(\\.\\d+)?(e-?\\d+)?$","");B.order=Fa.fromIntComparison(B.compare);B.monoid={zero:0,append:function(a,b){return a+b}};D.pattern_parse=new O("^[ \t\r\n]*[+-]?(\\d+|0x[0-9A-F]+)","i");D.BASE="0123456789abcdefghijklmnopqrstuvwxyz";
D.order=function(a,b){return a>b?ba.GT:a==b?ba.EQ:ba.LT};D.monoid={zero:0,append:function(a,b){return a+b}};m.order=Fa.fromIntComparison(m.compare);m.HASCODE_MAX=2147483647;m.HASCODE_MUL=31;m.monoid={zero:"",append:function(a,b){return a+b}};m.UCWORDS=new O("[^a-zA-Z]([a-z])","g");m.IS_BREAKINGWHITESPACE=new O("[^\t\n\r ]","");m.IS_ALPHA=new O("[^a-zA-Z]","");m.UCWORDSWS=new O("[ \t\r\n][a-z]","g");m.ALPHANUM=new O("^[a-z0-9]+$","i");m.DIGITS=new O("^[0-9]+$","");m.STRIPTAGS=new O("</?[a-z]+[^>]*>",
"gi");m.WSG=new O("[ \t\r\n]+","g");m.SPLIT_LINES=new O("\r\n|\n\r|\n|\r","g");m.CANONICALIZE_LINES=new O("\r\n|\n\r|\r","g");ca.FRAME_RATE=Math.round(16.666666666666668);w.delta=5;w.ratio=2;R.RUNTIME=100;R.RUNDELAY=100;R.MAXRUNS=1E7;R.cache=new qa})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
