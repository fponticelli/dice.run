var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(q,Z,D){if(D.get||D.set)throw new TypeError("ES3 does not support getters and setters.");q!=Array.prototype&&q!=Object.prototype&&(q[Z]=D.value)};$jscomp.getGlobal=function(q){return"undefined"!=typeof window&&window===q?q:"undefined"!=typeof global&&null!=global?global:q};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var q=$jscomp.global.Symbol.iterator;q||(q=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[q]&&$jscomp.defineProperty(Array.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(q){var Z=0;return $jscomp.iteratorPrototype(function(){return Z<q.length?{done:!1,value:q[Z++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(q){$jscomp.initSymbolIterator();q={next:q};q[$jscomp.global.Symbol.iterator]=function(){return this};return q};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(q,Z){$jscomp.initSymbolIterator();q instanceof String&&(q+="");var D=0,n={next:function(){if(D<q.length){var M=D++;return{value:Z(M,q[M]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};
$jscomp.polyfill=function(q,Z,D,n){if(Z){D=$jscomp.global;q=q.split(".");for(n=0;n<q.length-1;n++){var M=q[n];M in D||(D[M]={});D=D[M]}q=q[q.length-1];n=D[q];Z=Z(n);Z!=n&&null!=Z&&$jscomp.defineProperty(D,q,{configurable:!0,writable:!0,value:Z})}};$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(q){return q})}},"es6-impl","es3");
$jscomp.findInternal=function(q,Z,D){q instanceof String&&(q=String(q));for(var n=q.length,M=0;M<n;M++){var qa=q[M];if(Z.call(D,qa,M,q))return{i:M,v:qa}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(q,D){return $jscomp.findInternal(this,q,D).v}},"es6-impl","es3");
$jscomp.checkStringArgs=function(q,Z,D){if(null==q)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(Z instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return q+""};
$jscomp.polyfill("String.prototype.startsWith",function(q){return q?q:function(q,D){var n=$jscomp.checkStringArgs(this,q,"startsWith");q+="";for(var M=n.length,qa=q.length,ib=Math.max(0,Math.min(D|0,n.length)),Z=0;Z<qa&&ib<M;)if(n[ib++]!=q[Z++])return!1;return Z>=qa}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(q){return q?q:function(q,D){var n=$jscomp.checkStringArgs(this,q,"endsWith");q+="";void 0===D&&(D=n.length);for(var M=Math.max(0,Math.min(D|0,n.length)),qa=q.length;0<qa&&0<M;)if(n[--M]!=q[--qa])return!1;return 0>=qa}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(q){return q?q:function(q){var D=$jscomp.checkStringArgs(this,null,"repeat");if(0>q||1342177279<q)throw new RangeError("Invalid count value");q|=0;for(var n="";q;)if(q&1&&(n+=D),q>>>=1)D+=D;return n}},"es6-impl","es3");$jscomp.makeIterator=function(q){$jscomp.initSymbolIterator();var Z=q[Symbol.iterator];return Z?Z.call(q):$jscomp.arrayIterator(q)};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(q){function Z(){this.batch_=null}if(q&&!$jscomp.FORCE_POLYFILL_PROMISE)return q;Z.prototype.asyncExecute=function(n){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(n);return this};Z.prototype.asyncExecuteBatch_=function(){var n=this;this.asyncExecuteFunction(function(){n.executeBatch_()})};var D=$jscomp.global.setTimeout;Z.prototype.asyncExecuteFunction=function(n){D(n,0)};Z.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var n=
this.batch_;this.batch_=[];for(var q=0;q<n.length;++q){var D=n[q];delete n[q];try{D()}catch(Ia){this.asyncThrow_(Ia)}}}this.batch_=null};Z.prototype.asyncThrow_=function(n){this.asyncExecuteFunction(function(){throw n;})};var n=function(n){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var q=this.createResolveAndReject_();try{n(q.resolve,q.reject)}catch(sb){q.reject(sb)}};n.prototype.createResolveAndReject_=function(){function n(n){return function(qa){D||(D=!0,n.call(q,qa))}}var q=
this,D=!1;return{resolve:n(this.resolveTo_),reject:n(this.reject_)}};n.prototype.resolveTo_=function(q){if(q===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(q instanceof n)this.settleSameAsPromise_(q);else{var D;a:switch(typeof q){case "object":D=null!=q;break a;case "function":D=!0;break a;default:D=!1}D?this.resolveToNonPromiseObj_(q):this.fulfill_(q)}};n.prototype.resolveToNonPromiseObj_=function(n){var q=void 0;try{q=n.then}catch(sb){this.reject_(sb);return}"function"==
typeof q?this.settleSameAsThenable_(q,n):this.fulfill_(n)};n.prototype.reject_=function(n){this.settle_(2,n)};n.prototype.fulfill_=function(n){this.settle_(1,n)};n.prototype.settle_=function(n,q){if(0!=this.state_)throw Error("Cannot settle("+n+", "+q|"): Promise already settled in state"+this.state_);this.state_=n;this.result_=q;this.executeOnSettledCallbacks_()};n.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var n=this.onSettledCallbacks_,q=0;q<n.length;++q)n[q].call(),
n[q]=null;this.onSettledCallbacks_=null}};var M=new Z;n.prototype.settleSameAsPromise_=function(n){var q=this.createResolveAndReject_();n.callWhenSettled_(q.resolve,q.reject)};n.prototype.settleSameAsThenable_=function(n,q){var D=this.createResolveAndReject_();try{n.call(q,D.resolve,D.reject)}catch(Ia){D.reject(Ia)}};n.prototype.then=function(q,D){function M(n,q){return"function"==typeof n?function(q){try{Z(n(q))}catch(yc){qa(yc)}}:q}var Z,qa,ib=new n(function(n,q){Z=n;qa=q});this.callWhenSettled_(M(q,
Z),M(D,qa));return ib};n.prototype["catch"]=function(n){return this.then(void 0,n)};n.prototype.callWhenSettled_=function(n,q){function D(){switch(Z.state_){case 1:n(Z.result_);break;case 2:q(Z.result_);break;default:throw Error("Unexpected state: "+Z.state_);}}var Z=this;null==this.onSettledCallbacks_?M.asyncExecute(D):this.onSettledCallbacks_.push(function(){M.asyncExecute(D)})};n.resolve=function(q){return q instanceof n?q:new n(function(n,D){n(q)})};n.reject=function(q){return new n(function(n,
D){D(q)})};n.race=function(q){return new n(function(D,M){for(var Z=$jscomp.makeIterator(q),qa=Z.next();!qa.done;qa=Z.next())n.resolve(qa.value).callWhenSettled_(D,M)})};n.all=function(q){var D=$jscomp.makeIterator(q),M=D.next();return M.done?n.resolve([]):new n(function(q,Z){function qa(n){return function(D){Y[n]=D;L--;0==L&&q(Y)}}var Y=[],L=0;do Y.push(void 0),L++,n.resolve(M.value).callWhenSettled_(qa(Y.length-1),Z),M=D.next();while(!M.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(n.$jscomp$new$AsyncExecutor=
function(){return new Z});return n},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(q,D){return D})}},"es6","es3");
(function(q,Z){function D(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function n(a){return a instanceof Array?function(){return L.iter(a)}:"function"==typeof a.iterator?M(a,a.iterator):a.iterator}function M(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=gd++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},
c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var qa={__ename__:["Action"],__constructs__:["EvaluateExpression","UpdateSeed"],EvaluateExpression:function(a){a=["EvaluateExpression",0,a];a.__enum__=qa;return a},UpdateSeed:function(a){a=["UpdateSeed",1,a];a.__enum__=qa;return a}},ib=function(){};ib.__name__=["DateTools"];ib.getMonthDays=function(a){var b=a.getMonth();a=a.getFullYear();return 1!=b?ib.DAYS_OF_MONTH[b]:0==a%4&&0!=a%100||0==a%400?29:28};var sb=function(){};sb.__name__=["doom",
"core","IRender"];sb.prototype={apply:null,__class__:sb};var Ia=function(a,b){this.doc=null==a?window.document:a;if(null==b){this.namespaces=new x;for(var c=Ia.defaultNamespaces.keys();c.hasNext();){var d=c.next(),e=this.namespaces,f=Ia.defaultNamespaces,f=null!=k[d]?f.getReserved(d):f.h[d];null!=k[d]?e.setReserved(d,f):e.h[d]=f}}else this.namespaces=b;this.domComponentMap=new xc};Ia.__name__=["doom","html","Render"];Ia.__interfaces__=[sb];Ia.setEvent=function(a,b,c){a["on"+b]=function(b){c(a,b)}};
Ia.removeEvent=function(a,b){G.deleteField(a,"on"+b)};Ia.hasEvent=function(a,b){return Object.prototype.hasOwnProperty.call(a,"on"+b)};Ia.prototype={doc:null,namespaces:null,domComponentMap:null,mount:function(a,b){b.innerHTML="";var c=[],d=this.generateDom(a,c);b.appendChild(d);for(var e=0;e<c.length;){var f=c[e];++e;f()}return d},stream:function(a,b){var c=this,d=null;a.next(function(a){null==d?d=c.mount(a,b):c.apply(a,d)}).failure(function(a){throw a;}).run()},apply:function(a,b){var c=[];this.applyToNode(a,
b,b.parentElement,c,!1);for(var d=0;d<c.length;){var e=c[d];++d;e()}},generate:function(a){var b=[];a=this.generateDom(a,b);for(var c=0;c<b.length;){var d=b[c];++c;d()}return a},applyToNode:function(a,b,c,d,e){if(null==a&&null==b)return null;if(null==a)return e&&this.unmountDomComponent(b),c.removeChild(b),null;if(null==b)return b=this.generateDom(a,d),c.appendChild(b),b;switch(a[1]){case 0:var f=a[4],h=a[3];a=a[2];e&&this.unmountDomComponent(b);return this.applyElementToNode(a,h,f,b,c,d);case 1:return f=
a[2],e&&this.unmountDomComponent(b),this.applyCommentToNode(f,b,c,d);case 2:return d=a[2],e&&this.unmountDomComponent(b),e=Wa.parse(d),this.applyNodeToNode(e,b,c,!0);case 3:return f=a[2],e&&this.unmountDomComponent(b),this.applyTextToNode(f,b,c,d);case 4:return this.applyComponentToNode(a[2],b,c,d);case 5:return this.applyToNode((0,a[2])(),b,c,d,e)}},applyNodeToNode:function(a,b,c,d){var e=this;if(null==a&&null==b)return null;if(null==a)return c.removeChild(b),null;if(null==b)return c.appendChild(a),
a;d&&this.unmountDomComponent(b);if(a.nodeType==b.nodeType)if(1==a.nodeType){if(a.tagName==b.tagName)return this.applyElementAttributes(a,b),l.each(this.zipNodeListAndNodeList(a.childNodes,b.childNodes),function(a){e.applyNodeToNode(a._0,a._1,b,!0)}),b}else if(8==a.nodeType||3==a.nodeType)return b.textContent=a.textContent,b;return this.replaceChild(c,b,a)},migrate:function(a,b){for(var c=b.migrationFields(),d=0;d<c.length;){var e=c[d];++d;var f=[G.field(a,e)];if(G.isFunction(f[0])){var h=G.field(b,
e);f[0]=h;a[e]=function(a){return function(){a[0].apply(b,arguments)}}(f)}else b[e]=f[0]}},applyComponentToNode:function(a,b,c,d){var e=this.domComponentMap.getComponents(b);if(null!=e){var f=l.find(e,function(b){return wa.sameType(b,a)});if(null==f){for(f=0;f<e.length;){var h=e[f];++f;h.willUnmount();this.domComponentMap.removeByComponent(h);a.willMount();var t=this.renderComponent(a);a.apply=M(this,this.apply);t=this.applyToNode(t,b,c,d,!1);a.node=t;d.splice(0,0,function(){a.didMount()});this.domComponentMap.set(a,
t);h.isUnmounted=!0;h.node=null;h.didUnmount()}return b}this.migrate(a,f);f.willUpdate();d.push(M(f,f.didUpdate));return f.shouldRender()?(this.domComponentMap.removeByComponent(f),e=this.renderComponent(f),d=this.applyToNode(e,b,c,d,!1),f.node=d,this.domComponentMap.set(f,d),d):b}a.willMount();e=this.renderComponent(a);a.apply=M(this,this.apply);b=this.applyToNode(e,b,c,d,!1);a.node=b;d.splice(0,0,function(){a.didMount()});this.domComponentMap.set(a,b);return b},unmountDomComponent:function(a){for(var b=
0,c=a.childNodes.length;b<c;){var d=b++;this.unmountDomComponent(a.childNodes[d])}a=this.domComponentMap.getComponents(a);if(null!=a)for(b=0;b<a.length;)c=a[b],++b,this.unmountComponent(c)},renderComponent:function(a){return a.render()},unmountComponent:function(a){this.domComponentMap.removeByComponent(a);a.willUnmount();a.isUnmounted=!0;a.node=null;a.didUnmount()},applyElementToNode:function(a,b,c,d,e,f){var h=this;if(1==d.nodeType&&d.tagName==a.toUpperCase())return this.applyNodeAttributes(b,d),
l.each(this.zipVNodesAndNodeList(c,d.childNodes),function(a){h.applyToNode(a._0,a._1,d,f,!0)}),d;a=this.createElement(a,b,c,f);return this.replaceChild(e,d,a)},applyCommentToNode:function(a,b,c,d){if(8==b.nodeType)return b.textContent=a,b;a=this.doc.createComment(a);return this.replaceChild(c,b,a)},applyTextToNode:function(a,b,c,d){if(3==b.nodeType)return b.textContent=a,b;a=this.doc.createTextNode(a);return this.replaceChild(c,b,a)},replaceChild:function(a,b,c){if(b==c)return c;a.replaceChild(c,
b);return c},zipVNodesAndNodeList:function(a,b){for(var c=a.length,d=b.length,e=[],f=0,c=c>d?c:d;f<c;)d=f++,e.push({_0:a[d],_1:b[d]});return e},zipNodeListAndNodeList:function(a,b){for(var c=a.length,d=b.length,e=[],f=0,c=c>d?c:d;f<c;)d=f++,e.push({_0:a[d],_1:b[d]});return e},applyElementAttributes:function(a,b){for(var c=[],d=0,e=b.attributes.length;d<e;){var f=d++;c.push(b.attributes.item(f).name)}d=ha.createString(c);c=[];e=0;for(f=a.attributes.length;e<f;){var h=e++;c.push(a.attributes.item(h).name)}c=
ha.createString(c);d=ha.copy(d);for(e=n(ha)(c);e.hasNext();)f=e.next(),d.remove(f);for(d=n(ha)(d);d.hasNext();)e=d.next(),b.removeAttribute(e);for(c=n(ha)(c);c.hasNext();)d=c.next(),e=Ea.getAttribute(a,d),f=Ea.getAttribute(b,d),e!=f&&Ea.setDynamicAttribute(b,d,e)},applyNodeAttributes:function(a,b){for(var c=[],d=0,e=b.attributes.length;d<e;){var f=d++;c.push(b.attributes.item(f).name)}d=ha.createString(c);c=[];for(e=a.keys();e.hasNext();)f=e.next(),c.push(f);c=ha.createString(c);d=ha.copy(d);for(e=
n(ha)(c);e.hasNext();)f=e.next(),d.remove(f);for(d=n(ha)(d);d.hasNext();)e=d.next(),Ia.hasEvent(b,e)?Ia.removeEvent(b,e):b.removeAttribute(e);for(c=n(ha)(c);c.hasNext();)if(d=c.next(),e=null!=k[d]?a.getReserved(d):a.h[d],null==e)Ea.removeAttribute(b,d);else switch(e[1]){case 0:Ea.toggleBoolAttribute(b,d,e[2]);break;case 1:null==e[2]&&"value"==d?Ea.setStringAttribute(b,d,""):(f=e[2],null==f||""==f&&"value"!=d?Ea.removeAttribute(b,d):Ea.setStringAttribute(b,d,e[2]));break;case 2:Ia.setEvent(b,d,function(a){return function(b,
c){a[0](b,c)}}([e[2]]))}},generateDom:function(a,b){switch(a[1]){case 0:var c=a[5],d=this.createElement(a[2],a[3],a[4],b);if(null!=c){var e=this;b.push(function(){c(e,d)})}return d;case 1:var f=a[3],h=this.doc.createComment(a[2]);if(null!=f){var t=this;b.push(function(){f(t,h)})}return h;case 2:var g=a[3],k=Wa.parse(a[2]);if(null!=g){var l=this;b.push(function(){g(l,k)})}return k;case 3:var n=a[3],m=this.doc.createTextNode(a[2]);if(null!=n){var q=this;b.push(function(){n(q,m)})}return m;case 4:var r=
a[2];r.willMount();var p=this.renderComponent(r),p=this.generateDom(p,b);r.node=p;r.apply=M(this,this.apply);b.splice(0,0,function(){r.didMount()});this.domComponentMap.set(r,p);return p;case 5:return this.generateDom((0,a[2])(),b)}},createElement:function(a,b,c,d){var e=a.indexOf(":"),f;if(0<e){f=a.substring(0,e);a=a.substring(e+1);e=this.namespaces;e=null!=k[f]?e.getReserved(f):e.h[f];if(null==e)throw new ba('element prefix "'+f+'" is not associated to any namespace. Add the right namespace to Doom.namespaces.',
null,{fileName:"Render.hx",lineNumber:407,className:"doom.html.Render",methodName:"createElement"});f=this.doc.createElementNS(e,a)}else f=this.doc.createElement(a);this.applyNodeAttributes(b,f);for(b=L.iter(c);b.hasNext();)c=b.next(),null!=c&&(c=this.generateDom(c,d),f.appendChild(c));return f},__class__:Ia};var xc=function(){this.componentToDom=new nb;this.domToComponent=new nb};xc.__name__=["doom","html","_Render","DomComponentMap"];xc.prototype={domToComponent:null,componentToDom:null,getComponents:function(a){return null==
a?null:this.domToComponent.h[a.__id__]},getDom:function(a){return null==a?null:this.componentToDom.h[a.__id__]},set:function(a,b){this.componentToDom.set(a,b);var c=this.domToComponent.h[b.__id__];null==c?(c=[a],this.domToComponent.set(b,c)):c.push(a)},removeByComponent:function(a){var b=this.componentToDom.h[a.__id__];this.componentToDom.remove(a);var c=this.getComponents(b);null!=c&&(L.remove(c,a),0==c.length&&this.domToComponent.remove(b))},removeByDom:function(a){var b=this.getComponents(a);this.domToComponent.remove(a);
if(null!=b)for(a=0;a<b.length;){var c=b[a];++a;this.componentToDom.remove(c)}},__class__:xc};var Tc=function(){};Tc.__name__=["Doom"];var Y=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};Y.__name__=["EReg"];Y.prototype={r:null,match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new ca("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new ca("No string matched");
return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;var d=this.r;b=0>c?a:L.substr(a,0,b+c);this.r.m=d.exec(b);if(b=null!=this.r.m)this.r.s=a;return b}if(d=this.match(0>c?L.substr(a,b,null):L.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return d},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},map:function(a,b){for(var c=0,d="";!(c>=a.length);){if(!this.matchSub(a,c)){d+=H.string(L.substr(a,c,
null));break}var e=this.matchedPos(),d=d+H.string(L.substr(a,c,e.pos-c)),d=d+H.string(b(this));0==e.len?(d+=H.string(L.substr(a,e.pos,1)),c=e.pos+1):c=e.pos+e.len;if(!this.r.global)break}!this.r.global&&0<c&&c<a.length&&(d+=H.string(L.substr(a,c,null)));return d},__class__:Y};var L=function(){};L.__name__=["HxOverrides"];L.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>
d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)};L.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new ca("Invalid date format : "+a);}};L.cca=function(a,b){var c=a.charCodeAt(b);if(c==c)return c};
L.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};L.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};L.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Wb=function(){};Wb.__name__=["Lambda"];Wb.has=function(a,b){for(var c=n(a)();c.hasNext();)if(c.next()==b)return!0;return!1};var yc=function(){};yc.__name__=["thx",
"StaticResource"];var ra=function(){};ra.__name__=["Loc"];ra.__interfaces__=[yc];var ab=function(a,b){this.isUnmounted=!1;this.props=a;this.children=b};ab.__name__=["doom","core","Component"];ab.prototype={props:null,children:null,node:null,isUnmounted:null,apply:null,render:function(){throw new Zb({fileName:"Component.hx",lineNumber:19,className:"doom.core.Component",methodName:"render"});},asNode:function(){return J.Comp(this)},update:function(a,b){var c=this.props;this.props=a;if(this.shouldUpdate(c,
a)&&this.shouldRender())try{this.apply(J.Comp(this),this.node)}catch(d){fa.lastException=d,d instanceof ca&&(d=d.val),this.rethrowUpdateError(d,b)}},rethrowUpdateError:function(a,b){var c=H.string(a);$b.trace(c,{fileName:"Component.hx",lineNumber:40,className:"doom.core.Component",methodName:"rethrowUpdateError"});if(0<=c.indexOf("apply is not a function"))throw new ba("method `apply` has not been correctly migrated to "+aa.getClassName(R.getClass(this)),null,{fileName:"Component.hx",lineNumber:42,
className:"doom.core.Component",methodName:"rethrowUpdateError"});throw ba.fromDynamic(a,b);},shouldUpdate:function(a,b){return!0},shouldRender:function(){return!this.isUnmounted},migrationFields:function(){return["props","update","children"]},didMount:function(){},willMount:function(){},willUpdate:function(){},didUpdate:function(){},didUnmount:function(){},willUnmount:function(){},__class__:ab};var Pa=function(a,b){ab.call(this,a,b)};Pa.__name__=["doom","html","Component"];Pa.__super__=ab;Pa.prototype=
D(ab.prototype,{classes:function(){return""},selector:function(){var a=E.trim(this.classes()).split(" ").filter(function(a){return""!=a});return 0==a.length?"":a.map(function(a){return"."+a}).join("")},get_element:function(){return this.node},__class__:Pa});var bb=function(a,b){ab.call(this,a,b)};bb.__name__=["Main"];bb.main=function(){var a={expression:tb.Unparsed(""),seed:1234567890},b=new zc,c=new ub(new Pb(a),Uc.reduce,b.use()),d=new bb(c);Tc.browser.mount(J.Comp(d),Sa.find("#main"));c.stream().next(function(a){d.update(c,
{fileName:"Main.hx",lineNumber:24,className:"Main",methodName:"main"})}).run();var e=function(){var a=r.trimCharsLeft(window.location.hash,"#/");E.startsWith(a,"d/")?(a=qa.EvaluateExpression(bb.prettify(a.substring(2))),c.dispatch(a,{fileName:"Main.hx",lineNumber:30,className:"Main",methodName:"main"})):""==a&&c.dispatch(qa.EvaluateExpression("3d6"),{fileName:"Main.hx",lineNumber:32,className:"Main",methodName:"main"})};window.onhashchange=function(a){e()};e()};bb.prettify=function(a){return E.replace(a,
"_"," ")};bb.sampleProbabilities=function(a,b){for(var c=new vb(a,b),d=0;100>d;)d++,c.results.add(Ja.getResult(c.roller.roll(c.expr)));return c.results};bb.__super__=Pa;bb.prototype=D(Pa.prototype,{render:function(){var a=this,b=this.props.get(),c=new x,d=u.fromString("content");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;var d=new x,e=u.fromString("header");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;var e=new x,f=u.fromString("ribbon");null!=k["class"]?e.setReserved("class",
f):e.h["class"]=f;var f=new x,h=u.fromString(ra.msg.jumpersideasLink);null!=k.href?f.setReserved("href",h):f.h.href=h;var h=new x,t=u.fromString("prefix");null!=k["class"]?h.setReserved("class",t):h.h["class"]=t;var h=z.el("span",h,y.children([J.Text(ra.msg.asConfabulatedOn,null,null)])),t=z.el("br",null,null),g=new x,Yb=u.fromString("domain");null!=k["class"]?g.setReserved("class",Yb):g.h["class"]=Yb;e=z.el("div",e,y.children([z.el("a",f,y.children([h,t,z.el("span",g,y.children([J.Text(ra.msg.jumpersideas,
null,null)]))]))]));f=(new Ta({dispatch:function(b){a.props.dispatch(b,{fileName:"Main.hx",lineNumber:55,className:"Main",methodName:"render"})},expr:b.expression})).asNode();h=b.expression;h=1==h[1]?B.Some({expression:h[4],seed:b.seed,updateSeed:function(b){a.props.dispatch(qa.UpdateSeed(b),{fileName:"Main.hx",lineNumber:62,className:"Main",methodName:"render"})}}):B.None;d=z.el("div",d,y.children([e,f,(new ac(h)).asNode()]));e=new x;f=u.fromString("body");null!=k["class"]?e.setReserved("class",
f):e.h["class"]=f;f=b.expression;1==f[1]?(b=f[4],f=f[3],b=(new ka({expression:f,parsed:b,probabilities:bb.sampleProbabilities(f,b),selected:B.None})).asNode()):(b=new x,f=u.fromString("display:none"),null!=k.style?b.setReserved("style",f):b.h.style=f,f=u.fromString("empty node"),null!=k["data-comment"]?b.setReserved("data-comment",f):b.h["data-comment"]=f,b=z.el("div",b));f=new x;h=u.fromString("description");null!=k["class"]?f.setReserved("class",h):f.h["class"]=h;return z.el("div",c,y.children([d,
z.el("div",e,y.children([b,z.el("div",f,y.children([J.Raw(bc.markdownToHtml(ra.description),null,null)]))]))]))},classes:function(){return"main"},__class__:bb});var bc=function(){};bc.__name__=["Markdown"];bc.markdownToHtml=function(a){var b=new Ac;try{var c=a.replace(RegExp("(\r\n|\r)","g"),"\n").split("\n");b.parseRefLinks(c);var d=b.parseLines(c);return bc.renderHtml(d)}catch(e){return fa.lastException=e,e instanceof ca&&(e=e.val),"<pre>"+H.string(e)+"</pre>"}};bc.renderHtml=function(a){return(new Xa).render(a)};
var Ac=function(){this.refLinks=new x;this.inlineSyntaxes=[]};Ac.__name__=["Document"];Ac.prototype={refLinks:null,inlineSyntaxes:null,linkResolver:null,parseRefLinks:function(a){for(var b=new Y("(\"[^\"]+\"|'[^']+'|\\([^)]+\\))",""),c=new Y("^[ ]{0,3}\\[([^\\]]+)\\]:\\s+(\\S+)\\s*(\"[^\"]+\"|'[^']+'|\\([^)]+\\)|)\\s*$",""),d=0,e=a.length;d<e;){var f=d++;if(c.match(a[f])){var h=c.matched(1),t=c.matched(2),g=c.matched(3);E.startsWith(t,"<")&&E.endsWith(t,">")&&(t=L.substr(t,1,t.length-2));""==g&&null!=
a[f+1]&&b.match(a[f+1])&&(g=b.matched(1),a[f+1]="");var g=""==g?null:g.substring(1,g.length-1),h=h.toLowerCase(),Yb=this.refLinks,t=new Bc(h,t,g);null!=k[h]?Yb.setReserved(h,t):Yb.h[h]=t;a[f]=""}}},parseLines:function(a){a=new Cc(a,this);for(var b=[];a.pos<a.lines.length;)for(var c=0,d=K.get_syntaxes();c<d.length;){var e=d[c];++c;if(e.canParse(a)){c=e.parse(a);null!=c&&b.push(c);break}}return b},parseInline:function(a){return(new Gb(a,this)).parse()},__class__:Ac};var Bc=function(a,b,c){this.id=a;
this.url=b;this.title=c};Bc.__name__=["Link"];Bc.prototype={id:null,url:null,title:null,__class__:Bc};Math.__name__=["Math"];var zc=function(){};zc.__name__=["Middleware"];zc.prototype={use:function(){return Dc.compose(Dc.empty(),Dc.sideEffectState(M(this,this.updateUrl)))},updateUrl:function(a){a=a.expression;1==a[1]&&(a=E.replace(a[2]," ","_"),window.location.hash="/d/"+a)},__class__:zc};var wb=function(){this.map=new Qb;this.count=0};wb.__name__=["ProbabilitiesResult"];wb.fromObject=function(a){var b=
new wb;b.count=G.field(a,"count");a=G.field(a,"values");for(var c=G.fields(a),d=0;d<c.length;){var e=c[d];++d;var f=b.map,h=H.parseInt(e),e=G.field(a,e);f.h[h]=e}return b};wb.prototype={map:null,count:null,add:function(a){this.map.h.hasOwnProperty(a)?this.map.h[a]+=1:this.map.h[a]=1;this.count++},toObject:function(){for(var a={},b=this.map.keys();b.hasNext();){var c=b.next();a[c]=this.map.h[c]}return{count:this.count,values:a}},stats:function(){return new Ec(this.map,this.count)},__class__:wb};var Ec=
function(a,b){this.table=a;this.count=b;if(0!=b){var c=C.toArray(a.keys()),d=c.shift();this.maxValue=this.minValue=d;this.minWeight=this.maxWeight=this.total=a.h[d];for(d=0;d<c.length;){var e=c[d];++d;var f=a.h[e];e<this.minValue&&(this.minValue=e);e>this.maxValue&&(this.maxValue=e);f<this.minWeight&&(this.minWeight=f);f>this.maxWeight&&(this.maxWeight=f);this.total+=f}}};Ec.__name__=["ProbabilitiesStats"];Ec.prototype={minValue:null,maxValue:null,minWeight:null,maxWeight:null,total:null,count:null,
table:null,map:function(a){for(var b=0,c=this.total,d=new Fc(0,0,b,c,this.minValue,this.maxValue,this.minWeight,this.maxWeight,this.total),e=[],f=this.minValue,h=this.maxValue+1;f<h;){var t=f++;d.value=t;d.weight=this.table.h.hasOwnProperty(t)?this.table.h[t]:0;b+=d.weight;d.accWeight=b;d.revWeight=c;c-=d.weight;e.push(a(d))}return e},__class__:Ec};var Fc=function(a,b,c,d,e,f,h,t,g){this.value=a;this.weight=b;this.accWeight=c;this.revWeight=d;this.minValue=e;this.maxValue=f;this.minWeight=h;this.maxWeight=
t;this.total=g};Fc.__name__=["Sample"];Fc.prototype={value:null,weight:null,accWeight:null,revWeight:null,minValue:null,maxValue:null,minWeight:null,maxWeight:null,total:null,percent:null,maxPercent:null,accPercent:null,revPercent:null,get_percent:function(){return this.weight/this.total},get_maxPercent:function(){return this.get_percent()/(this.maxWeight/this.total)},get_accPercent:function(){return this.accWeight/this.total},get_revPercent:function(){return this.revWeight/this.total},__class__:Fc};
var Uc=function(){};Uc.__name__=["Reducer"];Uc.reduce=function(a,b){switch(b[1]){case 0:var c=b[2],d=m.parse(c);switch(d[1]){case 0:return{expression:tb.Error(c,d[2]),seed:a.seed};case 1:var d=d[2],e=S.validate(d);switch(e[1]){case 0:return{expression:tb.ParsedInvalid(c,e[2],d),seed:a.seed};case 1:return{expression:tb.Parsed(c,S.toString(d),d),seed:a.seed}}}break;case 1:return{expression:a.expression,seed:b[2]}}};var G=function(){};G.__name__=["Reflect"];G.field=function(a,b){try{return a[b]}catch(c){return fa.lastException=
c,null}};G.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};G.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};G.compare=function(a,b){return a==b?0:a>b?1:-1};G.compareMethods=function(a,b){return a==b?!0:G.isFunction(a)&&G.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};G.isObject=function(a){if(null==a)return!1;var b=typeof a;return"string"==
b||"object"==b&&null==a.__enum__?!0:"function"==b?null!=(a.__name__||a.__ename__):!1};G.isEnumValue=function(a){return null!=a?null!=a.__enum__:!1};G.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var tb={__ename__:["Expression"],__constructs__:["Unparsed","Parsed","ParsedInvalid","Error"],Unparsed:function(a){a=["Unparsed",0,a];a.__enum__=tb;return a},Parsed:function(a,b,c){a=["Parsed",1,a,b,c];a.__enum__=tb;return a},ParsedInvalid:function(a,
b,c){a=["ParsedInvalid",2,a,b,c];a.__enum__=tb;return a},Error:function(a,b){var c=["Error",3,a,b];c.__enum__=tb;return c}},H=function(){};H.__name__=["Std"];H.string=function(a){return R.__string_rec(a,"")};H.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=L.cca(a,1)&&88!=L.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};H.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var cc=function(){this.b=""};cc.__name__=["StringBuf"];cc.prototype={b:null,__class__:cc};var E=function(){};
E.__name__=["StringTools"];E.htmlEscape=function(a,b){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return b?a.split('"').join("&quot;").split("'").join("&#039;"):a};E.startsWith=function(a,b){return a.length>=b.length?L.substr(a,0,b.length)==b:!1};E.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?L.substr(a,d-c,c)==b:!1};E.isSpace=function(a,b){var c=L.cca(a,b);return 8<c&&14>c?!0:32==c};E.ltrim=function(a){for(var b=a.length,c=0;c<b&&E.isSpace(a,c);)++c;
return 0<c?L.substr(a,c,b-c):a};E.rtrim=function(a){for(var b=a.length,c=0;c<b&&E.isSpace(a,b-c-1);)++c;return 0<c?L.substr(a,0,b-c):a};E.trim=function(a){return E.ltrim(E.rtrim(a))};E.lpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a=b+a;return a};E.rpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a+=b;return a};E.replace=function(a,b,c){return a.split(b).join(c)};var ga={__ename__:["ValueType"],__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" "),
TNull:["TNull",0]};ga.TNull.__enum__=ga;ga.TInt=["TInt",1];ga.TInt.__enum__=ga;ga.TFloat=["TFloat",2];ga.TFloat.__enum__=ga;ga.TBool=["TBool",3];ga.TBool.__enum__=ga;ga.TObject=["TObject",4];ga.TObject.__enum__=ga;ga.TFunction=["TFunction",5];ga.TFunction.__enum__=ga;ga.TClass=function(a){a=["TClass",6,a];a.__enum__=ga;return a};ga.TEnum=function(a){a=["TEnum",7,a];a.__enum__=ga;return a};ga.TUnknown=["TUnknown",8];ga.TUnknown.__enum__=ga;var aa=function(){};aa.__name__=["Type"];aa.getEnum=function(a){return null==
a?null:a.__enum__};aa.getSuperClass=function(a){return a.__super__};aa.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};aa.getEnumName=function(a){return a.__ename__.join(".")};aa.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13]);default:throw new ca("Too many arguments");}};aa.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};aa.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);L.remove(b,"__class__");L.remove(b,"__properties__");return b};aa["typeof"]=function(a){switch(typeof a){case "boolean":return ga.TBool;case "function":return a.__name__||a.__ename__?ga.TObject:ga.TFunction;case "number":return Math.ceil(a)==
a%2147483648?ga.TInt:ga.TFloat;case "object":if(null==a)return ga.TNull;var b=a.__enum__;if(null!=b)return ga.TEnum(b);a=R.getClass(a);return null!=a?ga.TClass(a):ga.TObject;case "string":return ga.TClass(String);case "undefined":return ga.TNull;default:return ga.TUnknown}};var u={__name__:["doom","core","_AttributeValue","AttributeValue_Impl_"],fromString:function(a){return ob.StringAttribute(a)},fromBoolMap:function(a){for(var b=[],c=a.keys();c.hasNext();){var d=c.next();(null!=k[d]?a.getReserved(d):
a.h[d])&&b.push(d)}return ob.StringAttribute(b.join(" "))},fromStringMap:function(a){for(var b=[],c=a.keys();c.hasNext();){var d=c.next(),e=null!=k[d]?a.getReserved(d):a.h[d];null!=e&&b.push(""+d+":"+e)}return ob.StringAttribute(b.join(";"))},fromBool:function(a){return ob.BoolAttribute(a)},fromEventHandler:function(a){return null==a?ob.BoolAttribute(!1):ob.EventAttribute(a)},fromHandler:function(a){return u.fromEventHandler(function(b,c){c.preventDefault();a()})},fromTypedEventHandler:function(a){return u.fromEventHandler(function(b,
c){a(c)})},fromElementHandler:function(a){return u.fromEventHandler(function(b,c){c.preventDefault();a(b)})},fromElementAndEventHandler:function(a){return u.fromEventHandler(function(b,c){a(b,c)})},fromStringValueHandler:function(a){return u.fromEventHandler(function(b,c){c.preventDefault();var d=O.getValue(b);a(d)})},fromStringValueAndEventHandler:function(a){return u.fromEventHandler(function(b,c){var d=O.getValue(b);a(d,c)})},fromBoolValueHandler:function(a){return u.fromEventHandler(function(b,
c){c.preventDefault();a(b.checked)})},fromBoolValueAndEventHandler:function(a){return u.fromEventHandler(function(b,c){a(b.checked,c)})},fromIntValueHandler:function(a){return u.fromEventHandler(function(b,c){c.preventDefault();var d=O.getValue(b);P.canParse(d)&&(d=P.parse(d),a(d))})},fromIntValueAndEventHandler:function(a){return u.fromEventHandler(function(b,c){var d=O.getValue(b);P.canParse(d)&&(d=P.parse(d),a(d,c))})},fromFloatValueHandler:function(a){return u.fromEventHandler(function(b,c){c.preventDefault();
var d=O.getValue(b);P.canParse(d)&&(d=P.parse(d),a(d))})},fromFloatValueAndEventHandler:function(a){return u.fromEventHandler(function(b,c){var d=O.getValue(b);P.canParse(d)&&(d=P.parse(d),a(d,c))})},toString:function(a){if(1==a[1])return a[2];throw new ba("cannot convert attribute "+H.string(a)+" to string",null,{fileName:"AttributeValue.hx",lineNumber:76,className:"doom.core._AttributeValue.AttributeValue_Impl_",methodName:"toString"});},equalsTo:function(a,b){if(null==a)return!1;switch(a[1]){case 0:return null==
b?!1:0==b[1]?a[2]==b[2]:!1;case 1:return null==b?!1:1==b[1]?a[2]==b[2]:!1;default:return!1}},notEqualsTo:function(a,b){return!u.equalsTo(a,b)}},ob={__ename__:["doom","core","AttributeValueImpl"],__constructs__:["BoolAttribute","StringAttribute","EventAttribute"],BoolAttribute:function(a){a=["BoolAttribute",0,a];a.__enum__=ob;return a},StringAttribute:function(a){a=["StringAttribute",1,a];a.__enum__=ob;return a},EventAttribute:function(a){a=["EventAttribute",2,a];a.__enum__=ob;return a}},z={__name__:["doom",
"core","_VNode","VNode_Impl_"],text:function(a){return J.Text(a,null,null)},comp:function(a){return J.Comp(a)},raw:function(a){return J.Raw(a,null,null)},comment:function(a){return J.Comment(a,null,null)},el:function(a,b,c){null==b&&(b=new x);null==c&&(c=y.children([]));return J.Element(a,b,c,null,null)},lazy:function(a){return J.Lazy(a)},renderable:function(a){return J.Lazy(M(a,a.render))},asNodes:function(a){return y.children([a])},mount:function(a,b){switch(a[1]){case 0:if(null==a[5])return J.Element(a[2],
a[3],a[4],b,a[6]);var c=a[5];return J.Element(a[2],a[3],a[4],function(a,d){c(a,d);b(a,d)},a[6]);case 1:if(null==a[3])return J.Comment(a[2],b,a[4]);var d=a[3];return J.Comment(a[2],function(a,c){d(a,c);b(a,c)},a[4]);case 2:if(null==a[3])return J.Raw(a[2],b,a[4]);var e=a[3];return J.Raw(a[2],function(a,c){e(a,c);b(a,c)},a[4]);case 3:if(null==a[3])return J.Text(a[2],b,a[4]);var f=a[3];return J.Text(a[2],function(a,c){f(a,c);b(a,c)},a[4]);case 4:throw new ba("Component does not support `onMount`, use `Component.didMount` or `Component.willMount`",
null,{fileName:"VNode.hx",lineNumber:53,className:"doom.core._VNode.VNode_Impl_",methodName:"mount"});case 5:var h=a[2];return J.Lazy(function(){var a=h();return z.mount(a,b)})}}},J={__ename__:["doom","core","VNodeImpl"],__constructs__:"Element Comment Raw Text Comp Lazy".split(" "),Element:function(a,b,c,d,e){a=["Element",0,a,b,c,d,e];a.__enum__=J;return a},Comment:function(a,b,c){a=["Comment",1,a,b,c];a.__enum__=J;return a},Raw:function(a,b,c){a=["Raw",2,a,b,c];a.__enum__=J;return a},Text:function(a,
b,c){a=["Text",3,a,b,c];a.__enum__=J;return a},Comp:function(a){a=["Comp",4,a];a.__enum__=J;return a},Lazy:function(a){a=["Lazy",5,a];a.__enum__=J;return a}},y={__name__:["doom","core","_VNodes","VNodes_Impl_"],child:function(a){return y.children([a])},text:function(a){return y.children([J.Text(a,null,null)])},comp:function(a){return y.children([J.Comp(a)])},children:function(a){return a},lazy:function(a){return y.children([J.Lazy(a)])},renderable:function(a){return y.children([J.Lazy(M(a,a.render))])},
_new:function(a){return a},add:function(a,b){a.push(b);return y.children(a)},prepend:function(a,b){a.unshift(b);return y.children(a)},concat:function(a,b){return y.children(a.concat(b))},copy:function(a){return y.children(a.slice())},filter:function(a,b){return y.children(a.filter(b))},toArray:function(a){return a}},V={__ename__:["doom","html","AttributeType"],__constructs__:"BooleanAttribute Property BooleanProperty OverloadedBooleanAttribute NumericAttribute PositiveNumericAttribute SideEffectProperty".split(" "),
BooleanAttribute:["BooleanAttribute",0]};V.BooleanAttribute.__enum__=V;V.Property=["Property",1];V.Property.__enum__=V;V.BooleanProperty=["BooleanProperty",2];V.BooleanProperty.__enum__=V;V.OverloadedBooleanAttribute=["OverloadedBooleanAttribute",3];V.OverloadedBooleanAttribute.__enum__=V;V.NumericAttribute=["NumericAttribute",4];V.NumericAttribute.__enum__=V;V.PositiveNumericAttribute=["PositiveNumericAttribute",5];V.PositiveNumericAttribute.__enum__=V;V.SideEffectProperty=["SideEffectProperty",
6];V.SideEffectProperty.__enum__=V;var Ea=function(){};Ea.__name__=["doom","html","Attributes"];Ea.getAttribute=function(a,b){var c=Ea.properties,c=null!=k[b]?c.getReserved(b):c.h[b];if(null==c)return a.getAttribute(b);switch(c[1]){case 1:case 2:case 6:return G.field(a,b);case 0:case 3:case 4:case 5:return a.getAttribute(b)}};Ea.setDynamicAttribute=function(a,b,c){var d=Ea.properties,d=null!=k[b]?d.getReserved(b):d.h[b];if(null==d)a.setAttribute(b,c);else switch(d[1]){case 1:case 2:case 6:a[b]=c;
break;case 0:case 3:case 4:case 5:a.setAttribute(b,c)}};Ea.setStringAttribute=function(a,b,c){var d=Ea.properties,d=null!=k[b]?d.getReserved(b):d.h[b];if(null==d)a.setAttribute(b,c);else switch(d[1]){case 1:case 2:case 6:a[b]=c;break;case 0:case 3:case 4:case 5:a.setAttribute(b,c)}};Ea.toggleBoolAttribute=function(a,b,c){var d=Ea.properties,d=null!=k[b]?d.getReserved(b):d.h[b];if(null==d)c?a.setAttribute(b,b):a.removeAttribute(b);else switch(d[1]){case 1:case 2:case 6:a[b]=c;break;case 0:case 3:case 4:case 5:c?
a.setAttribute(b,b):a.removeAttribute(b)}};Ea.removeAttribute=function(a,b){a.removeAttribute(b)};var W={__ename__:["dots","AttributeType"],__constructs__:"BooleanAttribute Property BooleanProperty OverloadedBooleanAttribute NumericAttribute PositiveNumericAttribute SideEffectProperty".split(" "),BooleanAttribute:["BooleanAttribute",0]};W.BooleanAttribute.__enum__=W;W.Property=["Property",1];W.Property.__enum__=W;W.BooleanProperty=["BooleanProperty",2];W.BooleanProperty.__enum__=W;W.OverloadedBooleanAttribute=
["OverloadedBooleanAttribute",3];W.OverloadedBooleanAttribute.__enum__=W;W.NumericAttribute=["NumericAttribute",4];W.NumericAttribute.__enum__=W;W.PositiveNumericAttribute=["PositiveNumericAttribute",5];W.PositiveNumericAttribute.__enum__=W;W.SideEffectProperty=["SideEffectProperty",6];W.SideEffectProperty.__enum__=W;var Ua=function(){};Ua.__name__=["dots","Attributes"];Ua.asAttribute=function(a){for(var b=[],c=a.keys();c.hasNext();){var d=c.next();(null!=k[d]?a.getReserved(d):a.h[d])&&b.push(d)}return b.join(" ")};
Ua.asStyle=function(a){for(var b=[],c=a.keys();c.hasNext();){var d=c.next(),e=null!=k[d]?a.getReserved(d):a.h[d];r.isEmpty(e)||b.push(""+d+": "+e+";")}return b.join(" ")};Ua.getAttribute=function(a,b){var c=Ua.properties,c=null!=k[b]?c.getReserved(b):c.h[b];if(null==c)return a.getAttribute(b);switch(c[1]){case 1:case 2:case 6:return G.field(a,b);case 0:case 3:case 4:case 5:return a.getAttribute(b)}};Ua.setDynamicAttribute=function(a,b,c){var d=Ua.properties,d=null!=k[b]?d.getReserved(b):d.h[b];if(null==
d)a.setAttribute(b,c);else switch(d[1]){case 1:case 2:case 6:a[b]=c;break;case 0:case 3:case 4:case 5:a.setAttribute(b,c)}};Ua.setStringAttribute=function(a,b,c){var d=Ua.properties,d=null!=k[b]?d.getReserved(b):d.h[b];if(null==c)"value"==b?a.setAttribute(b,""):a.removeAttribute(b);else if(null==d)a.setAttribute(b,c);else switch(d[1]){case 1:case 2:case 6:a[b]=c;break;case 0:case 3:case 4:case 5:a.setAttribute(b,c)}};Ua.toggleBoolAttribute=function(a,b,c){var d=Ua.properties,d=null!=k[b]?d.getReserved(b):
d.h[b];if(null==d)c?a.setAttribute(b,b):a.removeAttribute(b);else switch(d[1]){case 1:case 2:case 6:a[b]=c;break;case 0:case 3:case 4:case 5:c?a.setAttribute(b,b):a.removeAttribute(b)}};Ua.removeAttribute=function(a,b){a.removeAttribute(b)};var O=function(){};O.__name__=["dots","Dom"];O.hasClass=function(a,b){return a.classList.contains(b)};O.addClass=function(a,b){a.classList.add(b);return a};O.removeClass=function(a,b){a.classList.remove(b);return a};O.remove=function(a){var b=a.parentNode;b.removeChild(a);
return b};O.toggleClass=function(a,b,c){null==c&&(c=!a.classList.contains(b));c?a.classList.add(b):a.classList.remove(b)};O.on=function(a,b,c){a.addEventListener(b,c);return a};O.once=function(a,b,c){var d=null,d=function(e){a.removeEventListener(b,d);c(e)};a.addEventListener(b,d);return a};O.off=function(a,b,c){a.removeEventListener(b,c);return a};O.toString=function(a){if(1==a.nodeType)return a.outerHTML;if(8==a.nodeType)return"\x3c!--"+a.textContent+"--\x3e";if(3==a.nodeType)return a.textContent;
throw new ba("invalid nodeType "+a.nodeType,null,{fileName:"Dom.hx",lineNumber:151,className:"dots.Dom",methodName:"toString"});};O.nodeText=function(a){if(1==a.nodeType)return a.innerHTML;if(8==a.nodeType||3==a.nodeType)return a.textContent;throw new ba("invalid nodeType "+a.nodeType,null,{fileName:"Dom.hx",lineNumber:162,className:"dots.Dom",methodName:"nodeText"});};O.nodeListToArray=function(a){return Array.prototype.slice.call(a,0)};O.parse=function(a,b,c,d,e){b=xb.parseSelector(a,b);null==e&&
(e=window.document);a=e.createElement(b.tag);for(var f=b.attributes.keys();f.hasNext();){var h=f.next(),t=b.attributes;Ua.setStringAttribute(a,h,null!=k[h]?t.getReserved(h):t.h[h])}if(null!=c)for(b=0;b<c.length;)f=c[b],++b,a.appendChild(f);null!=d&&a.appendChild(e.createTextNode(d));return a};O.insertAtIndex=function(a,b,c){a.insertBefore(b,a.children[c]);return a};O.prependChild=function(a,b){return O.insertAtIndex(a,b,0)};O.prependChildren=function(a,b){for(var c=O.prependChild,d=a,e=b.length;0<=
--e;)d=c(d,b[e]);return d};O.prepend=function(a,b,c){null!=b&&O.prependChild(a,b);return O.prependChildren(a,null!=c?c:[])};O.appendChild=function(a,b){a.appendChild(b);return a};O.appendChildren=function(a,b){return l.reduce(b,O.appendChild,a)};O.append=function(a,b,c){null!=b&&O.appendChild(a,b);null!=c&&0<c.length&&O.appendChildren(a,c);return a};O.empty=function(a){for(;null!=a.firstChild;)a.removeChild(a.firstChild);return a};O.flattenSiblingsAndChildren=function(a){for(;null!=a;){if(1==a.nodeType)O.flattenSiblingsAndChildren(a.childNodes[0]);
else if(3==a.nodeType)for(;null!=a.nextSibling&&3==a.nextSibling.nodeType;){var b=a.textContent,c=a.nextSibling.textContent;a.parentNode.removeChild(a.nextSibling);b=window.document.createTextNode(b+c);a.parentNode.replaceChild(b,a);a=b}a=a.nextSibling}};O.flattenTextNodes=function(a){O.flattenSiblingsAndChildren(a.childNodes[0])};O.traverseTextNodes=function(a,b){var c=[],d=null,d=function(a){if(3==a.nodeType)c.push(a);else if(1==a.nodeType){var b=0;for(a=a.childNodes;b<a.length;){var e=a[b];++b;
d(e)}}};d(a);for(var e=0;e<c.length;){var f=c[e];++e;b(f)}};O.addCss=function(a,b){null==b&&(b=window.document.head);var c=window.document.createElement("style");c.type="text/css";c.appendChild(window.document.createTextNode(a));b.appendChild(c)};O.getValue=function(a){switch(a.nodeName){case "INPUT":return"checkbox"!=a.type||a.checked?a.value:null;case "SELECT":return a.options.item(a.selectedIndex).value;case "TEXTAREA":return a.value;default:return a.innerHTML}};O.getMultiValue=function(a){switch(a.nodeName){case "INPUT":return"checkbox"!=
a.type||a.checked?yb.Left(a.value):yb.Right([]);case "SELECT":if(a.multiple){var b=[];a=a.selectedOptions;for(var c=0,d=a.length;c<d;){var e=c++;b.push(a[e].value)}return yb.Right(b)}b=a.options.item(a.selectedIndex);return yb.Left(b.value);case "TEXTAREA":return yb.Left(a.value);default:return yb.Left(a.innerHTML)}};O.getWindowHeight=function(a){null==a&&(a=window);return a.document.documentElement.clientHeight};O.getWindowWidth=function(a){null==a&&(a=window);return a.document.documentElement.clientWidth};
O.getWindowSize=function(a){null==a&&(a=window);return{width:a.document.documentElement.clientWidth,height:a.document.documentElement.clientHeight}};O.getWindowInnerHeight=function(a){null==a&&(a=window);return a.innerHeight};O.getWindowInnerWidth=function(a){null==a&&(a=window);return a.innerWidth};O.getWindowInnerSize=function(a){null==a&&(a=window);return{width:a.innerWidth,height:a.innerHeight}};O.getDocumentHeight=function(a){null==a&&(a=window.document);return a.documentElement.scrollHeight};
O.getDocumentWidth=function(a){null==a&&(a=window.document);return a.documentElement.scrollWidth};O.getDocumentSize=function(a){null==a&&(a=window.document);return{width:a.documentElement.scrollWidth,height:a.documentElement.scrollHeight}};O.getScrollTop=function(a){null==a&&(a=window.document);return null!=a.documentElement?a.documentElement.scrollTop:a.body.scrollTop};O.getOffset=function(a,b){null==b&&(b=window.document);var c=a.getBoundingClientRect();return{top:Math.round(c.top+b.body.scrollTop),
left:Math.round(c.left+b.body.scrollLeft)}};O.getOffsetParent=function(a){return null!=a.offsetParent?a.offsetParent:a};O.getOuterHeight=function(a){return a.offsetHeight};O.getOuterHeightWithMargin=function(a){var b=a.offsetHeight;a=Gc.style(a);return b+H.parseInt(a.marginTop)+H.parseInt(a.marginBottom)};O.getOuterWidth=function(a){return a.offsetWidth};O.getOuterWidthWithMargin=function(a){var b=a.offsetWidth;a=Gc.style(a);return b+H.parseInt(a.marginLeft)+H.parseInt(a.marginRight)};O.getPosition=
function(a){return{left:a.offsetLeft,top:a.offsetTop}};O.ready=function(a,b){null==b&&(b=window.document);"loading"!=b.readyState?a():b.addEventListener("DOMContentLoaded",a)};var Wa=function(){};Wa.__name__=["dots","Html"];Wa.parseNodes=function(a){if(!Wa.pattern.match(a))throw new ca('Invalid pattern "'+a+'"');var b;switch(Wa.pattern.matched(1).toLowerCase()){case "tbody":case "thead":b=window.document.createElement("table");break;case "td":case "th":b=window.document.createElement("tr");break;
case "tr":b=window.document.createElement("tbody");break;default:b=window.document.createElement("div")}b.innerHTML=a;return b.childNodes};Wa.parseArray=function(a){a=Wa.parseNodes(a);return Array.prototype.slice.call(a,0)};Wa.parseElement=function(a){return Wa.parseNodes(a)[0]};Wa.parse=function(a){a=Wa.parseNodes(a);if(1<a.length){for(var b=window.document.createDocumentFragment();0<a.length;)b.appendChild(a[0]);return b}return a[0]};var Sa=function(){};Sa.__name__=["dots","Query"];Sa.find=function(a,
b){return(null!=b?b:Sa.doc).querySelector(a)};Sa.selectNodes=function(a,b){return(null!=b?b:Sa.doc).querySelectorAll(a)};Sa.select=function(a,b){var c=Sa.selectNodes(a,b);return Array.prototype.slice.call(c,0)};Sa.getElementIndex=function(a){for(var b=0;;){a=a.previousElementSibling;if(null==a)break;++b}return b};Sa.siblings=function(a){return Array.prototype.slice.call(a.parentNode.children).filter(function(b){return b!=a})};Sa.childrenOf=function(a,b){return a.filter(function(a){return a.parentElement==
b})};Sa.closest=function(a,b){for(;!a.matches(b);)if(a=a.parentElement,null==a)return null;return a};var xb=function(a){this.selector=a;this.index=0};xb.__name__=["dots","SelectorParser"];xb.parseSelector=function(a,b){var c=(new xb(a)).parse();null!=b&&(c.attributes=xb.mergeAttributes(c.attributes,b));return c};xb.mergeAttributes=function(a,b){return C.reduce(b.keys(),function(a,d){var c=null!=k[d]?b.getReserved(d):b.h[d];"class"==d&&(null!=k[d]?a.existsReserved(d):a.h.hasOwnProperty(d))&&(c=""+
(null!=k[d]?a.getReserved(d):a.h[d]).toString()+" "+c.toString());null!=k[d]?a.setReserved(d,c):a.h[d]=c;return a},a)};xb.prototype={selector:null,index:null,parse:function(){var a=this.gobbleTag(),b=this.gobbleAttributes();return{tag:a,attributes:b}},gobbleTag:function(){return this.isIdentifierStart()?this.gobbleIdentifier():"div"},gobbleAttributes:function(){for(var a=new x;this.index<this.selector.length;){var b=this.gobbleAttribute();if("class"==b.key&&(null!=k["class"]?a.existsReserved("class"):
a.h.hasOwnProperty("class"))){var c=(null!=k["class"]?a.getReserved("class"):a.h["class"]).toString();b.value=""+c+" "+b.value.toString()}c=b.key;b=b.value;null!=k[c]?a.setReserved(c,b):a.h[c]=b}return a},gobbleAttribute:function(){var a=this.selector.charAt(this.index);switch(a){case "#":return this.gobbleElementId();case ".":return this.gobbleElementClass();case "[":return this.gobbleElementAttribute();default:throw new ba('unknown selector char "'+a+'" at pos '+this.index,null,{fileName:"SelectorParser.hx",
lineNumber:79,className:"dots.SelectorParser",methodName:"gobbleAttribute"});}},gobbleElementId:function(){this.gobbleChar("#");return{key:"id",value:this.gobbleIdentifier()}},gobbleElementClass:function(){this.gobbleChar(".");return{key:"class",value:this.gobbleIdentifier()}},gobbleElementAttribute:function(){this.gobbleChar("[");var a=this.gobbleIdentifier();this.gobbleChar("=");var b=this.gobbleUpTo("]");jb.canParse(b.toString())&&(b=jb.parse(b.toString())?a:null);this.gobbleChar("]");return{key:a,
value:b}},gobbleIdentifier:function(){var a=[];for(a.push(this.gobbleChar());this.isIdentifierPart();)a.push(this.gobbleChar());return a.join("")},gobbleChar:function(a,b){var c=this.selector.charAt(this.index++);if(null!=a&&a!=c)throw new ba("expecting "+a+" at position "+this.index+" of "+this.selector,null,{fileName:"SelectorParser.hx",lineNumber:122,className:"dots.SelectorParser",methodName:"gobbleChar"});if(null!=b&&!l.contains(b,c))throw new ba("expecting one of "+b.join(", ")+" at position "+
this.index+" of "+this.selector,null,{fileName:"SelectorParser.hx",lineNumber:125,className:"dots.SelectorParser",methodName:"gobbleChar"});return c},gobbleUpTo:function(a){for(var b=[];this.selector.charAt(this.index)!=a;)b.push(this.gobbleChar());return b.join("")},isAlpha:function(){var a=L.cca(this.selector,this.index);return 65<=a&&90>=a?!0:97<=a?122>=a:!1},isNumeric:function(){var a=L.cca(this.selector,this.index);return 48<=a?57>=a:!1},isAlphaNumeric:function(){return this.isAlpha()?!0:this.isNumeric()},
isAny:function(a){for(var b=0;b<a.length;){var c=a[b];++b;if(c==this.selector.charAt(this.index))return!0}return!1},isIdentifierStart:function(){return this.isAlpha()},isIdentifierPart:function(){return this.isAlpha()||this.isNumeric()?!0:this.isAny(["_","-"])},isIdStart:function(){return"#"==this.selector.charAt(this.index)},isClassStart:function(){return"."==this.selector.charAt(this.index)},"char":function(){return this.selector.charAt(this.index)},code:function(){return L.cca(this.selector,this.index)},
__class__:xb};var Gc=function(){};Gc.__name__=["dots","Style"];Gc.style=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};var Ka={__ename__:["dr","DiceExpression"],__constructs__:["Die","Literal","DiceReduce","BinaryOp","UnaryOp"],Die:function(a){a=["Die",0,a];a.__enum__=Ka;return a},Literal:function(a){a=["Literal",1,a];a.__enum__=Ka;return a},DiceReduce:function(a,b){var c=["DiceReduce",2,a,b];c.__enum__=Ka;return c},BinaryOp:function(a,b,c){a=["BinaryOp",3,a,b,c];a.__enum__=
Ka;return a},UnaryOp:function(a,b){var c=["UnaryOp",4,a,b];c.__enum__=Ka;return c}},Da={__ename__:["dr","DiceReducer"],__constructs__:["Sum","Average","Min","Max","Median"],Sum:["Sum",0]};Da.Sum.__enum__=Da;Da.Average=["Average",1];Da.Average.__enum__=Da;Da.Min=["Min",2];Da.Min.__enum__=Da;Da.Max=["Max",3];Da.Max.__enum__=Da;Da.Median=["Median",4];Da.Median.__enum__=Da;var Hb={__ename__:["dr","DiceReduceable"],__constructs__:["DiceExpressions","DiceListWithFilter","DiceListWithMap"],DiceExpressions:function(a){a=
["DiceExpressions",0,a];a.__enum__=Hb;return a},DiceListWithFilter:function(a,b){var c=["DiceListWithFilter",1,a,b];c.__enum__=Hb;return c},DiceListWithMap:function(a,b){var c=["DiceListWithMap",2,a,b];c.__enum__=Hb;return c}},dc={__ename__:["dr","DiceFilterable"],__constructs__:["DiceArray","DiceExpressions"],DiceArray:function(a){a=["DiceArray",0,a];a.__enum__=dc;return a},DiceExpressions:function(a){a=["DiceExpressions",1,a];a.__enum__=dc;return a}},Rb={__ename__:["dr","DiceFilter"],__constructs__:["Drop",
"Keep"],Drop:function(a,b){var c=["Drop",0,a,b];c.__enum__=Rb;return c},Keep:function(a,b){var c=["Keep",1,a,b];c.__enum__=Rb;return c}},Sb={__ename__:["dr","DiceFunctor"],__constructs__:["Explode","Reroll"],Explode:function(a,b){var c=["Explode",0,a,b];c.__enum__=Sb;return c},Reroll:function(a,b){var c=["Reroll",1,a,b];c.__enum__=Sb;return c}},pb={__ename__:["dr","Times"],__constructs__:["Always","UpTo"],Always:["Always",0]};pb.Always.__enum__=pb;pb.UpTo=function(a){a=["UpTo",1,a];a.__enum__=pb;
return a};var cb={__ename__:["dr","Range"],__constructs__:["Exact","Between","ValueOrMore","ValueOrLess","Composite"],Exact:function(a){a=["Exact",0,a];a.__enum__=cb;return a},Between:function(a,b){var c=["Between",1,a,b];c.__enum__=cb;return c},ValueOrMore:function(a){a=["ValueOrMore",2,a];a.__enum__=cb;return a},ValueOrLess:function(a){a=["ValueOrLess",3,a];a.__enum__=cb;return a},Composite:function(a){a=["Composite",4,a];a.__enum__=cb;return a}},db={__ename__:["dr","LowHigh"],__constructs__:["Low",
"High"],Low:["Low",0]};db.Low.__enum__=db;db.High=["High",1];db.High.__enum__=db;var Fa={__ename__:["dr","DiceBinOp"],__constructs__:["Sum","Difference","Division","Multiplication"],Sum:["Sum",0]};Fa.Sum.__enum__=Fa;Fa.Difference=["Difference",1];Fa.Difference.__enum__=Fa;Fa.Division=["Division",2];Fa.Division.__enum__=Fa;Fa.Multiplication=["Multiplication",3];Fa.Multiplication.__enum__=Fa;var Hc={__ename__:["dr","DiceUnOp"],__constructs__:["Negate"],Negate:["Negate",0]};Hc.Negate.__enum__=Hc;var S=
function(){};S.__name__=["dr","DiceExpressionExtensions"];S.toString=function(a){switch(a[1]){case 0:return S.diceToString(1,a[2]);case 1:return""+a[2];case 2:switch(a[2][1]){case 0:var b=a[3];return S.expressionsToString(a[2][2])+S.expressionExtractorToString(b);case 1:switch(a[2][2][1]){case 0:var b=a[3],c=a[2][3];return S.sidesToString(a[2][2][2])+S.diceFilterToString(c)+S.expressionExtractorToString(b);case 1:return b=a[3],c=a[2][3],S.expressionsToString(a[2][2][2])+S.diceFilterToString(c)+S.expressionExtractorToString(b)}break;
case 2:return b=a[3],S.diceBagToString(a[2][2],a[2][3])+S.expressionExtractorToString(b)}break;case 3:b=a[4];c=a[2];a=S.toString(a[3])+" ";var d;switch(c[1]){case 0:d="+";break;case 1:d="-";break;case 2:d="/";break;case 3:d="*"}return a+d+" "+S.toString(b);case 4:return"-"+S.toString(a[3])}};S.diceToString=function(a,b){return 1==a?100==b?"d%":"d"+b:100==b?""+a+"d%":""+a+"d"+b};S.diceBagToString=function(a,b){var c=S.sidesToString(a),d;switch(b[1]){case 0:d=b[3];d=[" explode"].concat([S.timesToString(b[2])]).concat([S.rangeToString(d)]).filter(r.hasContent).join(" ");
break;case 1:d=b[3],d=[" reroll"].concat([S.timesToString(b[2])]).concat([S.rangeToString(d)]).filter(r.hasContent).join(" ")}return c+d};S.sidesToString=function(a){return 1==l.distinct(a).length?S.diceToString(a.length,a[0]):"("+a.map(function(a){return S.diceToString(1,a)}).join(",")+")"};S.timesToString=function(a){switch(a[1]){case 0:return"";case 1:switch(a[2]){case 1:return"once";case 2:return"twice";default:return""+a[2]+" times"}}};S.rangeToString=function(a){switch(a[1]){case 0:return"on "+
a[2];case 1:return""+a[2]+"..."+a[3];case 2:return"on "+a[2]+" or more";case 3:return"on "+a[2]+" or less";case 4:return"("+a[2].map(S.rangeToString).join(",")+")"}};S.expressionsToString=function(a){return S.allOneDieSameSides(a)?(1<a.length?""+a.length:"")+S.toString(a[0]):1!=a.length||S.needsBraces(a[0])?"("+a.map(S.toString).join(",")+")":a.map(S.toString).join(",")};S.allOneDieSameSides=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;if(0==d[1])b.push(d[2]);else return!1}return 1==l.distinct(b).length};
S.expressionExtractorToString=function(a){switch(a[1]){case 0:return"";case 1:return" average";case 2:return" min";case 3:return" max";case 4:return" median"}};S.diceFilterToString=function(a){switch(a[1]){case 0:switch(a[2][1]){case 0:return" drop "+a[3];case 1:return" drop highest "+a[3]}break;case 1:switch(a[2][1]){case 0:return" keep lowest "+a[3];case 1:return" keep "+a[3]}}};S.needsBraces=function(a){switch(a[1]){case 0:return!1;case 1:return!1;case 2:return!1;case 3:return!0;case 4:return!1}};
S.validateExpr=function(a){switch(a[1]){case 0:return a=a[2],0>=a?[za.InsufficientSides(a)]:[];case 1:return[];case 2:return S.validateDiceReduceable(a[2]);case 3:var b=a[4];return S.validateExpr(a[3]).concat(S.validateExpr(b));case 4:return S.validateExpr(a[3])}};S.validateDiceReduceable=function(a){switch(a[1]){case 0:if(0==a[2].length)return[za.EmptySet];var b=a[2].map(S.validateExpr);return Array.prototype.concat.apply([],b);case 1:var c=a[3],d=a[2];a=[];switch(d[1]){case 0:b=d[2].length;break;
case 1:b=d[2].length}switch(c[1]){case 0:1>c[3]?a.push(za.DropOrKeepShouldBePositive):(c=c[3],c>=b&&a.push(za.TooManyDrops(b,c)));break;case 1:1>c[3]?a.push(za.DropOrKeepShouldBePositive):(c=c[3],c>b&&a.push(za.TooManyKeeps(b,c)))}return a;case 2:var e=a[3];a=a[2];b=l.reduce(a,function(a,b){return 0<b?a:a.concat([za.InsufficientSides(b)])},[]);a=a.map(function(a){return S.checkFunctor(a,e)});return b.concat(Array.prototype.concat.apply([],a))}};S.alwaysInRange=function(a,b){for(var c=1,d=a+1;c<d;){var e=
c++;if(!eb.matchRange(e,b))return!1}return!0};S.checkFunctor=function(a,b){switch(b[1]){case 0:var c=b[3];return S.alwaysInRange(a,c)?[za.InfiniteReroll(a,c)]:[];case 1:return c=b[3],S.alwaysInRange(a,c)?[za.InfiniteReroll(a,c)]:[];default:return[]}};S.validate=function(a){return oa.fromArray(S.validateExpr(a))};var za={__ename__:["dr","ValidationMessage"],__constructs__:"InsufficientSides EmptySet InfiniteReroll TooManyDrops TooManyKeeps DropOrKeepShouldBePositive".split(" "),InsufficientSides:function(a){a=
["InsufficientSides",0,a];a.__enum__=za;return a},EmptySet:["EmptySet",1]};za.EmptySet.__enum__=za;za.InfiniteReroll=function(a,b){var c=["InfiniteReroll",2,a,b];c.__enum__=za;return c};za.TooManyDrops=function(a,b){var c=["TooManyDrops",3,a,b];c.__enum__=za;return c};za.TooManyKeeps=function(a,b){var c=["TooManyKeeps",4,a,b];c.__enum__=za;return c};za.DropOrKeepShouldBePositive=["DropOrKeepShouldBePositive",5];za.DropOrKeepShouldBePositive.__enum__=za;var g=function(){};g.__name__=["parsihax","Parser"];
g.index=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return{status:!0,index:c,value:c,furthest:-1,expected:[]}};return a};g.letter=function(){return g.as(g.regexp(new Y("[a-z]","i")),"a letter")};g.letters=function(){return g.regexp(new Y("[a-z]*","i"))};g.digit=function(){return g.as(g.regexp(new Y("[0-9]","")),"a digit")};g.digits=function(){return g.regexp(new Y("[0-9]*",""))};g.whitespace=function(){return g.as(g.regexp(new Y("\\s+","")),"whitespace")};g.optWhitespace=function(){return g.regexp(new Y("\\s*",
""))};g.any=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return c>=a.length?{status:!1,index:-1,value:null,furthest:c,expected:["any character"]}:{status:!0,index:c+1,value:a.charAt(c),furthest:-1,expected:[]}};return a};g.all=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return{status:!0,index:a.length,value:a.substring(c),furthest:-1,expected:[]}};return a};g.eof=function(){var a=Array(1);a[0]=function(a,c){null==c&&(c=0);return c<a.length?{status:!1,index:-1,value:null,
furthest:c,expected:["EOF"]}:{status:!0,index:c,value:null,furthest:-1,expected:[]}};return a};g.string=function(a){var b=a.length,c="'"+a+"'",d=Array(1);d[0]=function(d,f){null==f&&(f=0);var e=d.substring(f,f+b);return e==a?{status:!0,index:f+b,value:e,furthest:-1,expected:[]}:{status:!1,index:-1,value:null,furthest:f,expected:[c]}};return d};g["char"]=function(a){return g.as(g.test(function(b){return a==b}),"'"+a+"'")};g.oneOf=function(a){return g.test(function(b){return 0<=a.indexOf(b)})};g.noneOf=
function(a){return g.test(function(b){return 0>a.indexOf(b)})};g.regexp=function(a,b){null==b&&(b=0);var c=H.string(a),d=Array(1);d[0]=function(d,f){null==f&&(f=0);var e=d.substring(f);if(a.match(e)){var e=a.matched(b),t=a.matchedPos();if(null!=e&&0==t.pos)return{status:!0,index:f+t.len,value:e,furthest:-1,expected:[]}}return{status:!1,index:-1,value:null,furthest:f,expected:[c]}};return d};g.succeed=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);return{status:!0,index:d,value:a,furthest:-1,
expected:[]}};return b};g.fail=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);return{status:!1,index:-1,value:null,furthest:d,expected:[a]}};return b};g.empty=function(){return g.fail("empty")};g.seq=function(a){if(0==a.length)return g.fail("sequence of parsers");var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=null,f=[],h=0;h<a.length;){var t=a[h];++h;c=La.mergeReplies(t[0](b,d),c);if(!c.status)return c;f.push(c.value);d=c.index}return La.mergeReplies({status:!0,index:d,value:f,
furthest:-1,expected:[]},c)};return b};g.alt=function(a){if(0==a.length)return g.fail("at least one alt");var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=null,f=0;f<a.length;){var h=a[f];++f;c=La.mergeReplies(h[0](b,d),c);if(c.status)break}return c};return b};g.sepBy=function(a,b){return g.or(g.sepBy1(a,b),g.succeed([]))};g.sepBy1=function(a,b){var c=g.many(g.then(b,a));return g.flatMap(a,function(a){return g.map(c,function(b){return[a].concat(b)})})};g.test=function(a){var b=Array(1);
b[0]=function(b,d){null==d&&(d=0);var c=b.charAt(d);return d<b.length&&a(c)?{status:!0,index:d+1,value:c,furthest:-1,expected:[]}:{status:!1,index:-1,value:null,furthest:d,expected:["a character matching "+H.string(a)]}};return b};g.takeWhile=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=d;;){var f;c<b.length?(f=b.charAt(c),f=a(f)):f=!1;if(!f)break;++c}return{status:!0,index:c,value:b.substring(d,c),furthest:-1,expected:[]}};return b};g.or=function(a,b){return g.alt([a,b])};
g.flatMap=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a[0](c,e);if(!d.status)return d;var h=b(d.value);return La.mergeReplies(h[0](c,d.index),d)};return c};g.then=function(a,b){return g.flatMap(a,function(a){return b})};g.map=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a[0](c,e);return d.status?La.mergeReplies({status:!0,index:d.index,value:b(d.value),furthest:-1,expected:[]},d):d};return c};g.result=function(a,b){return g.map(a,function(a){return b})};
g.skip=function(a,b){return g.flatMap(a,function(a){return g.result(b,a)})};g.many=function(a){var b=Array(1);b[0]=function(b,d){null==d&&(d=0);for(var c=[],f=null;;)if(f=La.mergeReplies(a[0](b,d),f),f.status)d=f.index,c.push(f.value);else return La.mergeReplies({status:!0,index:d,value:c,furthest:-1,expected:[]},f)};return b};g.many1=function(a){return g.atLeast(a,1)};g.times=function(a,b,c){null==c&&(c=b);var d=Array(1);d[0]=function(d,f){null==f&&(f=0);for(var e=[],t,g=null,k=0;k<b;)if(k++,t=a[0](d,
f),g=La.mergeReplies(t,g),t.status)f=t.index,e.push(t.value);else return g;for(var k=0,l=c;k<l;)if(k++,t=a[0](d,f),g=La.mergeReplies(t,g),t.status)f=t.index,e.push(t.value);else break;return La.mergeReplies({status:!0,index:f,value:e,furthest:-1,expected:[]},g)};return d};g.atMost=function(a,b){return g.times(a,0,b)};g.atLeast=function(a,b){return g.map(g.seq([g.times(a,b),g.many(a)]),function(a){return a[0].concat(a[1])})};g.as=function(a,b){var c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=
a[0](c,e);d.status||(d.expected=[b]);return d};return c};g.lazy=function(a){var b=null,c=Array(1);c[0]=function(c,e){null==e&&(e=0);var d=a()[0];return(b[0]=d)(c,e)};return b=c};var La=function(){};La.__name__=["parsihax","ParseUtil"];La.formatError=function(a,b){var c=1==a.expected.length?a.expected[0]:"one of "+a.expected.join(", "),d=a.furthest,e=b.substring(0,d).split("\n"),f=e.length,e=e[e.length-1].length+1;if(d==b.length)d=", got the end of the stream";else var h=12<b.length-d?"...'":"'",d=
" at line "+f+" column "+e+", got "+(0<d?"'...":"'")+b.substring(d,d+12)+h;return"expected "+c+d};La.makeSuccess=function(a,b){return{status:!0,index:a,value:b,furthest:-1,expected:[]}};La.makeFailure=function(a,b){return{status:!1,index:-1,value:null,furthest:a,expected:[b]}};La.mergeReplies=function(a,b){if(null==b||a.furthest>b.furthest)return a;var c=a.furthest==b.furthest?La.unsafeUnion(a.expected,b.expected):b.expected;return{status:a.status,index:a.index,value:a.value,furthest:b.furthest,expected:c}};
La.unsafeUnion=function(a,b){if(0==a.length)return b;if(0==b.length)return a;var c=a.concat(b);c.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a<b?-1:a>b?1:0});return c};var R=function(){};R.__name__=["js","Boot"];R.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};R.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"",c=c+R.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(var d=0,e=b.customParams;d<e.length;){var f=
e[d];++d;c+=","+R.__string_rec(f,"")}var h;"undefined"!=typeof document?(h=document.getElementById("haxe:trace"),d=null!=h):d=!1;d?h.innerHTML+=R.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};R.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=R.__nativeClassName(a);return null!=a?R.__resolveNativeClass(a):null};R.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=
typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+R.__string_rec(a[f],b)):c+R.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+R.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(h){return fa.lastException=h,"???"}if(null!=d&&d!=Object.toString&&
"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+R.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};R.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=
0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||R.__interfLoop(f,b))return!0}return R.__interfLoop(a.__super__,b)};R.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case Yc:return"boolean"==typeof a;case hd:return!0;case Zc:return"number"==typeof a;case id:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||R.__interfLoop(R.getClass(a),b))return!0}else{if("object"==
typeof b&&R.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==$c&&null!=a.__name__||b==ad&&null!=a.__ename__?!0:a.__enum__==b}};R.__nativeClassName=function(a){a=R.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};R.__isNativeObj=function(a){return null!=R.__nativeClassName(a)};R.__resolveNativeClass=function(a){return Z[a]};var Ib={__ename__:["dr","MoreLess"],__constructs__:["More","Less"],More:["More",0]};Ib.More.__enum__=Ib;Ib.Less=["Less",
1];Ib.Less.__enum__=Ib;var l=function(){};l.__name__=["thx","Arrays"];l.append=function(a,b){a.push(b);return a};l.appendIf=function(a,b,c){b&&a.push(c);return a};l.applyIndexes=function(a,b,c){null==c&&(c=!1);if(b.length!=a.length)throw new ba("`Arrays.applyIndexes` can only be applied to two arrays with the same length",null,{fileName:"Arrays.hx",lineNumber:55,className:"thx.Arrays",methodName:"applyIndexes"});var d=[];if(c){c=ha.createInt();for(var e=0,f=a.length;e<f;){for(var h=e++,t=b[h];c.h.hasOwnProperty(t);)++t;
ha.add(c,t);d[t]=a[h]}}else for(c=0,e=a.length;c<e;)f=c++,d[b[f]]=a[f];return d};l.monoid=function(){return{zero:[],append:function(a,b){return a.concat(b)}}};l.after=function(a,b){return a.slice(zb.indexOf(a,b)+1)};l.atIndex=function(a,b){return 0<=b&&b<a.length?B.Some(a[b]):B.None};l.getOption=function(a,b){var c=a[b];return null==c?B.None:B.Some(c)};l.each=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(a[e])}};l.eachi=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(a[e],e)}};l.all=
function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(!b(a[e]))return!1}return!0};l.any=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return!0}return!1};l.at=function(a,b){return b.map(function(b){return a[b]})};l.before=function(a,b){return a.slice(0,zb.indexOf(a,b))};l.commonsFromStart=function(a,b,c){null==c&&(c=Aa.equality);var d=0,e=0;for(b=l.zip(a,b);e<b.length;){var f=b[e];++e;if(c(f._0,f._1))++d;else break}return a.slice(0,d)};l.compact=function(a){return a.filter(function(a){return null!=
a})};l.compare=function(a,b){var c=P.compare(a.length,b.length);if(0!=c)return c;for(var d=0,e=a.length;d<e;)if(c=d++,c=xa.compare(a[c],b[c]),0!=c)return c;return 0};l.contains=function(a,b,c){if(null==c)return 0<=zb.indexOf(a,b);for(var d=0,e=a.length;d<e;){var f=d++;if(c(a[f],b))return!0}return!1};l.containsAll=function(a,b,c){for(b=n(b)();b.hasNext();){var d=b.next();if(!l.contains(a,d,c))return!1}return!0};l.containsAny=function(a,b,c){for(b=n(b)();b.hasNext();){var d=b.next();if(l.contains(a,
d,c))return!0}return!1};l.create=function(a,b){for(var c=0<a?Array(a):[],d=0;d<a;){var e=d++;c[e]=b}return c};l.fromItem=function(a){return[a]};l.cross=function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;for(var f=0;f<b.length;){var h=b[f];++f;c.push([e,h])}}return c};l.crossMulti=function(a){a=a.slice();for(var b=a.shift().map(function(a){return[a]});0<a.length;)for(var c=a.shift(),d=b,b=[],e=0;e<c.length;){var f=c[e];++e;for(var h=0;h<d.length;){var t=d[h];++h;t=t.slice();t.push(f);b.push(t)}}return b};
l.distinct=function(a,b){var c=[];if(1>=a.length)return a.slice();null==b&&(b=Aa.equality);for(var d=0;d<a.length;){var e=[a[d]];++d;l.any(c,function(a){return function(c){return b(c,a[0])}}(e))||c.push(e[0])}return c};l.eachPair=function(a,b){for(var c=0,d=a.length;c<d;)for(var e=c++,f=e,h=a.length;f<h;){var t=f++;if(!b(a[e],a[t]))return}};l.equals=function(a,b,c){if(null==a||null==b||a.length!=b.length)return!1;null==c&&(c=Aa.equality);for(var d=0,e=a.length;d<e;){var f=d++;if(!c(a[f],b[f]))return!1}return!0};
l.extract=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return a.splice(e,1)[0]}return null};l.filterNull=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;null!=d&&b.push(d)}return b};l.filterOption=function(a){return l.reduce(a,function(a,c){switch(c[1]){case 0:a.push(c[2])}return a},[])};l.flattenOptions=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;switch(d[1]){case 0:b.push(d[2]);break;case 1:return B.None}}return B.Some(b)};l.find=function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;if(b(d))return d}return null};l.findi=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e],e))return a[e]}return null};l.findiOption=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e],e))return B.Some(a[e])}return B.None};l.findOption=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;if(b(d))return B.Some(d)}return B.None};l.findMap=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=b(d);if(!p.isNone(d))return d}return B.None};l.filterMap=
function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;e=b(e);switch(e[1]){case 0:c.push(e[2])}}return c};l.findSome=function(a){for(var b=0;b<a.length;){var c=a[b];++b;if(!p.isNone(c))return c}return B.None};l.findIndex=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(b(a[e]))return e}return-1};l.findLast=function(a,b){for(var c=a.length,d,e=0;e<c;)if(d=e++,d=c-d-1,b(a[d]))return a[d];return null};l.first=function(a){return a[0]};l.firstOption=function(a){a=a[0];return null==a?B.None:
B.Some(a)};l.flatMap=function(a,b){var c=a.map(b);return Array.prototype.concat.apply([],c)};l.flatten=function(a){return Array.prototype.concat.apply([],a)};l.from=function(a,b){return a.slice(zb.indexOf(a,b))};l.groupByAppend=function(a,b,c){for(var d=0,e=a.length;d<e;){var f=d++,f=a[f],h=b(f),t=c.get(h);null==t?c.set(h,[f]):t.push(f)}return c};l.spanByIndex=function(a,b){for(var c=[],d=null,e=-1,f=0,h=a.length;f<h;){var t=f++,g=b(t);if(null==g)throw new ba("spanKey function returned null for index "+
t,null,{fileName:"Arrays.hx",lineNumber:633,className:"thx.Arrays",methodName:"spanByIndex"});d==g?c[e].push(a[t]):(d=g,++e,c.push([a[t]]))}return c};l.hasElements=function(a){return null!=a?0<a.length:!1};l.head=function(a){return a[0]};l.ifEmpty=function(a,b){return null!=a&&0!=a.length?a:b};l.initial=function(a){return a.slice(0,a.length-1)};l.intersperse=function(a,b){return l.reducei(a,function(a,b,e){a[2*e]=b;return a},l.create(2*a.length-1,b))};l.interspersef=function(a,b){if(0==a.length)return[];
for(var c=[a[0]],d=1,e=a.length;d<e;){var f=d++;c.push(b());c.push(a[f])}return c};l.isEmpty=function(a){return null!=a?0==a.length:!0};l.last=function(a){return a[a.length-1]};l.lastOption=function(a){a=a[a.length-1];return null==a?B.None:B.Some(a)};l.map=function(a,b){for(var c=[],d=0,e=a.length;d<e;){var f=d++;c.push(b(a[f]))}return c};l.mapi=function(a,b){for(var c=[],d=0,e=a.length;d<e;){var f=d++;c.push(b(a[f],f))}return c};l.mapRight=function(a,b){for(var c=a.length,d=[];0<=--c;)d.push(b(a[c]));
return d};l.order=function(a,b){var c=a.slice();c.sort(b);return c};l.pull=function(a,b,c){for(var d=0;d<b.length;){var e=b[d];++d;l.removeAll(a,e,c)}};l.pushIf=function(a,b,c){b&&a.push(c);return a};l.rank=function(a,b,c){null==c&&(c=!0);for(var d=[],e=0,f=a.length;e<f;){var h=e++;d.push({_0:a[h],_1:h})}d.sort(function(a,c){return b(a._0,c._0)});if(c){var t=ha.createInt();return l.reducei(d,function(a,c,e){for(e=0<e&&0==b(d[e-1]._0,c._0)?a[d[e-1]._1]:e;t.h.hasOwnProperty(e);)++e;ha.add(t,e);a[c._1]=
e;return a},[])}return l.reducei(d,function(a,c,e){a[c._1]=0<e&&0==b(d[e-1]._0,c._0)?a[d[e-1]._1]:e;return a},[])};l.reduce=function(a,b,c){for(var d=0;d<a.length;){var e=a[d];++d;c=b(c,e)}return c};l.foldLeft=function(a,b,c){return l.reduce(a,c,b)};l.foldLeft1=function(a,b){var c=l.dropLeft(a,1),d=a[0];return null==d?B.None:B.Some(l.reduce(c,b,d))};l.foldLeftEither=function(a,b,c){b=Q.Right(b);for(var d=0;d<a.length;){var e=a[d];++d;switch(b[1]){case 0:return b;case 1:b=c(b[2],e)}}return b};l.foldMap=
function(a,b,c){return l.reduce(a.map(b),function(a,b){return Ab.append(c,a,b)},Ab.get_zero(c))};l.fold=function(a,b){return l.foldMap(a,Aa.identity,b)};l.nel=function(a){return oa.fromArray(a)};l.foldS=function(a,b){return p.map(l.nel(a),function(a){return oa.fold(a,b)})};l.resize=function(a,b,c){for(;a.length<b;)a.push(c);a.splice(b,a.length-b);return a};l.resized=function(a,b,c){a=a.slice();return l.resize(a,b,c)};l.reducei=function(a,b,c){for(var d=0,e=a.length;d<e;){var f=d++;c=b(c,a[f],f)}return c};
l.reduceRight=function(a,b,c){for(var d=a.length;0<=--d;)c=b(c,a[d]);return c};l.removeAll=function(a,b,c){null==c&&(c=Aa.equality);for(var d=a.length;0<=--d;)c(a[d],b)&&a.splice(d,1)};l.rest=function(a){return a.slice(1)};l.reversed=function(a){a=a.slice();a.reverse();return a};l.sample=function(a,b){var c=a.length;b<c||(b=c);for(var c=a.slice(),d=[],e=0,f=b;e<f;)e++,d.push(c.splice(H.random(c.length),1)[0]);return d};l.sampleOne=function(a){return a[H.random(a.length)]};l.string=function(a){return"["+
a.map(xa.string).join(", ")+"]"};l.shuffle=function(a){for(var b=P.range(a.length),c=[];0<b.length;){var d=H.random(b.length),e=b[d];b.splice(d,1);c.push(a[e])}return c};l.split=function(a,b){return l.splitBy(a,Math.ceil(a.length/b))};l.splitBy=function(a,b){var c=[],d=a.length;b<d||(b=d);for(var d=0,e=Math.ceil(a.length/b);d<e;){var f=d++;c.push(a.slice(f*b,(f+1)*b))}return c};l.splitByPad=function(a,b,c){for(a=l.splitBy(a,b);a[a.length-1].length<b;)a[a.length-1].push(c);return a};l.tail=function(a){return a.slice(1)};
l.take=function(a,b){return a.slice(0,b)};l.takeLast=function(a,b){return a.slice(a.length-b)};l.traverseOption=function(a,b){return l.reduce(a,function(a,d){return p.ap(b(d),p.map(a,function(a){return function(b){a.push(b);return a}}))},B.Some([]))};l.traverseEither=function(a,b){return l.reduce(a,function(a,d){return ja.ap(b(d),ja.map(a,function(a){return function(b){a.push(b);return a}}))},Q.Right([]))};l.traverseValidation=function(a,b,c){return l.reduce(a,function(a,e){return F.ap(b(e),F.map(a,
function(a){return function(b){a.push(b);return a}}),c)},Q.Right([]))};l.traverseValidationIndexed=function(a,b,c){return l.reducei(a,function(a,e,f){return F.ap(b(e,f),F.map(a,function(a){return function(b){a.push(b);return a}}),c)},Q.Right([]))};l.rotate=function(a){for(var b=[],c=0,d=a[0].length;c<d;){var e=c++,f=[];b.push(f);for(var h=0,t=a.length;h<t;){var g=h++;f.push(a[g][e])}}return b};l.sliding2=function(a,b){if(2>a.length)return[];for(var c=[],d=0,e=a.length-1;d<e;){var f=d++;c.push(b(a[f],
a[f+1]))}return c};l.unzip=function(a){var b=[],c=[];a.map(function(a){b.push(a._0);c.push(a._1)});return{_0:b,_1:c}};l.unzip3=function(a){var b=[],c=[],d=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2)});return{_0:b,_1:c,_2:d}};l.unzip4=function(a){var b=[],c=[],d=[],e=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3)});return{_0:b,_1:c,_2:d,_3:e}};l.unzip5=function(a){var b=[],c=[],d=[],e=[],f=[];a.map(function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3);
f.push(a._4)});return{_0:b,_1:c,_2:d,_3:e,_4:f}};l.zip=function(a,b){for(var c=a.length,d=b.length,e=[],f=0,c=c<d?c:d;f<c;)d=f++,e.push({_0:a[d],_1:b[d]});return e};l.zip3=function(a,b,c){for(var d=[],e=0,f=Qa.min([a.length,b.length,c.length]);e<f;){var h=e++;d.push({_0:a[h],_1:b[h],_2:c[h]})}return d};l.zip4=function(a,b,c,d){for(var e=[],f=0,h=Qa.min([a.length,b.length,c.length,d.length]);f<h;){var t=f++;e.push({_0:a[t],_1:b[t],_2:c[t],_3:d[t]})}return e};l.zip5=function(a,b,c,d,e){for(var f=[],
h=0,t=Qa.min([a.length,b.length,c.length,d.length,e.length]);h<t;){var g=h++;f.push({_0:a[g],_1:b[g],_2:c[g],_3:d[g],_4:e[g]})}return f};l.zipAp=function(a,b){for(var c=[],d=0,e=a.length,f=b.length,e=e<f?e:f;d<e;)f=d++,c.push(b[f](a[f]));return c};l.zip2Ap=function(a,b,c){return l.zipAp(c,b.map(la.curry(a)))};l.zip3Ap=function(a,b,c,d){return l.zipAp(d,l.zip2Ap(function(b,c){return function(d){return a(b,c,d)}},b,c))};l.zip4Ap=function(a,b,c,d,e){return l.zipAp(e,l.zip3Ap(function(b,c,d){return function(e){return a(b,
c,d,e)}},b,c,d))};l.zip5Ap=function(a,b,c,d,e,f){return l.zipAp(f,l.zip4Ap(function(b,c,d,e){return function(f){return a(b,c,d,e,f)}},b,c,d,e))};l.withPrepend=function(a,b){return[b].concat(a)};l["with"]=function(a,b){return a.concat([b])};l.withSlice=function(a,b,c,d){null==d&&(d=0);return a.slice(0,c).concat(b).concat(a.slice(c+d))};l.withInsert=function(a,b,c){return a.slice(0,c).concat([b]).concat(a.slice(c))};l.maxBy=function(a,b){return 0==a.length?B.None:B.Some(l.reduce(a,function(a,d){return Jb.max(b,
a,d)},a[0]))};l.minBy=function(a,b){return 0==a.length?B.None:B.Some(l.reduce(a,function(a,d){return Jb.min(b,a,d)},a[0]))};l.toMap=function(a,b){for(var c=na.Tip,d=[],e=0,f=a.length;e<f;){var h=e++,h=a[h];p.isNone(I.lookup(c,h._0,b))?c=I.insert(c,h._0,h._1,b):d.push(h._0)}return p.toFailure(oa.fromArray(d),c)};l.toStringMap=function(a){return l.reduce(a,function(a,c){var b=c._0,e=c._1;null!=k[b]?a.setReserved(b,e):a.h[b]=e;return a},new x)};l.partition=function(a,b){return l.reduce(a,function(a,
d){b(d)?a._0.push(d):a._1.push(d);return a},{_0:[],_1:[]})};l.partitionWhile=function(a,b){var c=!0;return l.reduce(a,function(a,e){c?b(e)?a._0.push(e):(c=!1,a._1.push(e)):a._1.push(e);return a},{_0:[],_1:[]})};l.dropLeft=function(a,b){return b>=a.length?[]:a.slice(b)};l.dropRight=function(a,b){return b>=a.length?[]:a.slice(0,a.length-b)};l.dropWhile=function(a,b){for(var c=[].concat(a),d=0;d<a.length;){var e=a[d];++d;if(b(e))c.shift();else break}return c};l.pad=function(a,b,c){var d=[],e=0;for(b-=
a.length;e<b;)e++,d.push(c);return a.concat(d)};l.fill=function(a,b){return a.map(function(a){return null==a?b:a})};var m=function(){};m.__name__=["dr","DiceParser"];m.parse=function(a){var b=m.grammar[0](a);if(1==b.status)return Q.Right(b.value);a=Bb.fromResult(b,a);return Q.Left(a)};m.unsafeParse=function(a){a=m.parse(a);switch(a[1]){case 0:throw new ca(a[2]);case 1:return a[2]}};m.normalize=function(a){return S.toString(m.unsafeParse(a))};m.dirValue=function(a,b){return g.then(g.then(a,m.OWS),
g.alt([g.flatMap(m.lowOrHigh,function(a){return g.then(m.OWS,g.map(m.positive,function(b){return{dir:a,value:b}}))}),g.map(m.positive,function(a){return{dir:b,value:a}})]))};m.diceFunctorConst=function(a,b){return g.alt([g.then(g.then(g.string(a),m.OWS),g.flatMap(m.functorTimes,function(a){return g.then(m.OWS,g.map(m.range,function(c){return b(a,c)}))}))])};m.diceReduce=function(a){return g.or(g.flatMap(a,function(a){return g.then(m.OWS,g.map(g.alt([g.result(m.SUM,Da.Sum),g.result(m.AVERAGE,Da.Average),
g.result(m.MEDIAN,Da.Median),g.result(m.MIN,Da.Min),g.result(m.MAX,Da.Max)]),function(b){return Ka.DiceReduce(a,b)}))}),g.map(a,function(a){return Ka.DiceReduce(a,Da.Sum)}))};m.commaSeparated=function(a){return g.then(g.then(m.OPEN_SET_BRACKET,m.OWS),g.skip(g.or(g.sepBy1(a,g.then(g.then(m.OWS,m.COMMA),m.OWS)),g.succeed([])),g.then(m.OWS,m.CLOSE_SET_BRACKET)))};var Bb=function(a,b,c){this.expected=a;this.furthest=b;this.input=c};Bb.__name__=["dr","DiceParseError"];Bb.fromResult=function(a,b){var c=
l.distinct(a.expected.map(Bb.expectedToString));return new Bb(c,a.furthest,b)};Bb.expectedToString=function(a){a=H.string(a);E.startsWith(a,"{\n\tr : ")&&(a=r.trimCharsRight(r.trimCharsLeft(a,"{ \n\tr:"),"\n\t }"));return a};Bb.prototype={expected:null,furthest:null,input:null,positionToString:function(){return this.furthest>=this.input.length?B.None:B.Some(this.input.substring(this.furthest))},toString:function(){var a=this.positionToString(),a=p.getOrElse(p.map(a,function(a){return"\u2026"+r.ellipsis(a,
20)}),"end of file");return"expected "+this.expected.join(", ")+" but got "+a},__class__:Bb};var Ma={__ename__:["dr","RollResult"],__constructs__:["OneResult","LiteralResult","DiceReduceResult","BinaryOpResult","UnaryOpResult"],OneResult:function(a){a=["OneResult",0,a];a.__enum__=Ma;return a},LiteralResult:function(a,b){var c=["LiteralResult",1,a,b];c.__enum__=Ma;return c},DiceReduceResult:function(a,b,c){a=["DiceReduceResult",2,a,b,c];a.__enum__=Ma;return a},BinaryOpResult:function(a,b,c,d){a=["BinaryOpResult",
3,a,b,c,d];a.__enum__=Ma;return a},UnaryOpResult:function(a,b,c){a=["UnaryOpResult",4,a,b,c];a.__enum__=Ma;return a}},Kb={__ename__:["dr","DiceReduceableResult"],__constructs__:["DiceExpressionsResult","DiceFilterableResult","DiceMapeableResult"],DiceExpressionsResult:function(a){a=["DiceExpressionsResult",0,a];a.__enum__=Kb;return a},DiceFilterableResult:function(a,b){var c=["DiceFilterableResult",1,a,b];c.__enum__=Kb;return c},DiceMapeableResult:function(a,b){var c=["DiceMapeableResult",2,a,b];
c.__enum__=Kb;return c}},Lb={__ename__:["dr","DiceResultMapped"],__constructs__:["Rerolled","Exploded","Normal"],Rerolled:function(a){a=["Rerolled",0,a];a.__enum__=Lb;return a},Exploded:function(a){a=["Exploded",1,a];a.__enum__=Lb;return a},Normal:function(a){a=["Normal",2,a];a.__enum__=Lb;return a}},Ic={__ename__:["dr","DieResultFilter"],__constructs__:["Keep","Discard"],Keep:function(a){a=["Keep",0,a];a.__enum__=Ic;return a},Discard:function(a){a=["Discard",1,a];a.__enum__=Ic;return a}},Ja=function(){};
Ja.__name__=["dr","RollResultExtensions"];Ja.getResult=function(a){switch(a[1]){case 0:return a[2].result;case 1:return a[3];case 2:return a[4];case 3:return a[5];case 4:return a[4]}};var eb=function(a){this.dieRoll=a};eb.__name__=["dr","Roller"];eb.matchRange=function(a,b){switch(b[1]){case 0:return 0==P.compare(a,b[2]);case 1:var c=b[3];return 0<=P.compare(a,b[2])?0>=P.compare(a,c):!1;case 2:return 0<=P.compare(a,b[2]);case 3:return 0>=P.compare(a,b[2]);case 4:return l.reduce(b[2],function(b,c){return b?
!0:eb.matchRange(a,c)},!1)}};eb.filterf=function(a){switch(a[1]){case 0:switch(a[2][1]){case 0:var b=a[3];return function(a,c){return a>=b};case 1:var c=a[3];return function(a,b){return a<b-c}}break;case 1:switch(a[2][1]){case 0:var d=a[3];return function(a,b){return a<d};case 1:var e=a[3];return function(a,b){return a>=b-e}}}};eb.prototype={dieRoll:null,roll:function(a){var b=this;switch(a[1]){case 0:return a=a[2],Ma.OneResult({result:this.dieRoll(a),sides:a});case 1:return a=a[2],Ma.LiteralResult(a,
a);case 2:switch(a[2][1]){case 0:var c=a[3];a=a[2][2].map(M(this,this.roll));var d=this.reduceRolls(a,c);return Ma.DiceReduceResult(Kb.DiceExpressionsResult(a),c,d);case 1:switch(a[2][2][1]){case 0:c=a[3];d=a[2][3];a=a[2][2][2].map(function(a){return b.roll(Ka.Die(a))});a=this.filterRolls(a,d);var e=this.keepFilteredRolls(a),e=this.reduceRolls(e,c);return Ma.DiceReduceResult(Kb.DiceFilterableResult(a,d),c,e);case 1:return c=a[3],d=a[2][3],a=a[2][2][2].map(M(this,this.roll)),a=this.filterRolls(a,d),
e=this.keepFilteredRolls(a),e=this.reduceRolls(e,c),Ma.DiceReduceResult(Kb.DiceFilterableResult(a,d),c,e)}break;case 2:return c=a[3],d=a[2][3],a=a[2][2].map(function(a){return{result:b.dieRoll(a),sides:a}}),a=this.mapRolls(a,d),e=this.keepMappedRolls(a),e=this.reduceRolls(e.map(Ma.OneResult),c),Ma.DiceReduceResult(Kb.DiceMapeableResult(a,d),c,e)}break;case 3:d=a[4];c=a[2];a=this.roll(a[3]);d=this.roll(d);switch(c[1]){case 0:return Ma.BinaryOpResult(Fa.Sum,a,d,Ja.getResult(a)+Ja.getResult(d));case 1:return Ma.BinaryOpResult(Fa.Difference,
a,d,Ja.getResult(a)-Ja.getResult(d));case 2:return Ma.BinaryOpResult(Fa.Division,a,d,Math.round(Ja.getResult(a)/Ja.getResult(d)));case 3:return Ma.BinaryOpResult(Fa.Multiplication,a,d,Ja.getResult(a)*Ja.getResult(d))}break;case 4:return a=this.roll(a[3]),Ma.UnaryOpResult(Hc.Negate,a,-Ja.getResult(a))}},mapRolls:function(a,b){switch(b[1]){case 0:switch(b[2][1]){case 0:var c=b[3],d=M(this,this.explodeRoll);return a.map(function(a){return d(a,-1,c)});case 1:var e=b[3],f=b[2][2],h=M(this,this.explodeRoll);
return a.map(function(a){return h(a,f,e)})}break;case 1:switch(b[2][1]){case 0:var t=b[3],g=M(this,this.rerollRoll);return a.map(function(a){return g(a,-1,t)});case 1:var k=b[3],l=b[2][2],n=M(this,this.rerollRoll);return a.map(function(a){return n(a,l,k)})}}},explodeRoll:function(a,b,c){a=this.rollRange(a,b,c);return 1==a.length?Lb.Normal(a[0]):Lb.Exploded(a)},rerollRoll:function(a,b,c){a=this.rollRange(a,b,c);return 1==a.length?Lb.Normal(a[0]):Lb.Rerolled(a)},rollRange:function(a,b,c){for(var d=
[a];0!=b&&eb.matchRange(a.result,c);)a={result:this.dieRoll(a.sides),sides:a.sides},d.push(a),--b;return d},keepMappedRolls:function(a){a=a.map(function(a){switch(a[1]){case 0:return a=a[2],[a[a.length-1]];case 1:return a[2];case 2:return[a[2]]}});return Array.prototype.concat.apply([],a)},filterRolls:function(a,b){for(var c=l.rank(a,function(a,b){return P.compare(Ja.getResult(a),Ja.getResult(b))},!0),d=eb.filterf(b),e=[],f=0,h=a.length;f<h;){var t=f++,g=a[t];e.push(d(c[t],c.length)?Ic.Keep(g):Ic.Discard(g))}return e},
keepFilteredRolls:function(a){return l.filterMap(a,function(a){switch(a[1]){case 0:return B.Some(a[2]);case 1:return B.None}})},reduceRolls:function(a,b){return this.reduceResults(this.getRollResults(a),b)},reduceResults:function(a,b){switch(b[1]){case 0:return l.reduce(a,function(a,b){return a+b},0);case 1:return Math.round(Qa.average(a));case 2:return Qa.min(a);case 3:return Qa.max(a);case 4:var c=l.order(a,P.compare),d=c.length;return 0==d%2?Math.round((c[Math.floor(d/2)]+c[Math.floor(d/2)])/2):
c[Math.floor(d/2)]}},getRollResults:function(a){return a.map(Ja.getResult)},__class__:eb};var Na={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:["CFunction",0]};Na.CFunction.__enum__=Na;Na.Module=function(a){a=["Module",1,a];a.__enum__=Na;return a};Na.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=Na;return a};Na.Method=function(a,b){var c=["Method",3,a,b];c.__enum__=Na;return c};Na.LocalFunction=function(a){a=["LocalFunction",
4,a];a.__enum__=Na;return a};var fa=function(){};fa.__name__=["haxe","CallStack"];fa.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var c=[],d=0;d<b.length;){var h=b[d];++d;null!=fa.wrapCallSite&&(h=fa.wrapCallSite(h));var t=null,g=h.getFunctionName();if(null!=g){var k=g.lastIndexOf(".");0<=k&&(t=L.substr(g,0,k),g=L.substr(g,k+1,null),t=Na.Method(t,g))}c.push(Na.FilePos(t,h.getFileName(),h.getLineNumber()))}return c};a=fa.makeStack(a.stack);
Error.prepareStackTrace=b;return a};fa.callStack=function(){try{throw Error();}catch(b){fa.lastException=b;b instanceof ca&&(b=b.val);var a=fa.getStack(b);a.shift();return a}};fa.exceptionStack=function(){return fa.getStack(fa.lastException)};fa.toString=function(a){for(var b=new cc,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";fa.itemToString(b,d)}return b.b};fa.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var c=b[2];a.b+="module ";a.b+=null==c?"null":""+
c;break;case 2:var c=b[4],d=b[3],e=b[2];null!=e&&(fa.itemToString(a,e),a.b+=" (");a.b+=null==d?"null":""+d;a.b+=" line ";a.b+=null==c?"null":""+c;null!=e&&(a.b+=")");break;case 3:c=b[3];d=b[2];a.b+=null==d?"null":""+d;a.b+=".";a.b+=null==c?"null":""+c;break;case 4:c=b[2],a.b+="local function #",a.b+=null==c?"null":""+c}};fa.makeStack=function(a){if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new Y("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",
""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){var e=c.matched(1).split("."),f=e.pop(),h=c.matched(2),t=H.parseInt(c.matched(3));b.push(Na.FilePos("Anonymous function"==f?Na.LocalFunction():"Global code"==f?null:Na.Method(e.join("."),f),h,t))}else b.push(Na.Module(E.trim(e)))}return b}return a};var kb=function(){};kb.__name__=["haxe","IMap"];kb.prototype={get:null,set:null,exists:null,remove:null,keys:null,iterator:null,__class__:kb};var Ra={__name__:["haxe","_Int32","Int32_Impl_"],ucompare:function(a,
b){return 0>a?0>b?~b-~a|0:1:0>b?-1:a-b|0}},jd={__name__:["haxe","_Int64","Int64_Impl_"],divMod:function(a,b){if(0==b.high)switch(b.low){case 0:throw new ca("divide by zero");case 1:var c=new ma(a.high,a.low),d=new ma(0,0);return{quotient:c,modulus:d}}d=0>a.high!=0>b.high;if(0>a.high){var c=~a.high,e=-a.low;0==e&&(c++,c|=0);c=new ma(c,e)}else c=new ma(a.high,a.low);if(0>b.high){var e=~b.high,f=-b.low;0==f&&(e++,e|=0);b=new ma(e,f)}e=new ma(0,0);for(f=new ma(0,1);!(0>b.high);){var h=Ra.ucompare(b.high,
c.high),h=0!=h?h:Ra.ucompare(b.low,c.low),t=1,t=t&63;b=0==t?new ma(b.high,b.low):32>t?new ma(b.high<<t|b.low>>>32-t,b.low<<t):new ma(b.low<<t-32,0);t=1;t&=63;f=0==t?new ma(f.high,f.low):32>t?new ma(f.high<<t|f.low>>>32-t,f.low<<t):new ma(f.low<<t-32,0);if(0<=h)break}for(;;){h=new ma(0,0);if(f.high==h.high&&f.low==h.low)break;h=Ra.ucompare(c.high,b.high);0<=(0!=h?h:Ra.ucompare(c.low,b.low))&&(e=new ma(e.high|f.high,e.low|f.low),h=c.high-b.high|0,t=c.low-b.low|0,0>Ra.ucompare(c.low,b.low)&&(h--,h|=
0),c=new ma(h,t));h=1;h&=63;f=0==h?new ma(f.high,f.low):32>h?new ma(f.high>>>h,f.high<<32-h|f.low>>>h):new ma(0,f.high>>>h-32);h=1;h&=63;b=0==h?new ma(b.high,b.low):32>h?new ma(b.high>>>h,b.high<<32-h|b.low>>>h):new ma(0,b.high>>>h-32)}d&&(d=~e.high,e=-e.low,0==e&&(d++,d|=0),e=new ma(d,e));0>a.high&&(d=~c.high,c=-c.low,0==c&&(d++,d|=0),c=new ma(d,c));return{quotient:e,modulus:c}}},ma=function(a,b){this.high=a;this.low=b};ma.__name__=["haxe","_Int64","___Int64"];ma.prototype={high:null,low:null,__class__:ma};
var $b=function(){};$b.__name__=["haxe","Log"];$b.trace=function(a,b){R.__trace(a,b)};var Mb=function(){};Mb.__name__=["haxe","Utf8"];Mb.compare=function(a,b){return a>b?1:a==b?0:-1};var Vc=function(){};Vc.__name__=["haxe","crypto","Base64"];var ec=function(){};ec.__name__=["haxe","ds","BalancedTree"];ec.prototype={root:null,set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},
remove:function(a){try{return this.root=this.removeLoop(a,this.root),!0}catch(b){fa.lastException=b;b instanceof ca&&(b=b.val);if(R.__instanceof(b,String))return!1;throw b;}},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return L.iter(a)},keys:function(){var a=[];this.keysLoop(this.root,a);return L.iter(a)},setLoop:function(a,b,c){if(null==c)return new Oa(null,
a,b,null);var d=this.compare(a,c.key);if(0==d)return new Oa(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return a=this.setLoop(a,b,c.left),this.balance(a,c.key,c.value,c.right);a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},removeLoop:function(a,b){if(null==b)throw new ca("Not_found");var c=this.compare(a,b.key);return 0==c?this.merge(b.left,b.right):0>c?this.balance(this.removeLoop(a,b.left),b.key,b.value,b.right):this.balance(b.left,b.key,b.value,this.removeLoop(a,b.right))},
iteratorLoop:function(a,b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},keysLoop:function(a,b){null!=a&&(this.keysLoop(a.left,b),b.push(a.key),this.keysLoop(a.right,b))},merge:function(a,b){if(null==a)return b;if(null==b)return a;var c=this.minBinding(b);return this.balance(a,c.key,c.value,this.removeMinBinding(b))},minBinding:function(a){if(null==a)throw new ca("Not_found");return null==a.left?a:this.minBinding(a.left)},removeMinBinding:function(a){return null==
a.left?a.right:this.balance(this.removeMinBinding(a.left),a.key,a.value,a.right)},balance:function(a,b,c,d){var e=null==a?0:a._height,f=null==d?0:d._height;return e>f+2?(e=a.left,f=a.right,(null==e?0:e._height)>=(null==f?0:f._height)?new Oa(a.left,a.key,a.value,new Oa(a.right,b,c,d)):new Oa(new Oa(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new Oa(a.right.right,b,c,d))):f>e+2?(e=d.right,f=d.left,(null==e?0:e._height)>(null==f?0:f._height)?new Oa(new Oa(a,b,c,d.left),d.key,d.value,
d.right):new Oa(new Oa(a,b,c,d.left.left),d.left.key,d.left.value,new Oa(d.left.right,d.key,d.value,d.right))):new Oa(a,b,c,d,(e>f?e:f)+1)},compare:function(a,b){return G.compare(a,b)},__class__:ec};var Oa=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;-1==e?(a=this.left,b=this.right,a=(null==a?0:a._height)>(null==b?0:b._height)?this.left:this.right,a=null==a?0:a._height,this._height=a+1):this._height=e};Oa.__name__=["haxe","ds","TreeNode"];Oa.prototype={left:null,
right:null,key:null,value:null,_height:null,__class__:Oa};var yb={__ename__:["haxe","ds","Either"],__constructs__:["Left","Right"],Left:function(a){a=["Left",0,a];a.__enum__=yb;return a},Right:function(a){a=["Right",1,a];a.__enum__=yb;return a}},Tb=function(){};Tb.__name__=["haxe","ds","EnumValueMap"];Tb.__interfaces__=[kb];Tb.__super__=ec;Tb.prototype=D(ec.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,
d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return G.isEnumValue(a)&&G.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):G.compare(a,b)},__class__:Tb});var Qb=function(){this.h={}};Qb.__name__=["haxe","ds","IntMap"];Qb.__interfaces__=[kb];Qb.prototype={h:null,set:function(a,
b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return L.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:Qb};var nb=function(){this.h={__keys__:{}}};nb.__name__=
["haxe","ds","ObjectMap"];nb.__interfaces__=[kb];nb.prototype={h:null,set:function(a,b){var c=a.__id__||(a.__id__=++nb.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return L.iter(a)},
iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:nb};var B={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"],Some:function(a){a=["Some",0,a];a.__enum__=B;return a},None:["None",1]};B.None.__enum__=B;var Jc=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};Jc.__name__=["haxe","ds","_StringMap","StringMapIterator"];Jc.prototype={map:null,keys:null,
index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=k[b]?a.getReserved(b):a.h[b]},__class__:Jc};var x=function(){this.h={}};x.__name__=["haxe","ds","StringMap"];x.__interfaces__=[kb];x.prototype={h:null,rh:null,set:function(a,b){null!=k[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=k[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=k[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},
setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=k[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return L.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&
a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Jc(this,this.arrayKeys())},__class__:x};var ca=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,ca)};ca.__name__=["js","_Boot","HaxeError"];ca.wrap=function(a){return a instanceof Error?a:new ca(a)};ca.__super__=Error;ca.prototype=D(Error.prototype,{val:null,__class__:ca});var fc=function(){};fc.__name__=["markdown",
"Node"];fc.prototype={accept:null,__class__:fc};var Kc=function(){};Kc.__name__=["markdown","NodeVisitor"];Kc.prototype={visitText:null,visitElementBefore:null,visitElementAfter:null,__class__:Kc};var ia=function(a,b){this.tag=a;this.children=b;this.attributes=new x};ia.__name__=["markdown","ElementNode"];ia.__interfaces__=[fc];ia.empty=function(a){return new ia(a,null)};ia.withTag=function(a){return new ia(a,[])};ia.text=function(a,b){return new ia(a,[new fb(b)])};ia.prototype={tag:null,children:null,
attributes:null,isEmpty:function(){return null==this.children},accept:function(a){if(a.visitElementBefore(this)){for(var b=0,c=this.children;b<c.length;){var d=c[b];++b;d.accept(a)}a.visitElementAfter(this)}},__class__:ia};var fb=function(a){this.text=a};fb.__name__=["markdown","TextNode"];fb.__interfaces__=[fc];fb.prototype={text:null,accept:function(a){a.visitText(this)},__class__:fb};var Cc=function(a,b){this.lines=a;this.document=b;this.pos=0};Cc.__name__=["markdown","BlockParser"];Cc.prototype=
{lines:null,document:null,pos:null,get_current:function(){return this.lines[this.pos]},get_next:function(){return this.pos>=this.lines.length-1?null:this.lines[this.pos+1]},advance:function(){this.pos++},get_isDone:function(){return this.pos>=this.lines.length},matches:function(a){return this.pos>=this.lines.length?!1:a.match(this.lines[this.pos])},matchesNext:function(a){return null==this.get_next()?!1:a.match(this.get_next())},__class__:Cc};var K=function(){};K.__name__=["markdown","BlockSyntax"];
K.get_syntaxes=function(){null==K.syntaxes&&(K.syntaxes=[new gc,new hc,new ic,new jc,new kc,new lc,new mc,new nc,new oc,new pc,new Ya,new qc]);return K.syntaxes};K.isAtBlockEnd=function(a){if(a.pos>=a.lines.length)return!0;for(var b=0,c=K.get_syntaxes();b<c.length;){var d=c[b];++b;if(d.canParse(a)&&d.get_canEndBlock())return!0}return!1};K.prototype={get_pattern:function(){return null},get_canEndBlock:function(){return!0},canParse:function(a){return this.get_pattern().match(a.lines[a.pos])},parse:function(a){return null},
parseChildLines:function(a){for(var b=[];a.pos<a.lines.length&&this.get_pattern().match(a.lines[a.pos]);)b.push(this.get_pattern().matched(1)),a.advance();return b},__class__:K};var gc=function(){};gc.__name__=["markdown","EmptyBlockSyntax"];gc.__super__=K;gc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_EMPTY},parse:function(a){a.advance();return null},__class__:gc});var ic=function(){};ic.__name__=["markdown","SetextHeaderSyntax"];ic.__super__=K;ic.prototype=D(K.prototype,{canParse:function(a){return a.matchesNext(K.RE_SETEXT)},
parse:function(a){var b=K.RE_SETEXT;b.match(a.get_next());var b="="==b.matched(1).charAt(0)?"h1":"h2",c=a.document.parseInline(a.lines[a.pos]);a.advance();a.advance();return new ia(b,c)},__class__:ic});var jc=function(){};jc.__name__=["markdown","HeaderSyntax"];jc.__super__=K;jc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_HEADER},parse:function(a){this.get_pattern().match(a.lines[a.pos]);a.advance();var b=this.get_pattern().matched(1).length;a=a.document.parseInline(E.trim(this.get_pattern().matched(2)));
return new ia("h"+b,a)},__class__:jc});var mc=function(){};mc.__name__=["markdown","BlockquoteSyntax"];mc.__super__=K;mc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_BLOCKQUOTE},parseChildLines:function(a){for(var b=[];a.pos<a.lines.length;)if(this.get_pattern().match(a.lines[a.pos]))b.push(this.get_pattern().matched(1)),a.advance();else{var c=null!=a.get_next()&&this.get_pattern().match(a.get_next());if(""==E.trim(a.lines[a.pos])&&c)b.push(""),b.push(this.get_pattern().matched(1)),
a.advance(),a.advance();else break}return b},parse:function(a){var b=this.parseChildLines(a);a=a.document.parseLines(b);return new ia("blockquote",a)},__class__:mc});var kc=function(){};kc.__name__=["markdown","CodeBlockSyntax"];kc.__super__=K;kc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_INDENT},parseChildLines:function(a){for(var b=[];a.pos<a.lines.length;)if(this.get_pattern().match(a.lines[a.pos]))b.push(this.get_pattern().matched(1)),a.advance();else{var c=null!=a.get_next()&&
this.get_pattern().match(a.get_next());if(""==E.trim(a.lines[a.pos])&&c)b.push(""),b.push(this.get_pattern().matched(1)),a.advance(),a.advance();else break}return b},parse:function(a){a=this.parseChildLines(a);a.push("");a=E.htmlEscape(a.join("\n"));return new ia("pre",[ia.text("code",a)])},__class__:kc});var lc=function(){};lc.__name__=["markdown","GitHubCodeBlockSyntax"];lc.__super__=K;lc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_CODE},parseChildLines:function(a){var b=[];for(a.advance();a.pos<
a.lines.length;)if(this.get_pattern().match(a.lines[a.pos])){a.advance();break}else b.push(a.lines[a.pos]),a.advance();return b},parse:function(a){var b=this.get_pattern().matched(1);a=this.parseChildLines(a);a=ia.text("code",E.htmlEscape(a.join("\n")));if(null!=b&&0<b.length){var c=a.attributes,b="prettyprint "+b;null!=k["class"]?c.setReserved("class",b):c.h["class"]=b}return new ia("pre",[a])},__class__:lc});var nc=function(){};nc.__name__=["markdown","HorizontalRuleSyntax"];nc.__super__=K;nc.prototype=
D(K.prototype,{get_pattern:function(){return K.RE_HR},parse:function(a){a.advance();return ia.empty("hr")},__class__:nc});var hc=function(){};hc.__name__=["markdown","BlockHtmlSyntax"];hc.__super__=K;hc.prototype=D(K.prototype,{get_pattern:function(){return K.RE_HTML},get_canEndBlock:function(){return!1},parse:function(a){for(var b=[];a.pos<a.lines.length&&!a.matches(K.RE_EMPTY);)b.push(a.lines[a.pos]),a.advance();return new fb(b.join("\n"))},__class__:hc});var Lc=function(a){this.forceBlock=!1;this.lines=
a};Lc.__name__=["markdown","ListItem"];Lc.prototype={forceBlock:null,lines:null,__class__:Lc};var qc=function(){};qc.__name__=["markdown","ParagraphSyntax"];qc.__super__=K;qc.prototype=D(K.prototype,{get_canEndBlock:function(){return!1},canParse:function(a){return!0},parse:function(a){for(var b=[];!K.isAtBlockEnd(a);)b.push(E.ltrim(a.lines[a.pos])),a.advance();a=a.document.parseInline(b.join("\n"));return new ia("p",a)},__class__:qc});var Cb=function(a){this.listTag=a};Cb.__name__=["markdown","ListSyntax"];
Cb.__super__=K;Cb.prototype=D(K.prototype,{get_canEndBlock:function(){return!1},listTag:null,parse:function(a){for(var b=[],c=[],d=function(){0<c.length&&(b.push(new Lc(c)),c=[])},e,f=function(b){e=b;return b.match(a.lines[a.pos])};a.pos<a.lines.length;){if(f(K.RE_EMPTY))c.push("");else if(f(K.RE_UL)||f(K.RE_OL)){d();var h=e.matched(1);c.push(h)}else if(f(K.RE_INDENT))h=e.matched(1),c.push(h);else if(K.isAtBlockEnd(a))break;else{if(0<c.length&&""==c[c.length-1])break;c.push(a.lines[a.pos])}a.advance()}d();
d=0;for(f=b.length;d<f;)for(var h=d++,t=b[h].lines.length,g=1,k=t+1;g<k;){var l=g++;if(K.RE_EMPTY.match(b[h].lines[t-l]))h<b.length-1&&(b[h].forceBlock=!0,b[h+1].forceBlock=!0),b[h].lines.pop();else break}d=[];for(f=0;f<b.length;){h=b[f];++f;t=h.forceBlock||1<h.lines.length;g=[K.RE_BLOCKQUOTE,K.RE_HEADER,K.RE_HR,K.RE_INDENT,K.RE_UL,K.RE_OL];if(!t)for(k=0;k<g.length;)if(l=g[k],++k,l.match(h.lines[0])){t=!0;break}t?(t=a.document.parseLines(h.lines),!h.forceBlock&&1==t.length&&R.__instanceof(t[0],ia)&&
(h=t[0],"p"==h.tag&&(t=h.children)),d.push(new ia("li",t))):(h=a.document.parseInline(h.lines[0]),d.push(new ia("li",h)))}return new ia(this.listTag,d)},__class__:Cb});var oc=function(){this.listTag="ul"};oc.__name__=["markdown","UnorderedListSyntax"];oc.__super__=Cb;oc.prototype=D(Cb.prototype,{get_pattern:function(){return K.RE_UL},__class__:oc});var pc=function(){this.listTag="ol"};pc.__name__=["markdown","OrderedListSyntax"];pc.__super__=Cb;pc.prototype=D(Cb.prototype,{get_pattern:function(){return K.RE_OL},
__class__:pc});var Ya=function(){};Ya.__name__=["markdown","TableSyntax"];Ya.__super__=K;Ya.prototype=D(K.prototype,{get_pattern:function(){return Ya.TABLE_PATTERN},get_canEndBlock:function(){return!1},parse:function(a){for(var b=[];a.pos<a.lines.length&&a.matches(Ya.TABLE_PATTERN);)b.push(a.lines[a.pos]),a.advance();var c=[],d=[],e=b.shift(),f=b.shift(),h=[];null!=f&&Ya.CELL_PATTERN.map(f,function(a){a=a.matched(2);a=":"==a.charAt(0)?":"==a.charAt(a.length-1)?"center":"left":":"==a.charAt(a.length-
1)?"right":"left";h.push(a);return""});var t=0;Ya.CELL_PATTERN.map(e,function(b){b=E.trim(b.matched(2));b=new ia("th",a.document.parseInline(b));if("left"!=h[t]){var d=b.attributes,e=h[t];null!=k.align?d.setReserved("align",e):d.h.align=e}c.push(b);t+=1;return""});for(e=0;e<b.length;){f=b[e];++e;var g=[[]];d.push(new ia("tr",g[0]));Ya.CELL_PATTERN.map(f,function(b,c){return function(d){d=E.trim(d.matched(2));d=new ia("td",a.document.parseInline(d));if("left"!=h[b[0]]){var e=d.attributes,f=h[b[0]];
null!=k.align?e.setReserved("align",f):e.h.align=f}c[0].push(d);b[0]+=1;return""}}([0],g))}return new ia("table",[new ia("thead",c),new ia("tbody",d)])},__class__:Ya});var Xa=function(){};Xa.__name__=["markdown","HtmlRenderer"];Xa.__interfaces__=[Kc];Xa.sortAttributes=function(a,b){var c=Xa.attributeOrder.indexOf(a),d=Xa.attributeOrder.indexOf(a);return-1<c&&-1<d?c-d:G.compare(a,b)};Xa.prototype={buffer:null,render:function(a){this.buffer=new cc;for(var b=0;b<a.length;){var c=a[b];++b;c.accept(this)}return this.buffer.b},
visitText:function(a){this.buffer.b+=H.string(a.text)},visitElementBefore:function(a){""!=this.buffer.b&&Xa.BLOCK_TAGS.match(a.tag)&&(this.buffer.b+="\n");this.buffer.b+=H.string("<"+a.tag);for(var b=[],c=a.attributes.keys();c.hasNext();){var d=c.next();b.push(d)}b.sort(Xa.sortAttributes);for(c=0;c<b.length;){d=b[c];++c;var e=this.buffer,f=a.attributes,f=null!=k[d]?f.getReserved(d):f.h[d];e.b+=H.string(" "+d+'="'+f+'"')}if(null==a.children)return this.buffer.b+=" />",!1;this.buffer.b+=">";return!0},
visitElementAfter:function(a){this.buffer.b+=H.string("</"+a.tag+">")},__class__:Xa};var Ga=function(a){this.pattern=new Y(a,"m")};Ga.__name__=["markdown","InlineSyntax"];Ga.prototype={pattern:null,tryMatch:function(a){return this.pattern.match(a.get_currentSource())&&0==this.pattern.matchedPos().pos?(a.writeText(),this.onMatch(a)&&a.consume(this.pattern.matched(0).length),!0):!1},onMatch:function(a){return!1},__class__:Ga};var rc=function(){Ga.call(this,"\\b((http|https|ftp)://[^\\s]*)\\b")};rc.__name__=
["markdown","AutolinkSyntaxWithoutBrackets"];rc.__super__=Ga;rc.prototype=D(Ga.prototype,{tryMatch:function(a){return Ga.prototype.tryMatch.call(this,a)},onMatch:function(a){var b=this.pattern.matched(1),c=ia.text("a",E.htmlEscape(b)),d=c.attributes;null!=k.href?d.setReserved("href",b):d.h.href=b;a.addNode(c);return!0},__class__:rc});var Za=function(a,b){Ga.call(this,a);this.substitute=b};Za.__name__=["markdown","TextSyntax"];Za.__super__=Ga;Za.prototype=D(Ga.prototype,{substitute:null,onMatch:function(a){if(null==
this.substitute)return a.advanceBy(this.pattern.matched(0).length),!1;a.addNode(a.createText(this.substitute));return!0},__class__:Za});var sc=function(){Ga.call(this,"<((http|https|ftp)://[^>]*)>")};sc.__name__=["markdown","AutolinkSyntax"];sc.__super__=Ga;sc.prototype=D(Ga.prototype,{onMatch:function(a){var b=this.pattern.matched(1),c=ia.text("a",E.htmlEscape(b)),d=c.attributes;null!=k.href?d.setReserved("href",b):d.h.href=b;a.addNode(c);return!0},__class__:sc});var Va=function(a,b,c){Ga.call(this,
a);this.tag=b;this.endPattern=new Y(null==c?a:c,"m")};Va.__name__=["markdown","TagSyntax"];Va.__super__=Ga;Va.prototype=D(Ga.prototype,{endPattern:null,tag:null,onMatch:function(a){a.stack.push(new tc(a.pos,a.pos+this.pattern.matched(0).length,this));return!0},onMatchEnd:function(a,b){a.addNode(new ia(this.tag,b.children));return!0},__class__:Va});var Db=function(a){Va.call(this,"\\[",null,Db.linkPattern);this.linkResolver=a};Db.__name__=["markdown","LinkSyntax"];Db.__super__=Va;Db.prototype=D(Va.prototype,
{linkResolver:null,onMatchEnd:function(a,b){var c,d;if(null==this.endPattern.matched(1)||""==this.endPattern.matched(1)){if(null==this.linkResolver||1!=b.children.length||!R.__instanceof(b.children[0],fb))return!1;var e=this.linkResolver(b.children[0].text);if(null==e)return!1;a.addNode(e);return!0}if(null!=this.endPattern.matched(3)&&""!=this.endPattern.matched(3))c=this.endPattern.matched(3),d=this.endPattern.matched(4),E.startsWith(c,"<")&&E.endsWith(c,">")&&(c=c.substring(1,c.length-1));else{e=
this.endPattern.matched(2);""==e&&(e=a.source.substring(b.startPos+1,a.pos));e=e.toLowerCase();d=a.document.refLinks;e=null!=k[e]?d.getReserved(e):d.h[e];if(null==e)return!1;c=e.url;d=e.title}var e=new ia("a",b.children),f=e.attributes;c=E.htmlEscape(c);null!=k.href?f.setReserved("href",c):f.h.href=c;null!=d&&""!=d&&(c=e.attributes,d=E.htmlEscape(d),null!=k.title?c.setReserved("title",d):c.h.title=d);a.addNode(e);return!0},__class__:Db});var Nb=function(a){Va.call(this,"!\\[",null,Nb.linkPattern);
this.linkResolver=a};Nb.__name__=["markdown","ImgSyntax"];Nb.__super__=Va;Nb.prototype=D(Va.prototype,{linkResolver:null,onMatchEnd:function(a,b){var c,d;if(null==this.endPattern.matched(1)||""==this.endPattern.matched(1)){if(null==this.linkResolver||1!=b.children.length||!R.__instanceof(b.children[0],fb))return!1;var e=this.linkResolver(b.children[0].text);if(null==e)return!1;a.addNode(e);return!0}if(null!=this.endPattern.matched(3)&&""!=this.endPattern.matched(3))c=this.endPattern.matched(3),d=
this.endPattern.matched(4),E.startsWith(c,"<")&&E.endsWith(c,">")&&(c=c.substring(1,c.length-1));else{e=this.endPattern.matched(2);""==e&&(e=a.source.substring(b.startPos+1,a.pos));e=e.toLowerCase();d=a.document.refLinks;e=null!=k[e]?d.getReserved(e):d.h[e];if(null==e)return!1;c=e.url;d=e.title}var e=new ia("img",null),f=e.attributes;c=E.htmlEscape(c);null!=k.src?f.setReserved("src",c):f.h.src=c;1==b.children.length&&R.__instanceof(b.children[0],fb)&&(c=b.children[0].text,f=e.attributes,null!=k.alt?
f.setReserved("alt",c):f.h.alt=c);null!=d&&""!=d&&(c=e.attributes,d=E.htmlEscape(d),null!=k.title?c.setReserved("title",d):c.h.title=d);a.addNode(e);return!0},__class__:Nb});var Ub=function(a){Ga.call(this,a)};Ub.__name__=["markdown","CodeSyntax"];Ub.__super__=Ga;Ub.prototype=D(Ga.prototype,{onMatch:function(a){a.addNode(ia.text("code",E.htmlEscape(this.pattern.matched(1))));return!0},__class__:Ub});var Gb=function(a,b){this.pos=this.start=0;this.source=a;this.document=b;this.stack=[];if(null!=b.inlineSyntaxes){this.syntaxes=
[];for(var c=0,d=b.inlineSyntaxes;c<d.length;){var e=d[c];++c;this.syntaxes.push(e)}c=0;for(d=Gb.defaultSyntaxes;c<d.length;)e=d[c],++c,this.syntaxes.push(e)}else this.syntaxes=Gb.defaultSyntaxes;c=this.syntaxes;d=new Db(b.linkResolver);c.splice(1,0,d)};Gb.__name__=["markdown","InlineParser"];Gb.prototype={source:null,document:null,syntaxes:null,pos:null,start:null,stack:null,parse:function(){for(this.stack.push(new tc(0,0,null));!this.get_isDone();){for(var a=!1,b=1,c=this.stack.length;b<c;){var d=
b++;if(this.stack[this.stack.length-d].tryMatch(this)){a=!0;break}}if(!a){b=0;for(c=this.syntaxes;b<c.length;)if(d=c[b],++b,d.tryMatch(this)){a=!0;break}a||this.advanceBy(1)}}return this.stack[0].close(this)},writeText:function(){this.writeTextRange(this.start,this.pos);this.start=this.pos},writeTextRange:function(a,b){if(b>a){var c=this.source.substring(a,b),d=this.stack[this.stack.length-1].children;0<d.length&&R.__instanceof(d[d.length-1],fb)?(c=this.createText(""+d[d.length-1].text+c),d[d.length-
1]=c):d.push(this.createText(c))}},createText:function(a){return new fb(this.unescape(a))},addNode:function(a){this.stack[this.stack.length-1].children.push(a)},get_currentSource:function(){return this.source.substring(this.pos,this.source.length)},get_isDone:function(){return this.pos==this.source.length},advanceBy:function(a){this.pos+=a},consume:function(a){this.start=this.pos+=a},unescape:function(a){a=a.replace(RegExp("\\\\([\\\\`*_{}[\\]()#+-.!])","g"),"$1");return a=E.replace(a,"\t","    ")},
__class__:Gb};var tc=function(a,b,c){this.startPos=a;this.endPos=b;this.syntax=c;this.children=[]};tc.__name__=["markdown","TagState"];tc.prototype={startPos:null,endPos:null,syntax:null,children:null,tryMatch:function(a){return this.syntax.endPattern.match(a.get_currentSource())&&0==this.syntax.endPattern.matchedPos().pos?(this.close(a),!0):!1},close:function(a){for(var b=a.stack.indexOf(this),b=a.stack.splice(b+1,a.stack.length-b),c=0;c<b.length;){var d=b[c];++c;a.writeTextRange(d.startPos,d.endPos);
for(var e=0,d=d.children;e<d.length;){var f=d[e];++e;this.children.push(f)}}a.writeText();a.stack.pop();if(0==a.stack.length)return this.children;this.syntax.onMatchEnd(a,this)?a.consume(this.syntax.endPattern.matched(0).length):(a.start=this.startPos,a.advanceBy(this.syntax.endPattern.matched(0).length));return null},__class__:tc};var Qa=function(){};Qa.__name__=["thx","ArrayInts"];Qa.average=function(a){return Qa.sum(a)/a.length};Qa.max=function(a){return p.get(l.maxBy(a,P.order))};Qa.min=function(a){return p.get(l.minBy(a,
P.order))};Qa.resize=function(a,b,c){for(null==c&&(c=0);a.length<b;)a.push(c);a.splice(b,a.length-b);return a};Qa.resized=function(a,b,c){null==c&&(c=0);a=a.slice();return Qa.resize(a,b,c)};Qa.sum=function(a){return l.reduce(a,function(a,c){return a+c},0)};var jb=function(){};jb.__name__=["thx","Bools"];jb.compare=function(a,b){return a==b?0:a?-1:1};jb.toInt=function(a){return a?1:0};jb.canParse=function(a){a=a.toLowerCase();if(null==a)return!0;switch(a){case "0":case "1":case "false":case "off":case "on":case "true":return!0;
default:return!1}};jb.parse=function(a){a=a.toLowerCase();if(null==a)return!1;switch(a){case "1":case "on":case "true":return!0;case "0":case "false":case "off":return!1;default:throw new ca('unable to parse "'+a+'"');}};jb.xor=function(a,b){return a!=b};jb.option=function(a,b){return a?B.Some(b):B.None};var Jb={__name__:["thx","_Ord","Ord_Impl_"],order:function(a,b,c){return a(b,c)},max:function(a,b,c){switch(a(b,c)[1]){case 1:return b;case 0:case 2:return c}},min:function(a,b,c){switch(a(b,c)[1]){case 1:return c;
case 0:case 2:return b}},equal:function(a,b,c){return a(b,c)==Ba.EQ},contramap:function(a,b){return function(c,d){var e=b(c),f=b(d);return a(e,f)}},inverse:function(a){return function(b,c){return a(c,b)}},intComparison:function(a,b,c){switch(a(b,c)[1]){case 0:return-1;case 1:return 1;case 2:return 0}},fromIntComparison:function(a){return function(b,c){return bd.fromInt(a(b,c))}},forComparable:function(){return function(a,b){return bd.fromInt(a.compareTo(b))}},forComparableOrd:function(){return function(a,
b){return a.compareTo(b)}}},bd={__name__:["thx","_Ord","Ordering_Impl_"],fromInt:function(a){return 0>a?Ba.LT:0<a?Ba.GT:Ba.EQ},fromFloat:function(a){return 0>a?Ba.LT:0<a?Ba.GT:Ba.EQ},toInt:function(a){switch(a[1]){case 0:return-1;case 1:return 1;case 2:return 0}}},Ba={__ename__:["thx","OrderingImpl"],__constructs__:["LT","GT","EQ"],LT:["LT",0]};Ba.LT.__enum__=Ba;Ba.GT=["GT",1];Ba.GT.__enum__=Ba;Ba.EQ=["EQ",2];Ba.EQ.__enum__=Ba;var v=function(){};v.__name__=["thx","Dates"];v.compare=function(a,b){var c=
a.getTime(),d=b.getTime();return c<d?-1:c>d?1:0};v.create=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);e+=Math.floor(f/60);f%=60;0>f&&(f+=60);d+=Math.floor(e/60);e%=60;0>e&&(e+=60);c+=Math.floor(d/24);d%=24;0>d&&(d+=24);0==c&&(--b,0>b&&(b=11,--a),c=v.daysInMonth(a,b));a+=Math.floor(b/12);b%=12;0>b&&(b+=12);for(var h=v.daysInMonth(a,b);c>h;)c>h&&(c-=h,++b),11<b&&(b-=12,++a),h=v.daysInMonth(a,b);return new Date(a,b,c,d,e,f)};v.daysRange=function(a,
b){if(0>v.compare(b,a))return[];for(var c=[];!v.sameDay(a,b);)c.push(a),a=v.jump(a,ea.Day,1);c.push(b);return c};v.equals=function(a,b){return a.getTime()==b.getTime()};v.nearEquals=function(a,b,c,d){null==c&&(c=1);null==d&&(d=ea.Second);0>c&&(c=-c);var e=v.jump(a,d,-c);a=v.jump(a,d,c);return 0>=v.compare(e,b)?0<=v.compare(a,b):!1};v.greater=function(a,b){return 0<v.compare(a,b)};v.more=function(a,b){return 0<v.compare(a,b)};v.less=function(a,b){return 0>v.compare(a,b)};v.greaterEquals=function(a,
b){return 0<=v.compare(a,b)};v.moreEqual=function(a,b){return 0<=v.compare(a,b)};v.lessEquals=function(a,b){return 0>=v.compare(a,b)};v.lessEqual=function(a,b){return 0>=v.compare(a,b)};v.isLeapYear=function(a){return 0!=a%4?!1:0==a%100?0==a%400:!0};v.isInLeapYear=function(a){return v.isLeapYear(a.getFullYear())};v.daysInMonth=function(a,b){switch(b){case 1:return v.isLeapYear(a)?29:28;case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 3:case 5:case 8:case 10:return 30;default:throw new ca('Invalid month "'+
b+'".  Month should be a number, Jan=0, Dec=11');}};v.numDaysInMonth=function(a,b){return v.daysInMonth(b,a)};v.daysInThisMonth=function(a){return v.daysInMonth(a.getFullYear(),a.getMonth())};v.numDaysInThisMonth=function(a){return v.daysInThisMonth(a)};v.sameYear=function(a,b){return a.getFullYear()==b.getFullYear()};v.sameMonth=function(a,b){return v.sameYear(a,b)?a.getMonth()==b.getMonth():!1};v.sameDay=function(a,b){return v.sameMonth(a,b)?a.getDate()==b.getDate():!1};v.sameHour=function(a,b){return v.sameDay(a,
b)?a.getHours()==b.getHours():!1};v.sameMinute=function(a,b){return v.sameHour(a,b)?a.getMinutes()==b.getMinutes():!1};v.snapNext=function(a,b){var c=Wc.snapNext(a.getTime(),b);return new Date(c)};v.snapPrev=function(a,b){var c=Wc.snapPrev(a.getTime(),b);return new Date(c)};v.snapTo=function(a,b){var c=Wc.snapTo(a.getTime(),b);return new Date(c)};v.jump=function(a,b,c){var d=a.getSeconds(),e=a.getMinutes(),f=a.getHours(),h=a.getDate(),t=a.getMonth();a=a.getFullYear();switch(b[1]){case 0:d+=c;break;
case 1:e+=c;break;case 2:f+=c;break;case 3:h+=c;break;case 4:h+=7*c;break;case 5:t+=c;break;case 6:a+=c}return v.create(a,t,h,f,e,d)};v.max=function(a,b){return a.getTime()>b.getTime()?a:b};v.min=function(a,b){return a.getTime()<b.getTime()?a:b};v.snapToWeekDay=function(a,b,c){null==c&&(c=0);var d=a.getDay();b<c&&(b+=7);d<c&&(d+=7);return v.jump(a,ea.Day,b-d)};v.snapNextWeekDay=function(a,b){var c=a.getDay(),d=b;d<c&&(d+=7);return v.jump(a,ea.Day,d-c)};v.snapPrevWeekDay=function(a,b){var c=a.getDay(),
d=b;d>c&&(d-=7);return v.jump(a,ea.Day,d-c)};v.prevYear=function(a){return v.jump(a,ea.Year,-1)};v.nextYear=function(a){return v.jump(a,ea.Year,1)};v.prevMonth=function(a){return v.jump(a,ea.Month,-1)};v.nextMonth=function(a){return v.jump(a,ea.Month,1)};v.prevWeek=function(a){return v.jump(a,ea.Week,-1)};v.nextWeek=function(a){return v.jump(a,ea.Week,1)};v.prevDay=function(a){return v.jump(a,ea.Day,-1)};v.nextDay=function(a){return v.jump(a,ea.Day,1)};v.prevHour=function(a){return v.jump(a,ea.Hour,
-1)};v.nextHour=function(a){return v.jump(a,ea.Hour,1)};v.prevMinute=function(a){return v.jump(a,ea.Minute,-1)};v.nextMinute=function(a){return v.jump(a,ea.Minute,1)};v.prevSecond=function(a){return v.jump(a,ea.Second,-1)};v.nextSecond=function(a){return v.jump(a,ea.Second,1)};v.withYear=function(a,b){return v.create(b,a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())};v.withMonth=function(a,b){return v.create(a.getFullYear(),b,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())};
v.withDay=function(a,b){return v.create(a.getFullYear(),a.getMonth(),b,a.getHours(),a.getMinutes(),a.getSeconds())};v.withHour=function(a,b){return v.create(a.getFullYear(),a.getMonth(),a.getDate(),b,a.getMinutes(),a.getSeconds())};v.withMinute=function(a,b){return v.create(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),b,a.getSeconds())};v.withSecond=function(a,b){return v.create(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),b)};v.parseDate=function(a){try{return Q.Right(L.strDate(a))}catch(b){return fa.lastException=
b,Q.Left(""+a+" could not be parsed to a valid Date value.")}};var xa=function(){};xa.__name__=["thx","Dynamics"];xa.equals=function(a,b){if(!wa.sameType(a,b))return!1;if(a==b)return!0;var c=aa["typeof"](a);switch(c[1]){case 0:case 1:case 2:case 3:return!1;case 4:for(var c=G.fields(a),d=G.fields(b),e=0;e<c.length;){var f=c[e];++e;L.remove(d,f);if(!Object.prototype.hasOwnProperty.call(b,f))return!1;var h=G.field(a,f);if(!G.isFunction(h)&&(f=G.field(b,f),!xa.equals(h,f)))return!1}if(0<d.length)return!1;
if((d=C.isIterator(a))||U.isIterable(a)){if(d&&!C.isIterator(b)||!d&&!U.isIterable(b))return!1;c=d?C.toArray(a):C.toArray(n(a)());d=d?C.toArray(b):C.toArray(n(b)());if(c.length!=d.length)return!1;e=0;for(h=c.length;e<h;)if(f=e++,!xa.equals(c[f],d[f]))return!1}return!0;case 5:return G.compareMethods(a,b);case 6:c=aa.getClassName(c[2]);d=aa.getClassName(null==b?null:R.getClass(b));if(c!=d||"string"==typeof a)return!1;if(a instanceof Array&&null==a.__enum__){if(a.length!=b.length)return!1;c=0;for(d=
a.length;c<d;)if(e=c++,!xa.equals(a[e],b[e]))return!1;return!0}if(R.__instanceof(a,Date))return a.getTime()==b.getTime();if(R.__instanceof(a,kb)){c=C.toArray(a.keys());d=C.toArray(b.keys());if(c.length!=d.length)return!1;for(d=0;d<c.length;)if(e=c[d],++d,!b.exists(e)||!xa.equals(a.get(e),b.get(e)))return!1;return!0}if((d=C.isIterator(a))||U.isIterable(a)){c=d?C.toArray(a):C.toArray(n(a)());d=d?C.toArray(b):C.toArray(n(b)());if(c.length!=d.length)return!1;e=0;for(h=c.length;e<h;)if(f=e++,!xa.equals(c[f],
d[f]))return!1;return!0}c=null;Object.prototype.hasOwnProperty.call(a,"equals")?(c=G.field(a,"equals"),d=G.isFunction(c)):d=!1;if(d)return c.apply(a,[b]);c=aa.getInstanceFields(null==a?null:R.getClass(a));for(d=0;d<c.length;)if(h=c[d],++d,e=G.field(a,h),!G.isFunction(e)&&(h=G.field(b,h),!xa.equals(e,h)))return!1;return!0;case 7:c=aa.getEnumName(c[2]);d=aa.getEnum(b);d=aa.getEnumName(d);if(c!=d||a[1]!=b[1])return!1;c=a.slice(2);d=b.slice(2);e=0;for(h=c.length;e<h;)if(f=e++,!xa.equals(c[f],d[f]))return!1;
return!0;case 8:throw new ca("Unable to compare two unknown types");}};xa.clone=function(a,b){null==b&&(b=!1);var c=aa["typeof"](a);switch(c[1]){case 0:return null;case 4:return da.copyTo(a,{});case 1:case 2:case 3:case 5:case 7:case 8:return a;case 6:var d=c[2];switch(aa.getClassName(d)){case "Array":return a.map(function(a){return xa.clone(a,b)});case "Date":case "String":return a;default:if(b){for(var c=aa.createEmptyInstance(d),e=0,d=aa.getInstanceFields(d);e<d.length;){var f=d[e];++e;c[f]=xa.clone(G.field(a,
f),b)}return c}return a}}};xa.compare=function(a,b){if(null==a&&null==b)return 0;if(null==a)return-1;if(null==b)return 1;if(!wa.sameType(a,b))return Mb.compare(wa.toString(aa["typeof"](a)),wa.toString(aa["typeof"](b)));var c=aa["typeof"](a);switch(c[1]){case 1:return P.compare(a,b);case 2:return a<b?-1:a>b?1:0;case 3:return jb.compare(a,b);case 4:return da.compare(a,b);case 6:switch(aa.getClassName(c[2])){case "Array":return l.compare(a,b);case "Date":return v.compare(a,b);case "String":return Mb.compare(a,
b);default:return Object.prototype.hasOwnProperty.call(a,"compare")?G.field(a,"compare").apply(a,[b]):Mb.compare(H.string(a),H.string(b))}case 7:return lb.compare(a,b);default:return 0}};xa.string=function(a){var b=aa["typeof"](a);switch(b[1]){case 0:return"null";case 1:case 2:case 3:return""+H.string(a);case 4:return da.string(a);case 5:return"<function>";case 6:switch(aa.getClassName(b[2])){case "Array":return l.string(a);case "Date":return L.dateStr(a);case "String":return a;default:return R.__instanceof(a,
kb)?Ha.string(a):H.string(a)}case 7:return lb.string(a);case 8:return"<unknown>"}};var Q={__ename__:["thx","Either"],__constructs__:["Left","Right"],Left:function(a){a=["Left",0,a];a.__enum__=Q;return a},Right:function(a){a=["Right",1,a];a.__enum__=Q;return a}},ja=function(){};ja.__name__=["thx","Eithers"];ja.isLeft=function(a){switch(a[1]){case 0:return!0;case 1:return!1}};ja.isRight=function(a){switch(a[1]){case 0:return!1;case 1:return!0}};ja.toLeft=function(a){switch(a[1]){case 0:return B.Some(a[2]);
case 1:return B.None}};ja.toRight=function(a){switch(a[1]){case 0:return B.None;case 1:return B.Some(a[2])}};ja.toLeftUnsafe=function(a){switch(a[1]){case 0:return a[2];case 1:return null}};ja.toRightUnsafe=function(a){switch(a[1]){case 0:return null;case 1:return a[2]}};ja.map=function(a,b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:return Q.Right(b(a[2]))}};ja.ap=function(a,b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:var c=a[2];return ja.map(b,function(a){return a(c)})}};ja.flatMap=function(a,
b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:return b(a[2])}};ja.leftMap=function(a,b){switch(a[1]){case 0:return Q.Left(b(a[2]));case 1:return Q.Right(a[2])}};ja.orThrow=function(a,b){switch(a[1]){case 0:throw new ba(""+b+": "+H.string(a[2]),null,{fileName:"Eithers.hx",lineNumber:103,className:"thx.Eithers",methodName:"orThrow"});case 1:return a[2]}};ja.toValidation=function(a){return a};ja.toVNel=function(a){return ja.leftMap(a,oa.pure)};ja.cata=function(a,b,c){switch(a[1]){case 0:return b(a[2]);
case 1:return c(a[2])}};ja.foldLeft=function(a,b,c){switch(a[1]){case 0:return b;case 1:return c(b,a[2])}};ja.foldMap=function(a,b,c){return ja.foldLeft(ja.map(a,b),Ab.get_zero(c),function(a,b){return Ab.append(c,a,b)})};ja.orElse=function(a,b){return 0==a[1]?b:a};ja.each=function(a,b){switch(a[1]){case 1:b(a[2])}};ja.eachLeft=function(a,b){switch(a[1]){case 0:b(a[2])}};ja.ensure=function(a,b,c){return 1==a[1]?b(a[2])?a:Q.Left(c):a};var lb=function(){};lb.__name__=["thx","Enums"];lb.string=function(a){var b=
a[0],c=[],d=0;for(a=a.slice(2);d<a.length;){var e=a[d];++d;c.push(xa.string(e))}return b+(0==c.length?"":"("+c.join(", ")+")")};lb.compare=function(a,b){var c=P.compare(a[1],b[1]);return 0!=c?c:l.compare(a.slice(2),b.slice(2))};lb.sameConstructor=function(a,b){return a[1]==b[1]};lb.min=function(a,b){return 0>lb.compare(a,b)?a:b};lb.max=function(a,b){return 0<lb.compare(a,b)?a:b};var ba=function(a,b,c){Error.call(this,a);this.message=a;if(null==b){try{b=fa.exceptionStack()}catch(d){fa.lastException=
d,b=[]}if(0==b.length)try{b=fa.callStack()}catch(d){fa.lastException=d,b=[]}}this.stackItems=b;this.pos=c};ba.__name__=["thx","Error"];ba.fromDynamic=function(a,b){return R.__instanceof(a,ba)?a:new uc(""+H.string(a),a,null,b)};ba.__super__=Error;ba.prototype=D(Error.prototype,{pos:null,stackItems:null,toString:function(){return this.message+"\nfrom: "+this.getPosition()+"\n\n"+this.stackToString()},getPosition:function(){return this.pos.className+"."+this.pos.methodName+"() at "+this.pos.lineNumber},
stackToString:function(){return fa.toString(this.stackItems)},__class__:ba});var X=function(){};X.__name__=["thx","Floats"];X.angleDifference=function(a,b,c){null==c&&(c=360);a=(b-a)%c;0>a&&(a+=c);a>c/2&&(a-=c);return a};X.ceilTo=function(a,b){var c=Math.pow(10,b);return Math.ceil(a*c)/c};X.canParse=function(a){return X.pattern_parse.match(a)};X.clamp=function(a,b,c){return a<b?b:a>c?c:a};X.clampSym=function(a,b){var c=-b;return a<c?c:a>b?b:a};X.compare=function(a,b){return a<b?-1:a>b?1:0};X.floorTo=
function(a,b){var c=Math.pow(10,b);return Math.floor(a*c)/c};X.interpolate=function(a,b,c){return(c-b)*a+b};X.interpolateAngle=function(a,b,c,d){null==d&&(d=360);return X.wrapCircular(X.interpolate(a,b,b+X.angleDifference(b,c,d)),d)};X.interpolateAngleWidest=function(a,b,c,d){null==d&&(d=360);return X.wrapCircular(X.interpolateAngle(a,b,c,d)-d/2,d)};X.interpolateAngleCW=function(a,b,c,d){null==d&&(d=360);b=X.wrapCircular(b,d);c=X.wrapCircular(c,d);c<b&&(c+=d);return X.wrapCircular(X.interpolate(a,
b,c),d)};X.interpolateAngleCCW=function(a,b,c,d){null==d&&(d=360);b=X.wrapCircular(b,d);c=X.wrapCircular(c,d);c>b&&(c-=d);return X.wrapCircular(X.interpolate(a,b,c),d)};X.max=function(a,b){return a>b?a:b};X.min=function(a,b){return a<b?a:b};X.nearEquals=function(a,b,c){null==c&&(c=1E-9);return isFinite(a)?Math.abs(a-b)<=c:isNaN(a)?isNaN(b):isNaN(b)?!1:isFinite(b)?!1:0<a==0<b};X.nearEqualAngles=function(a,b,c,d){null==d&&(d=1E-9);null==c&&(c=360);return Math.abs(X.angleDifference(a,b,c))<=d};X.nearZero=
function(a,b){null==b&&(b=1E-9);return Math.abs(a)<=b};X.normalize=function(a){return 0>a?0:1<a?1:a};X.parse=function(a){"+"==a.substring(0,1)&&(a=a.substring(1));return parseFloat(a)};X.root=function(a,b){return Math.pow(a,1/b)};X.roundTo=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c};X.sign=function(a){return 0>a?-1:1};X.toString=function(a){return""+a};X.toFloat=function(a){return X.parse(a)};X.trunc=function(a){return 0>a?Math.ceil(a):Math.floor(a)};X.ftrunc=function(a){return 0>
a?Math.ceil(a):Math.floor(a)};X.wrap=function(a,b,c){c=c-b+1;a<b&&(a+=c*((b-a)/c+1));return b+(a-b)%c};X.wrapCircular=function(a,b){a%=b;0>a&&(a+=b);return a};var la=function(){};la.__name__=["thx","Functions2"];la.memoize=function(a,b){null==b&&(b=function(a,b){return""+H.string(a)+":"+H.string(b)});var c=new x;return function(d,e){var f=b(d,e);if(null!=k[f]?c.existsReserved(f):c.h.hasOwnProperty(f))return null!=k[f]?c.getReserved(f):c.h[f];var h=a(d,e);null!=k[f]?c.setReserved(f,h):c.h[f]=h;return h}};
la.curry=function(a){return function(b){return function(c){return a(b,c)}}};la.join=function(a,b){return function(c,d){a(c,d);b(c,d)}};la.negate=function(a){return function(b,c){return!a(b,c)}};var Aa=function(){};Aa.__name__=["thx","Functions"];Aa.equality=function(a,b){return a==b};Aa.identity=function(a){return a};Aa.noop=function(){};Aa.lift=function(a,b){return b(a)};var P=function(){};P.__name__=["thx","Ints"];P.abs=function(a){return 0>a?-a:a};P.canParse=function(a){return P.pattern_parse.match(a)};
P.clamp=function(a,b,c){return a<b?b:a>c?c:a};P.clampSym=function(a,b){var c=-b;return a<c?c:a>b?b:a};P.compare=function(a,b){return a-b};P.gcd=function(a,b){0>a&&(a=-a);0>b&&(b=-b);return 0==b?a:P.gcd(b,a%b)};P.interpolate=function(a,b,c){return Math.round(b+(c-b)*a)};P.isEven=function(a){return 0==a%2};P.isOdd=function(a){return 0!=a%2};P.lpad=function(a,b,c){null==b&&(b="0");var d=!1;0>a&&(d=!0,a=-a);return(d?"-":"")+E.lpad(""+a,b,c)};P.lcm=function(a,b){0>a&&(a=-a);0>b&&(b=-b);return 0==b?a:a*
(b/P.gcd(a,b)|0)};P.rpad=function(a,b,c){null==b&&(b="0");return E.rpad(""+a,b,c)};P.max=function(a,b){return a>b?a:b};P.min=function(a,b){return a<b?a:b};P.parse=function(a,b){null==b&&(b="0x"==a.substring(0,2)?16:10);var c=parseInt(a,b);return isNaN(c)?null:c};P.random=function(a,b){null==a&&(a=0);return H.random(b-a+1)+a};P.range=function(a,b,c){null==c&&(c=1);null==b&&(b=a,a=0);if(Infinity==(b-a)/c)throw new ca("infinite range");var d=[],e=-1,f;if(0>c)for(;;){f=a+c*++e;if(!(f>b))break;d.push(f)}else for(;;){f=
a+c*++e;if(!(f<b))break;d.push(f)}return d};P.rangeIter=function(a,b,c){null==c&&(c=1);return new Mc(a,b,c)};P.toString=function(a,b){return a.toString(b)};P.toBase=function(a,b){return a.toString(b)};P.toBool=function(a){return 0!=a};P.toInt=function(a,b){return P.parse(a,b)};P.sign=function(a){return 0>a?-1:1};P.wrapCircular=function(a,b){a%=b;0>a&&(a+=b);return a};var Mc=function(a,b,c){null==c&&(c=1);this.current=a;this.stop=b;this.step=c};Mc.__name__=["thx","RangeIterator"];Mc.prototype={current:null,
stop:null,step:null,hasNext:function(){return null==this.stop||0<=this.step&&this.current<this.stop?!0:0>this.step?this.current>this.stop:!1},next:function(){var a=this.current;this.current+=this.step;return a},__class__:Mc};var U=function(){};U.__name__=["thx","Iterables"];U.all=function(a,b){return C.all(n(a)(),b)};U.any=function(a,b){return C.any(n(a)(),b)};U.eachPair=function(a,b){C.eachPair(n(a)(),b)};U.equals=function(a,b,c){return C.equals(n(a)(),n(b)(),c)};U.filter=function(a,b){return C.filter(n(a)(),
b)};U.find=function(a,b){return C.find(n(a)(),b)};U.findOption=function(a,b){var c=C.find(n(a)(),b);return null==c?B.None:B.Some(c)};U.first=function(a){return C.first(n(a)())};U.get=function(a,b){return C.get(n(a)(),b)};U.getOption=function(a,b){var c=C.get(n(a)(),b);return null==c?B.None:B.Some(c)};U.last=function(a){return C.last(n(a)())};U.hasElements=function(a){return n(a)().hasNext()};U.indexOf=function(a,b){return C.indexOf(n(a)(),b)};U.isEmpty=function(a){return!n(a)().hasNext()};U.isIterable=
function(a){var b;b=G.isObject(a)&&null==(null==a?null:R.getClass(a))?G.fields(a):aa.getInstanceFields(null==a?null:R.getClass(a));return Wb.has(b,"iterator")?G.isFunction(G.field(a,"iterator")):!1};U.map=function(a,b){return C.map(n(a)(),b)};U.fmap=function(a,b){return{iterator:function(){return C.fmap(n(a)(),b)}}};U.mapi=function(a,b){return C.mapi(n(a)(),b)};U.fmapi=function(a,b){return{iterator:function(){return C.fmapi(n(a)(),b)}}};U.order=function(a,b){return C.order(n(a)(),b)};U.reduce=function(a,
b,c){return C.reduce(n(a)(),b,c)};U.reducei=function(a,b,c){return C.reducei(n(a)(),b,c)};U.toArray=function(a){return C.toArray(n(a)())};U.minBy=function(a,b,c){var d=B.None;for(a=n(a)();a.hasNext();){var e=[a.next()];p.any(d,function(a){return function(d){d=b(d);var e=b(a[0]);return c(d,e)==Ba.LT}}(e))||(d=B.Some(e[0]))}return d};U.maxBy=function(a,b,c){return U.minBy(a,b,Jb.inverse(c))};U.min=function(a,b){return U.minBy(a,Aa.identity,b)};U.max=function(a,b){return U.minBy(a,Aa.identity,Jb.inverse(b))};
U.extremaBy=function(a,b,c){var d=B.None;for(a=n(a)();a.hasNext();){var e=a.next();switch(d[1]){case 0:var f=d[2];c(b(e),b(f._0))==Ba.LT?d=B.Some({_0:e,_1:f._1}):(f=d[2],c(b(e),b(f._1))==Ba.GT&&(d=B.Some({_0:f._0,_1:e})));break;case 1:d=B.Some({_0:e,_1:e})}}return d};U.extrema=function(a,b){return U.extremaBy(a,Aa.identity,b)};U.takeUntil=function(a,b){return C.takeUntil(n(a)(),b)};U.dropLeft=function(a,b){return{iterator:function(){for(var c=n(a)();0<b;)c.hasNext()&&c.next();return{next:M(c,c.next),
hasNext:M(c,c.hasNext)}}}};U.dropUntil=function(a,b){return C.dropUntil(n(a)(),b)};U.unionBy=function(a,b,c){var d=[];for(a=n(a)();a.hasNext();){var e=a.next();d.push(e)}for(b=n(b)();b.hasNext();)a=[b.next()],U.any(d,function(a){return function(b){return c(b,a[0])}}(a))||d.push(a[0]);return d};U.differenceBy=function(a,b,c){var d=[];for(a=n(a)();a.hasNext();){var e=[a.next()];U.any(b,function(a){return function(b){return c(b,a[0])}}(e))||d.push(e[0])}return d};U.unzip=function(a){return C.unzip(n(a)())};
U.unzip3=function(a){return C.unzip3(n(a)())};U.unzip4=function(a){return C.unzip4(n(a)())};U.unzip5=function(a){return C.unzip5(n(a)())};U.zip=function(a,b){return C.zip(n(a)(),n(b)())};U.zip3=function(a,b,c){return C.zip3(n(a)(),n(b)(),n(c)())};U.zip4=function(a,b,c,d){return C.zip4(n(a)(),n(b)(),n(c)(),n(d)())};U.zip5=function(a,b,c,d,e){return C.zip5(n(a)(),n(b)(),n(c)(),n(d)(),n(e)())};var C=function(){};C.__name__=["thx","Iterators"];C.all=function(a,b){for(;a.hasNext();){var c=a.next();if(!b(c))return!1}return!0};
C.any=function(a,b){for(;a.hasNext();){var c=a.next();if(b(c))return!0}return!1};C.equals=function(a,b,c){null==c&&(c=Aa.equality);for(var d,e;;){d=a.hasNext();e=b.hasNext();if(!d&&!e)return!0;if(!d||!e||!c(a.next(),b.next()))return!1}};C.get=function(a,b){for(var c=0;a.hasNext();){var d=a.next();if(c++==b)return d}return null};C.getOption=function(a,b){var c=C.get(a,b);return null==c?B.None:B.Some(c)};C.eachPair=function(a,b){l.eachPair(C.toArray(a),b)};C.filter=function(a,b){return C.reduce(a,function(a,
d){b(d)&&a.push(d);return a},[])};C.find=function(a,b){for(;a.hasNext();){var c=a.next();if(b(c))return c}return null};C.findOption=function(a,b){var c=C.find(a,b);return null==c?B.None:B.Some(c)};C.first=function(a){return a.hasNext()?a.next():null};C.hasElements=function(a){return a.hasNext()};C.indexOf=function(a,b){for(var c=0;a.hasNext();){var d=a.next();if(b==d)return c;++c}return-1};C.isEmpty=function(a){return!a.hasNext()};C.isIterator=function(a){var b;b=G.isObject(a)&&null==(null==a?null:
R.getClass(a))?G.fields(a):aa.getInstanceFields(null==a?null:R.getClass(a));return Wb.has(b,"next")&&Wb.has(b,"hasNext")?G.isFunction(G.field(a,"next"))?G.isFunction(G.field(a,"hasNext")):!1:!1};C.last=function(a){for(var b=null;a.hasNext();)b=a.next();return b};C.forEach=function(a,b){for(;a.hasNext();)b(a.next())};C.map=function(a,b){for(var c=[];a.hasNext();){var d=a.next();c.push(b(d))}return c};C.fmap=function(a,b){return new Nc(a,b)};C.mapi=function(a,b){for(var c=[],d=0;a.hasNext();){var e=
a.next();c.push(b(e,d++))}return c};C.fmapi=function(a,b){return new Oc(a,b)};C.order=function(a,b){var c=C.toArray(a);c.sort(b);return c};C.reduce=function(a,b,c){for(;a.hasNext();)c=b(c,a.next());return c};C.reducei=function(a,b,c){C.mapi(a,function(a,e){c=b(c,a,e)});return c};C.foldLeft=function(a,b,c){return C.reduce(a,c,b)};C.foldMap=function(a,b,c){return C.foldLeft(C.fmap(a,b),Ab.get_zero(c),function(a,b){return Ab.append(c,a,b)})};C.takeUntil=function(a,b){for(var c=[];a.hasNext();){var d=
a.next();if(b(d))c.push(d);else break}return c};C.dropUntil=function(a,b){for(var c=!1,d=[];a.hasNext();){var e=a.next();c?d.push(e):b(e)||(c=!0,d.push(e))}return d};C.toArray=function(a){for(var b=[];a.hasNext();){var c=a.next();b.push(c)}return b};C.unzip=function(a){var b=[],c=[];C.forEach(a,function(a){b.push(a._0);c.push(a._1)});return{_0:b,_1:c}};C.unzip3=function(a){var b=[],c=[],d=[];C.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2)});return{_0:b,_1:c,_2:d}};C.unzip4=function(a){var b=
[],c=[],d=[],e=[];C.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3)});return{_0:b,_1:c,_2:d,_3:e}};C.unzip5=function(a){var b=[],c=[],d=[],e=[],f=[];C.forEach(a,function(a){b.push(a._0);c.push(a._1);d.push(a._2);e.push(a._3);f.push(a._4)});return{_0:b,_1:c,_2:d,_3:e,_4:f}};C.zip=function(a,b){for(var c=[];a.hasNext()&&b.hasNext();){var d={_0:a.next(),_1:b.next()};c.push(d)}return c};C.zip3=function(a,b,c){for(var d=[];a.hasNext()&&b.hasNext()&&c.hasNext();){var e={_0:a.next(),
_1:b.next(),_2:c.next()};d.push(e)}return d};C.zip4=function(a,b,c,d){for(var e=[];a.hasNext()&&b.hasNext()&&c.hasNext()&&d.hasNext();){var f={_0:a.next(),_1:b.next(),_2:c.next(),_3:d.next()};e.push(f)}return e};C.zip5=function(a,b,c,d,e){for(var f=[];a.hasNext()&&b.hasNext()&&c.hasNext()&&d.hasNext()&&e.hasNext();){var h={_0:a.next(),_1:b.next(),_2:c.next(),_3:d.next(),_4:e.next()};f.push(h)}return f};var Nc=function(a,b){this.base=a;this.f=b};Nc.__name__=["thx","MapIterator"];Nc.prototype={base:null,
f:null,next:function(){return this.f(this.base.next())},hasNext:function(){return this.base.hasNext()},__class__:Nc};var Oc=function(a,b){this.i=0;this.base=a;this.f=b};Oc.__name__=["thx","MapIIterator"];Oc.prototype={base:null,f:null,i:null,next:function(){var a=this.f(this.base.next(),this.i);this.i++;return a},hasNext:function(){return this.base.hasNext()},__class__:Oc};var Ha=function(){};Ha.__name__=["thx","Maps"];Ha.copyTo=function(a,b){for(var c=a.keys();c.hasNext();){var d=c.next();b.set(d,
a.get(d))}return b};Ha.tuples=function(a){return C.map(a.keys(),function(b){return{_0:b,_1:a.get(b)}})};Ha.mapValues=function(a,b,c){return Ha.reduce(a,function(a,c){a.set(c._0,b(c._1));return a},c)};Ha.reduce=function(a,b,c){return l.reduce(Ha.tuples(a),b,c)};Ha.values=function(a){return C.map(a.keys(),function(b){return a.get(b)})};Ha.foldLeftWithKeys=function(a,b,c){return C.reduce(a.keys(),function(c,e){return b(c,e,a.get(e))},c)};Ha.getOption=function(a,b){var c=a.get(b);return null==c?B.None:
B.Some(c)};Ha.toObject=function(a){return l.reduce(Ha.tuples(a),function(a,c){a[c._0]=c._1;return a},{})};Ha.getAlt=function(a,b,c){a=a.get(b);return null==a?c:a};Ha.isMap=function(a){return R.__instanceof(a,kb)};Ha.string=function(a){return"["+Ha.tuples(a).map(function(a){return xa.string(a._0)+" => "+xa.string(a._1)}).join(", ")+"]"};Ha.merge=function(a,b){return l.reduce(b,function(a,b){return C.reduce(b.keys(),function(a,c){a.set(c,b.get(c));return a},a)},a)};var Ab={__name__:["thx","_Monoid",
"Monoid_Impl_"],get_semigroup:function(a){return a.append},get_zero:function(a){return a.zero},append:function(a,b,c){return a.append(b,c)}},oa={__name__:["thx","_Nel","Nel_Impl_"],nel:function(a,b){var c=oa.fromArray(b);switch(c[1]){case 0:return oa.cons(a,c[2]);case 1:return oa.pure(a)}},pure:function(a){return mb.Single(a)},cons:function(a,b){return mb.ConsNel(a,b)},fromArray:function(a){if(0==a.length)return B.None;for(var b=mb.Single(a[a.length-1]),c=P.rangeIter(a.length-2,-1,-1);c.hasNext();)var d=
c.next(),b=mb.ConsNel(a[d],b);return B.Some(b)},map:function(a,b){return oa.flatMap(a,function(a){return oa.pure(b(a))})},flatMap:function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:var c=a[3];return oa.append(b(a[2]),oa.flatMap(c,b))}},fold:function(a,b){switch(a[1]){case 0:return a[2];case 1:return b(a[2],oa.fold(a[3],b))}},append:function(a,b){switch(a[1]){case 0:return mb.ConsNel(a[2],b);case 1:return mb.ConsNel(a[2],oa.append(a[3],b))}},head:function(a){switch(a[1]){case 0:return a[2];case 1:return a[2]}},
tail:function(a){switch(a[1]){case 0:return[];case 1:return oa.toArray(a[3])}},init:function(a){switch(a[1]){case 0:return[];case 1:return[a[2]].concat(oa.init(a[3]))}},last:function(a){switch(a[1]){case 0:return a[2];case 1:return oa.last(a[3])}},push:function(a,b){return oa.append(a,mb.Single(b))},pop:function(a){return{_0:oa.last(a),_1:oa.init(a)}},unshift:function(a,b){return mb.ConsNel(b,a)},shift:function(a){return{_0:oa.head(a),_1:oa.tail(a)}},toArray:function(a){var b=null,b=function(a,d){switch(d[1]){case 0:return l.append(a,
d[2]);case 1:var c=d[3],f=l.append(a,d[2]);return b(f,c)}};return b([],a)},semigroup:function(){return function(a,b){return oa.append(a,b)}}},mb={__ename__:["thx","NonEmptyList"],__constructs__:["Single","ConsNel"],Single:function(a){a=["Single",0,a];a.__enum__=mb;return a},ConsNel:function(a,b){var c=["ConsNel",1,a,b];c.__enum__=mb;return c}},Ob={__ename__:["thx","Nil"],__constructs__:["nil"],nil:["nil",0]};Ob.nil.__enum__=Ob;var da=function(){};da.__name__=["thx","Objects"];da.compare=function(a,
b){var c,d=G.fields(a);c=l.compare(d,G.fields(b));if(0!=c)return c;for(var e=0;e<d.length;)if(c=d[e],++e,c=xa.compare(G.field(a,c),G.field(b,c)),0!=c)return c;return 0};da.isEmpty=function(a){return 0==G.fields(a).length};da.exists=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};da.fields=function(a){return G.fields(a)};da.deflate=function(a,b){null==b&&(b=!0);var c=null,c=function(a){return a instanceof Array&&null==a.__enum__?b?Q.Right(l.reducei(a,function(a,b,d){b=c(b);switch(b[1]){case 0:b=
b[2];d=""+d;null!=k[d]?a.setReserved(d,b):a.h[d]=b;break;case 1:b=b[2];for(var e=b.keys();e.hasNext();){var f=e.next(),h=""+d+"."+f,f=null!=k[f]?b.getReserved(f):b.h[f];null!=k[h]?a.setReserved(h,f):a.h[h]=f}}return a},new x)):Q.Left(a):G.isObject(a)&&null==(null==a?null:R.getClass(a))?Q.Right(l.reduce(G.fields(a),function(b,d){var e=G.field(a,d),e=c(e);switch(e[1]){case 0:var e=e[2],f=""+d;null!=k[f]?b.setReserved(f,e):b.h[f]=e;break;case 1:for(e=e[2],f=e.keys();f.hasNext();){var h=f.next(),g=""+
d+"."+h,h=null!=k[h]?e.getReserved(h):e.h[h];null!=k[g]?b.setReserved(g,h):b.h[g]=h}}return b},new x)):Q.Left(a)},d=c(a);switch(d[1]){case 0:return d[2];case 1:return Ha.toObject(d[2])}};da.inflate=function(a){return l.reduce(G.fields(a),function(b,c){return da.setPath(b,c,G.field(a,c))},{})};da.combine=function(a,b){return da.shallowCombine(a,b)};da.shallowCombine=function(a,b){for(var c={},d=0,e=G.fields(a);d<e.length;){var f=e[d];++d;c[f]=G.field(a,f)}d=0;for(e=G.fields(b);d<e.length;)f=e[d],++d,
c[f]=G.field(b,f);return c};da.deepCombine=function(a,b){return da.copyTo(b,a,!0)};da.assign=function(a,b,c){null==c&&(c=function(a,b,c){return c});for(var d=0,e=G.fields(b);d<e.length;){var f=e[d];++d;var h=G.field(b,f);Object.prototype.hasOwnProperty.call(a,f)?a[f]=c(f,G.field(a,f),h):a[f]=h}return a};da.copyTo=function(a,b,c){null==c&&(c=!1);for(var d=0,e=G.fields(a);d<e.length;){var f=e[d];++d;var h=xa.clone(G.field(a,f),c),g=G.field(b,f),k;G.isObject(h)?(k=h,k=null==(null==k?null:R.getClass(k))):
k=!1;k?G.isObject(g)?(k=g,k=null==(null==k?null:R.getClass(k))):k=!1:k=!1;k?da.copyTo(h,g):b[f]=h}return b};da.clone=function(a,b){null==b&&(b=!1);return xa.clone(a,b)};da.toMap=function(a){return l.reduce(da.tuples(a),function(a,c){var b=c._0,e=c._1;null!=k[b]?a.setReserved(b,e):a.h[b]=e;return a},new x)};da.size=function(a){return G.fields(a).length};da.string=function(a){return"{"+G.fields(a).map(function(b){var c=G.field(a,b),c="string"==typeof c?r.quote(c):xa.string(c);return""+b+" : "+c}).join(", ")+
"}"};da.stringImpl=function(a,b){};da.values=function(a){return G.fields(a).map(function(b){return G.field(a,b)})};da.tuples=function(a){return G.fields(a).map(function(b){return{_0:b,_1:G.field(a,b)}})};da.hasPath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");for(var c=b.split("."),d=a,e=0;e<c.length;){var f=c[e];++e;if(r.DIGITS.match(f)){f=H.parseInt(f);d=d instanceof Array?d:null;if(null==d||d.length<=f)return!1;d=d[f]}else if(Object.prototype.hasOwnProperty.call(d,f))d=G.field(d,
f);else return!1}return!0};da.hasPathValue=function(a,b){return null!=da.getPath(a,b)};da.getPath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");for(var c=b.split("."),d=a,e=0;e<c.length;){var f=c[e];++e;if(null==d)return null;if(r.DIGITS.match(f)){f=H.parseInt(f);d=d instanceof Array?d:null;if(null==d)return null;d=d[f]}else if(Object.prototype.hasOwnProperty.call(d,f))d=G.field(d,f);else return null}return d};da.getPathOption=function(a,b){var c=da.getPath(a,b);return null==c?B.None:
B.Some(c)};da.parsePath=function(a,b,c){a=p.toSuccessNel(da.getPathOption(a,b),"Object does not contain path "+b);switch(a[1]){case 0:return Q.Left(a[2]);case 1:return c(a[2])}};da.getPathOr=function(a,b,c){return p.getOrElse(da.getPathOption(a,b),c)};da.setPath=function(a,b,c){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");var d=b.split(".");b=a;for(var e=0,f=d.length-1;e<f;){var h=e++,g=d[h],h=d[h+1];r.DIGITS.match(g)||"*"==g?(g="*"==g?b.length:H.parseInt(g),null==b[g]&&(r.DIGITS.match(h)||"*"==
h?b[g]=[]:b[g]={}),b=b[g]):(Object.prototype.hasOwnProperty.call(b,g)||(r.DIGITS.match(h)||"*"==h?b[g]=[]:b[g]={}),b=G.field(b,g))}d=d[d.length-1];r.DIGITS.match(d)?(d=H.parseInt(d),b[d]=c):"*"==d?b.push(c):b[d]=c;return a};da.removePath=function(a,b){b=b.replace(RegExp("\\[(\\d+)\\]","g"),".$1");var c=b.split("."),d=c.pop();try{var e=l.reduce(c,function(a,b){if("*"==b)return a.pop();if(r.DIGITS.match(b)){var c=H.parseInt(b);return a[c]}return G.field(a,b)},a);null!=e&&G.deleteField(e,d)}catch(f){fa.lastException=
f}return a};da.normalizePath=function(a){return a.replace(RegExp("\\[(\\d+)\\]","g"),".$1")};var p=function(){};p.__name__=["thx","Options"];p.ofValue=function(a){return null==a?B.None:B.Some(a)};p.maybe=function(a){return null==a?B.None:B.Some(a)};p.equals=function(a,b,c){switch(a[1]){case 0:return 0==b[1]?(a=a[2],b=b[2],null==c&&(c=function(a,b){return a==b}),c(a,b)):!1;case 1:return 1==b[1]?!0:!1}};p.equalsValue=function(a,b,c){return p.equals(a,null==b?B.None:B.Some(b),c)};p.map=function(a,b){switch(a[1]){case 0:return B.Some(b(a[2]));
case 1:return B.None}};p.ap=function(a,b){switch(a[1]){case 0:var c=a[2];return p.map(b,function(a){return a(c)});case 1:return B.None}};p.flatMap=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return B.None}};p.join=function(a){switch(a[1]){case 0:return a[2];case 1:return B.None}};p.cata=function(a,b,c){switch(a[1]){case 0:return c(a[2]);case 1:return b}};p.cataf=function(a,b,c){switch(a[1]){case 0:return c(a[2]);case 1:return b()}};p.foldLeft=function(a,b,c){switch(a[1]){case 0:return c(b,
a[2]);case 1:return b}};p.foldLeftf=function(a,b,c){switch(a[1]){case 0:return a=a[2],c(b(),a);case 1:return b()}};p.foldMap=function(a,b,c){return p.foldLeft(p.map(a,b),Ab.get_zero(c),function(a,b){return Ab.append(c,a,b)})};p.filter=function(a,b){return 0==a[1]?b(a[2])?a:B.None:B.None};p.toArray=function(a){switch(a[1]){case 0:return[a[2]];case 1:return[]}};p.toBool=function(a){switch(a[1]){case 0:return!0;case 1:return!1}};p.isNone=function(a){return!p.toBool(a)};p.toOption=function(a){return null==
a?B.None:B.Some(a)};p.get=function(a){switch(a[1]){case 0:return a[2];case 1:return null}};p.getOrElse=function(a,b){switch(a[1]){case 0:return a[2];case 1:return b}};p.getOrThrow=function(a,b,c){null==b&&(b=new ba("Could not extract value from option",null,c));switch(a[1]){case 0:return a[2];case 1:throw b;}};p.getOrFail=function(a,b,c){return p.getOrThrow(a,new ba(b,null,c),{fileName:"Options.hx",lineNumber:199,className:"thx.Options",methodName:"getOrFail"})};p.orElse=function(a,b){switch(a[1]){case 0:return a;
case 1:return b}};p.all=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return!0}};p.any=function(a,b){switch(a[1]){case 0:return b(a[2]);case 1:return!1}};p.traverseValidation=function(a,b){switch(a[1]){case 0:return F.map(b(a[2]),function(a){return B.Some(a)});case 1:return Q.Right(B.None)}};p.toSuccess=function(a,b){switch(a[1]){case 0:return Q.Right(a[2]);case 1:return Q.Left(b)}};p.toSuccessNel=function(a,b){switch(a[1]){case 0:return Q.Right(a[2]);case 1:return Q.Left(oa.pure(b))}};
p.toFailure=function(a,b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:return Q.Right(b)}};p.toFailureNel=function(a,b){switch(a[1]){case 0:return Q.Left(oa.pure(a[2]));case 1:return Q.Right(b)}};p.toRight=function(a,b){switch(a[1]){case 0:return Q.Right(a[2]);case 1:return Q.Left(b)}};p.toLeft=function(a,b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:return Q.Right(b)}};p.each=function(a,b){switch(a[1]){case 0:return b(a[2]),a;case 1:return a}};p.ap2=function(a,b,c){return p.ap(c,p.map(b,la.curry(a)))};
p.ap3=function(a,b,c,d){return p.ap(d,p.ap(c,p.map(b,la.curry(function(b,c){return function(d){return a(b,c,d)}}))))};p.ap4=function(a,b,c,d,e){var f=function(b,c,d){return function(e){return a(b,c,d,e)}};return p.ap(e,p.ap(d,p.ap(c,p.map(b,la.curry(function(a,b){return function(c){return f(a,b,c)}})))))};p.ap5=function(a,b,c,d,e,f){var h=function(b,c,d,e){return function(f){return a(b,c,d,e,f)}},g=function(a,b,c){return function(d){return h(a,b,c,d)}};return p.ap(f,p.ap(e,p.ap(d,p.ap(c,p.map(b,la.curry(function(a,
b){return function(c){return g(a,b,c)}}))))))};p.ap6=function(a,b,c,d,e,f,h){var g=function(b,c,d,e,f){return function(h){return a(b,c,d,e,f,h)}},k=function(a,b,c,d){return function(e){return g(a,b,c,d,e)}},l=function(a,b,c){return function(d){return k(a,b,c,d)}};return p.ap(h,p.ap(f,p.ap(e,p.ap(d,p.ap(c,p.map(b,la.curry(function(a,b){return function(c){return l(a,b,c)}})))))))};p.ap7=function(a,b,c,d,e,f,h,g){var t=function(b,c,d,e,f,h){return function(g){return a(b,c,d,e,f,h,g)}},k=function(a,b,
c,d,e){return function(f){return t(a,b,c,d,e,f)}},l=function(a,b,c,d){return function(e){return k(a,b,c,d,e)}},n=function(a,b,c){return function(d){return l(a,b,c,d)}};return p.ap(g,p.ap(h,p.ap(f,p.ap(e,p.ap(d,p.ap(c,p.map(b,la.curry(function(a,b){return function(c){return n(a,b,c)}}))))))))};p.ap8=function(a,b,c,d,e,f,h,g,k){var t=function(b,c,d,e,f,h,g){return function(t){return a(b,c,d,e,f,h,g,t)}},l=function(a,b,c,d,e,f){return function(h){return t(a,b,c,d,e,f,h)}},n=function(a,b,c,d,e){return function(f){return l(a,
b,c,d,e,f)}},m=function(a,b,c,d){return function(e){return n(a,b,c,d,e)}},q=function(a,b,c){return function(d){return m(a,b,c,d)}};return p.ap(k,p.ap(g,p.ap(h,p.ap(f,p.ap(e,p.ap(d,p.ap(c,p.map(b,la.curry(function(a,b){return function(c){return q(a,b,c)}})))))))))};p.combine=function(a,b){return p.ap(b,p.map(a,la.curry(cd.of)))};p.combine2=function(a,b){return p.ap(b,p.map(a,la.curry(cd.of)))};p.combine3=function(a,b,c){var d=kd.of;return p.ap(c,p.ap(b,p.map(a,la.curry(function(a,b){return function(c){return d(a,
b,c)}}))))};p.combine4=function(a,b,c,d){var e=ld.of,f=function(a,b,c){return function(d){return e(a,b,c,d)}};return p.ap(d,p.ap(c,p.ap(b,p.map(a,la.curry(function(a,b){return function(c){return f(a,b,c)}})))))};p.combine5=function(a,b,c,d,e){var f=md.of,h=function(a,b,c,d){return function(e){return f(a,b,c,d,e)}},g=function(a,b,c){return function(d){return h(a,b,c,d)}};return p.ap(e,p.ap(d,p.ap(c,p.ap(b,p.map(a,la.curry(function(a,b){return function(c){return g(a,b,c)}}))))))};p.combine6=function(a,
b,c,d,e,f){var h=nd.of,g=function(a,b,c,d,e){return function(f){return h(a,b,c,d,e,f)}},k=function(a,b,c,d){return function(e){return g(a,b,c,d,e)}},l=function(a,b,c){return function(d){return k(a,b,c,d)}};return p.ap(f,p.ap(e,p.ap(d,p.ap(c,p.ap(b,p.map(a,la.curry(function(a,b){return function(c){return l(a,b,c)}})))))))};p.spread2=function(a,b){return p.map(a,function(a){return b(a._0,a._1)})};p.spread=function(a,b){return p.map(a,function(a){return b(a._0,a._1)})};p.spread3=function(a,b){return p.map(a,
function(a){return b(a._0,a._1,a._2)})};p.spread4=function(a,b){return p.map(a,function(a){return b(a._0,a._1,a._2,a._3)})};p.spread5=function(a,b){return p.map(a,function(a){return b(a._0,a._1,a._2,a._3,a._4)})};p.spread6=function(a,b){return p.map(a,function(a){return b(a._0,a._1,a._2,a._3,a._4,a._5)})};var zb={__name__:["thx","_ReadonlyArray","ReadonlyArray_Impl_"],empty:function(){return[]},flatten:function(a){return Array.prototype.concat.apply([],a)},indexOf:function(a,b,c){null==c&&(c=Aa.equality);
for(var d=0,e=a.length;d<e;){var f=d++;if(c(b,a[f]))return f}return-1},lastIndexOf:function(a,b,c){null==c&&(c=Aa.equality);for(var d=a.length,e=0;e<d;){var f=e++;if(c(b,a[d-f-1]))return f}return-1},get_length:function(a){return a.length},get:function(a,b){return a[b]},head:function(a){return a[0]},tail:function(a){return a.slice(1)},reduce:function(a,b,c,d){for(a=0;a<b.length;){var e=b[a];++a;d=c(d,e)}return d},reducei:function(a,b,c){for(var d=0,e=a.length;d<e;){var f=d++;c=b(c,a[f],f)}return c},
reverse:function(a){a=a.slice();a.reverse();return a},toArray:function(a){return a.slice()},unsafe:function(a){return a},concat:function(a,b){return a.concat(b)},insertAt:function(a,b,c){return a.slice(0,b).concat([c]).concat(a.slice(b))},insertAfter:function(a,b,c,d){b=zb.indexOf(a,b,d);0>b&&(b=a.length-1);b+=1;return a.slice(0,b).concat([c]).concat(a.slice(b))},insertBefore:function(a,b,c,d){b=zb.indexOf(a,b,d);return a.slice(0,b).concat([c]).concat(a.slice(b))},replace:function(a,b,c,d){b=zb.indexOf(a,
b,d);if(0>b)throw new ba("unable to find reference element",null,{fileName:"ReadonlyArray.hx",lineNumber:94,className:"thx._ReadonlyArray.ReadonlyArray_Impl_",methodName:"replace"});return a.slice(0,b).concat([c]).concat(a.slice(b+1))},replaceAt:function(a,b,c){return a.slice(0,b).concat([c]).concat(a.slice(b+1))},remove:function(a,b,c){b=zb.indexOf(a,b,c);return a.slice(0,b).concat(a.slice(b+1))},removeAt:function(a,b){return a.slice(0,b).concat(a.slice(b+1))},prepend:function(a,b){return[b].concat(a)},
append:function(a,b){return a.concat([b])},unshift:function(a,b){return[b].concat(a)},shift:function(a){if(0==a.length)return{_0:null,_1:a};var b=a[0];a=a.slice(0,0).concat(a.slice(1));return{_0:b,_1:a}},push:function(a,b){return a.concat([b])},pop:function(a){if(0==a.length)return{_0:null,_1:a};var b=a[a.length-1],c=a.length-1;a=a.slice(0,c).concat(a.slice(c+1));return{_0:b,_1:a}},iterator:function(a){return L.iter(a)}},dd={__name__:["thx","_Semigroup","Semigroup_Impl_"],get_append:function(a){return a}},
ha={__name__:["thx","_Set","Set_Impl_"],createString:function(a){var b=new x;null!=a&&ha.pushMany(b,a);return b},createInt:function(a){var b=new Qb;null!=a&&ha.pushMany(b,a);return b},createObject:function(a){var b=new nb;null!=a&&ha.pushMany(b,a);return b},createEnum:function(a){var b=new Tb;null!=a&&ha.pushMany(b,a);return b},_new:function(a){return a},add:function(a,b){if(a.exists(b))return!1;a.set(b,!0);return!0},copy:function(a){var b=ha.empty(a);for(a=a.keys();a.hasNext();){var c=a.next();b.set(c,
!0)}return b},empty:function(a){return aa.createInstance(null==a?null:R.getClass(a),[])},difference:function(a,b){for(var c=ha.copy(a),d=n(ha)(b);d.hasNext();){var e=d.next();c.remove(e)}return c},filter:function(a,b){return ha.reduce(a,function(a,d){b(d)&&ha.add(a,d);return a},ha.empty(a))},map:function(a,b){return ha.reduce(a,function(a,d){a.push(b(d));return a},[])},exists:function(a,b){return a.exists(b)},remove:function(a,b){return a.remove(b)},intersection:function(a,b){for(var c=ha.empty(a),
d=n(ha)(a);d.hasNext();){var e=d.next();b.exists(e)&&c.set(e,!0)}return c},push:function(a,b){a.set(b,!0)},pushMany:function(a,b){for(var c=n(b)();c.hasNext();){var d=c.next();a.set(d,!0)}},reduce:function(a,b,c){for(a=n(ha)(a);a.hasNext();){var d=a.next();c=b(c,d)}return c},iterator:function(a){return a.keys()},union:function(a,b){var c=ha.copy(a);ha.pushMany(c,ha.toArray(b));return c},toArray:function(a){var b=[];for(a=a.keys();a.hasNext();){var c=a.next();b.push(c)}return b},toString:function(a){return"{"+
ha.toArray(a).join(", ")+"}"},get_length:function(a){var b=0;for(a=a.iterator();a.hasNext();)a.next(),++b;return b}},r=function(){};r.__name__=["thx","Strings"];r.after=function(a,b){var c=a.indexOf(b);return 0>c?"":a.substring(c+b.length)};r.afterLast=function(a,b){var c=a.lastIndexOf(b);return 0>c?"":a.substring(c+b.length)};r.capitalize=function(a){return L.substr(a,0,1).toUpperCase()+L.substr(a,1,a.length-1)};r.capitalizeWords=function(a,b){null==b&&(b=!1);return b?r.UCWORDSWS.map(L.substr(a,
0,1).toUpperCase()+L.substr(a,1,a.length-1),r.upperMatch):r.UCWORDS.map(L.substr(a,0,1).toUpperCase()+L.substr(a,1,a.length-1),r.upperMatch)};r.canonicalizeNewlines=function(a){return a.replace(r.CANONICALIZE_LINES.r,"\n")};r.caseInsensitiveCompare=function(a,b){return null==a&&null==b?0:null==a?-1:null==b?1:Mb.compare(a.toLowerCase(),b.toLowerCase())};r.caseInsensitiveEndsWith=function(a,b){return E.endsWith(a.toLowerCase(),b.toLowerCase())};r.caseInsensitiveEndsWithAny=function(a,b){return r.endsWithAny(a.toLowerCase(),
b.map(function(a){return a.toLowerCase()}))};r.caseInsensitiveStartsWith=function(a,b){return E.startsWith(a.toLowerCase(),b.toLowerCase())};r.caseInsensitiveStartsWithAny=function(a,b){return r.startsWithAny(a.toLowerCase(),b.map(function(a){return a.toLowerCase()}))};r.collapse=function(a){var b=r.WSG;return E.trim(a).replace(b.r," ")};r.compare=function(a,b){return Mb.compare(a,b)};r.caseInsensitiveContains=function(a,b){return 0<=a.toLowerCase().indexOf(b.toLowerCase())};r.contains=function(a,
b){return 0<=a.indexOf(b)};r.count=function(a,b){return a.split(b).length-1};r.caseInsensitiveContainsAny=function(a,b){return l.any(b,function(b){return r.caseInsensitiveContains(a,b)})};r.containsAny=function(a,b){return l.any(b,function(b){return r.contains(a,b)})};r.caseInsensitiveContainsAll=function(a,b){return l.all(b,function(b){return r.caseInsensitiveContains(a,b)})};r.containsAll=function(a,b){return l.all(b,function(b){return r.contains(a,b)})};r.dasherize=function(a){return E.replace(a,
"_","-")};r.diffAt=function(a,b){for(var c=a.length,d=b.length,c=c<d?c:d,d=0;d<c;){var e=d++;if(a.substring(e,e+1)!=b.substring(e,e+1))return e}return c};r.ellipsis=function(a,b,c){null==c&&(c="\u2026");null==b&&(b=20);var d=c.length;return a.length>b?b<d?L.substr(c,d-b,b):L.substr(a,0,b-d)+c:a};r.ellipsisMiddle=function(a,b,c){null==c&&(c="\u2026");null==b&&(b=20);var d=a.length,e=c.length;if(d>b){if(b<=e)return r.ellipsis(a,b,c);var f=Math.floor((b-e)/2);return L.substr(a,0,Math.ceil((b-e)/2))+
c+L.substr(a,d-f,f)}return a};r.endsWithAny=function(a,b){return U.any(b,function(b){return E.endsWith(a,b)})};r.filter=function(a,b){return a.split("").filter(b).join("")};r.filterCharcode=function(a,b){return r.map(a,function(a){return L.cca(a,0)}).filter(b).map(function(a){return String.fromCharCode(a)}).join("")};r.from=function(a,b){var c=a.indexOf(b);return 0>c?"":a.substring(c)};r.hashCode=function(a){for(var b=0,c=0,d=a.length;c<d;)var e=c++,e=L.cca(a,e),b=(Ra._mul(r.HASCODE_MUL,b)+e|0)%r.HASCODE_MAX;
return b};r.hasContent=function(a){return null!=a?0<a.length:!1};r.humanize=function(a){return E.replace(r.underscore(a),"_"," ")};r.isAlpha=function(a){return 0<a.length?!r.IS_ALPHA.match(a):!1};r.isAlphaNum=function(a){return r.ALPHANUM.match(a)};r.isBreakingWhitespace=function(a){return!r.IS_BREAKINGWHITESPACE.match(a)};r.isLowerCase=function(a){return a.toLowerCase()==a};r.isUpperCase=function(a){return a.toUpperCase()==a};r.ifEmpty=function(a,b){return null!=a&&""!=a?a:b};r.isDigitsOnly=function(a){return r.DIGITS.match(a)};
r.isEmpty=function(a){return null!=a?""==a:!0};r.lowerCaseFirst=function(a){return a.substring(0,1).toLowerCase()+a.substring(1)};r.random=function(a,b){null==b&&(b=1);return L.substr(a,Math.floor((a.length-b+1)*Math.random()),b)};r.randomSequence=function(a,b){return P.range(0,b).map(function(b){return r.random(a)}).join("")};r.randomSequence64=function(a){return r.randomSequence(Vc.CHARS,a)};r.iterator=function(a){return L.iter(a.split(""))};r.map=function(a,b){return a.split("").map(b)};r.remove=
function(a,b){return E.replace(a,b,"")};r.removeAfter=function(a,b){return E.endsWith(a,b)?a.substring(0,a.length-b.length):a};r.removeAt=function(a,b,c){return a.substring(0,b)+a.substring(b+c)};r.removeBefore=function(a,b){return E.startsWith(a,b)?a.substring(b.length):a};r.removeOne=function(a,b){var c=a.indexOf(b);return 0>c?a:a.substring(0,c)+a.substring(c+b.length)};r.repeat=function(a,b){for(var c=[],d=0;d<b;)d++,c.push(a);return c.join("")};r.reverse=function(a){a=a.split("");a.reverse();
return a.join("")};r.quote=function(a){return 0>a.indexOf('"')?'"'+a+'"':0>a.indexOf("'")?"'"+a+"'":'"'+E.replace(a,'"','\\"')+'"'};r.splitOnce=function(a,b){var c=a.indexOf(b);return 0>c?[a]:[a.substring(0,c),a.substring(c+b.length)]};r.startsWithAny=function(a,b){return U.any(b,function(b){return E.startsWith(a,b)})};r.stripTags=function(a){return a.replace(r.STRIPTAGS.r,"")};r.surround=function(a,b,c){return""+b+a+(null==c?b:c)};r.toArray=function(a){return a.split("")};r.toCharcodes=function(a){return r.map(a,
function(a){return L.cca(a,0)})};r.toChunks=function(a,b){for(var c=[];0<a.length;)c.push(L.substr(a,0,b)),a=L.substr(a,b,a.length-b);return c};r.toLines=function(a){return r.SPLIT_LINES.split(a)};r.trimChars=function(a,b){return r.trimCharsRight(r.trimCharsLeft(a,b),b)};r.trimCharsLeft=function(a,b){for(var c=0,d=0,e=a.length;d<e;){var f=d++;if(0<=b.indexOf(a.charAt(f)))++c;else break}return a.substring(c)};r.trimCharsRight=function(a,b){for(var c=a.length,d=c,e,f=0;f<c;)if(e=f++,e=c-e-1,0<=b.indexOf(a.charAt(e)))d=
e;else break;return a.substring(0,d)};r.underscore=function(a){a=a.replace(RegExp("::","g"),"/");a=a.replace(RegExp("([A-Z]+)([A-Z][a-z])","g"),"$1_$2");a=a.replace(RegExp("([a-z\\d])([A-Z])","g"),"$1_$2");a=a.replace(RegExp("-","g"),"_");return a.toLowerCase()};r.upperCaseFirst=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)};r.upTo=function(a,b){var c=a.indexOf(b);return 0>c?a:a.substring(0,c)};r.wrapColumns=function(a,b,c,d){null==d&&(d="\n");null==c&&(c="");null==b&&(b=78);return r.SPLIT_LINES.split(a).map(function(a){return r.wrapLine(E.trim(a.replace(r.WSG.r,
" ")),b,c,d)}).join(d)};r.upperMatch=function(a){return a.matched(0).toUpperCase()};r.wrapLine=function(a,b,c,d){var e=[],f=0,h=a.length,g=c.length;for(b-=g;;){if(f+b>=h-g){e.push(a.substring(f));break}for(var k=0;!E.isSpace(a,f+b-k)&&k<b;)++k;if(k==b){for(k=0;!E.isSpace(a,f+b+k)&&f+b+k<h;)++k;e.push(a.substring(f,f+b+k));f+=b+k+1}else e.push(a.substring(f,f+b-k)),f+=b-k+1}return c+e.join(d+c)};r.lpad=function(a,b,c){c-=a.length;return 0<c?r.repeat(b,c)+a:a};r.rpad=function(a,b,c){c-=a.length;return 0<
c?a+r.repeat(b,c):a};var ea={__ename__:["thx","TimePeriod"],__constructs__:"Second Minute Hour Day Week Month Year".split(" "),Second:["Second",0]};ea.Second.__enum__=ea;ea.Minute=["Minute",1];ea.Minute.__enum__=ea;ea.Hour=["Hour",2];ea.Hour.__enum__=ea;ea.Day=["Day",3];ea.Day.__enum__=ea;ea.Week=["Week",4];ea.Week.__enum__=ea;ea.Month=["Month",5];ea.Month.__enum__=ea;ea.Year=["Year",6];ea.Year.__enum__=ea;var sa=function(){};sa.__name__=["thx","Timer"];sa.debounce=function(a,b,c){null==c&&(c=!1);
var d=Aa.noop;return function(){c&&(c=!1,a());d();d=sa.delay(a,b)}};sa.throttle=function(a,b,c){null==c&&(c=!1);var d=!1;return function(){c?(c=!1,a()):d||(d=!0,sa.delay(a,b))}};sa.repeat=function(a,b){var c=setInterval(a,b);return function(){sa.clear(c)}};sa.delay=function(a,b){var c=setTimeout(a,b);return function(){sa.clear(c)}};sa.frame=function(a){var b=!1,c=Aa.noop,d=performance.now(),e,c=function(){b||(e=performance.now(),a(e-d),d=e,requestAnimationFrame(c))};requestAnimationFrame(c);return function(){b=
!0}};sa.nextFrame=function(a){var b=requestAnimationFrame(a);return function(){cancelAnimationFrame(b)}};sa.immediate=function(a){var b=setImmediate(a);return function(){sa.clear(b)}};sa.clear=function(a){clearTimeout(a)};sa.time=function(){return performance.now()};sa.resolution=function(){if(null!=sa._resolution)return sa._resolution;for(var a=performance.now(),b,c=0;++c,b=performance.now(),0==b-a;);return sa._resolution=b-a};var Wc={__name__:["thx","_Timestamp","Timestamp_Impl_"],create:function(a,
b,c,d,e,f){return v.create(a,b,c,d,e,f).getTime()},now:function(){return(new Date).getTime()},fromDate:function(a){return a.getTime()},fromString:function(a){return L.strDate(a).getTime()},toDate:function(a){return new Date(a)},toString:function(a){return L.dateStr(new Date(a))},snapNext:function(a,b){switch(b[1]){case 0:return 1E3*Math.ceil(a/1E3);case 1:return 6E4*Math.ceil(a/6E4);case 2:return 36E5*Math.ceil(a/36E5);case 3:var c=new Date(a);return v.create(c.getFullYear(),c.getMonth(),c.getDate()+
1,0,0,0).getTime();case 4:var c=new Date(a),d=c.getDay();return v.create(c.getFullYear(),c.getMonth(),c.getDate()+7-d,0,0,0).getTime();case 5:return c=new Date(a),v.create(c.getFullYear(),c.getMonth()+1,1,0,0,0).getTime();case 6:return v.create((new Date(a)).getFullYear()+1,0,1,0,0,0).getTime()}},snapPrev:function(a,b){switch(b[1]){case 0:return 1E3*Math.floor(a/1E3);case 1:return 6E4*Math.floor(a/6E4);case 2:return 36E5*Math.floor(a/36E5);case 3:var c=new Date(a);return v.create(c.getFullYear(),
c.getMonth(),c.getDate(),0,0,0).getTime();case 4:var c=new Date(a),d=c.getDay();return v.create(c.getFullYear(),c.getMonth(),c.getDate()-d,0,0,0).getTime();case 5:return c=new Date(a),v.create(c.getFullYear(),c.getMonth(),1,0,0,0).getTime();case 6:return v.create((new Date(a)).getFullYear(),0,1,0,0,0).getTime()}},snapTo:function(a,b){switch(b[1]){case 0:return 1E3*Math.round(a/1E3);case 1:return 6E4*Math.round(a/6E4);case 2:return 36E5*Math.round(a/36E5);case 3:var c=new Date(a),d=12<=c.getHours()?
1:0;return v.create(c.getFullYear(),c.getMonth(),c.getDate()+d,0,0,0).getTime();case 4:return c=new Date(a),d=c.getDay(),d=3>d?-d:3<d?7-d:12>c.getHours()?-d:7-d,v.create(c.getFullYear(),c.getMonth(),c.getDate()+d,0,0,0).getTime();case 5:return c=new Date(a),d=c.getDate()>Math.round(ib.getMonthDays(c)/2)?1:0,v.create(c.getFullYear(),c.getMonth()+d,1,0,0,0).getTime();case 6:return c=new Date(a),d=a>(new Date(c.getFullYear(),6,2,0,0,0)).getTime()?1:0,v.create(c.getFullYear()+d,0,1,0,0,0).getTime()}},
r:function(a,b){return Math.round(a/b)*b},f:function(a,b){return Math.floor(a/b)*b},c:function(a,b){return Math.ceil(a/b)*b}},cd={__name__:["thx","_Tuple","Tuple2_Impl_"],of:function(a,b){return{_0:a,_1:b}},_new:function(a,b){return{_0:a,_1:b}},get_left:function(a){return a._0},get_right:function(a){return a._1},flip:function(a){return{_0:a._1,_1:a._0}},dropLeft:function(a){return a._1},dropRight:function(a){return a._0},"with":function(a,b){return{_0:a._0,_1:a._1,_2:b}},toString:function(a){return"Tuple2("+
H.string(a._0)+","+H.string(a._1)+")"},map:function(a,b){return{_0:a._0,_1:b(a._1)}},squeeze:function(a){return function(b){return a(b._0,b._1)}},arrayToTuple2:function(a){return{_0:a[0],_1:a[1]}}},kd={__name__:["thx","_Tuple","Tuple3_Impl_"],of:function(a,b,c){return{_0:a,_1:b,_2:c}},_new:function(a,b,c){return{_0:a,_1:b,_2:c}},flip:function(a){return{_0:a._2,_1:a._1,_2:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2}},dropRight:function(a){return{_0:a._0,_1:a._1}},"with":function(a,b){return{_0:a._0,
_1:a._1,_2:a._2,_3:b}},toString:function(a){return"Tuple3("+H.string(a._0)+","+H.string(a._1)+","+H.string(a._2)+")"},arrayToTuple3:function(a){return{_0:a[0],_1:a[1],_2:a[2]}},map:function(a,b){return{_0:a._0,_1:a._1,_2:b(a._2)}}},ld={__name__:["thx","_Tuple","Tuple4_Impl_"],of:function(a,b,c,d){return{_0:a,_1:b,_2:c,_3:d}},_new:function(a,b,c,d){return{_0:a,_1:b,_2:c,_3:d}},flip:function(a){return{_0:a._3,_1:a._2,_2:a._1,_3:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2,_2:a._3}},dropRight:function(a){return{_0:a._0,
_1:a._1,_2:a._2}},"with":function(a,b){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3,_4:b}},toString:function(a){return"Tuple4("+H.string(a._0)+","+H.string(a._1)+","+H.string(a._2)+","+H.string(a._3)+")"},arrayToTuple4:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3]}}},md={__name__:["thx","_Tuple","Tuple5_Impl_"],of:function(a,b,c,d,e){return{_0:a,_1:b,_2:c,_3:d,_4:e}},_new:function(a,b,c,d,e){return{_0:a,_1:b,_2:c,_3:d,_4:e}},flip:function(a){return{_0:a._4,_1:a._3,_2:a._2,_3:a._1,_4:a._0}},dropLeft:function(a){return{_0:a._1,
_1:a._2,_2:a._3,_3:a._4}},dropRight:function(a){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3}},"with":function(a,b){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3,_4:a._4,_5:b}},toString:function(a){return"Tuple5("+H.string(a._0)+","+H.string(a._1)+","+H.string(a._2)+","+H.string(a._3)+","+H.string(a._4)+")"},arrayToTuple5:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3],_4:a[4]}}},nd={__name__:["thx","_Tuple","Tuple6_Impl_"],of:function(a,b,c,d,e,f){return{_0:a,_1:b,_2:c,_3:d,_4:e,_5:f}},_new:function(a,b,c,
d,e,f){return{_0:a,_1:b,_2:c,_3:d,_4:e,_5:f}},flip:function(a){return{_0:a._5,_1:a._4,_2:a._3,_3:a._2,_4:a._1,_5:a._0}},dropLeft:function(a){return{_0:a._1,_1:a._2,_2:a._3,_3:a._4,_4:a._5}},dropRight:function(a){return{_0:a._0,_1:a._1,_2:a._2,_3:a._3,_4:a._4}},toString:function(a){return"Tuple6("+H.string(a._0)+","+H.string(a._1)+","+H.string(a._2)+","+H.string(a._3)+","+H.string(a._4)+","+H.string(a._5)+")"},arrayToTuple6:function(a){return{_0:a[0],_1:a[1],_2:a[2],_3:a[3],_4:a[4],_5:a[5]}}},wa=function(){};
wa.__name__=["thx","Types"];wa.isAnonymousObject=function(a){return G.isObject(a)?null==(null==a?null:R.getClass(a)):!1};wa.isObject=function(a){return G.isObject(a)?!wa.isPrimitive(a):!1};wa.isPrimitive=function(a){a=aa["typeof"](a);switch(a[1]){case 1:case 2:case 3:return!0;case 0:case 4:case 5:case 7:case 8:return!1;case 6:return"String"==aa.getClassName(a[2])?!0:"Date"==aa.getClassName(a[2])?!0:!1}};wa.isEnumValue=function(a){return 7==aa["typeof"](a)[1]?!0:!1};wa.hasSuperClass=function(a,b){for(;null!=
a;){if(a==b)return!0;a=aa.getSuperClass(a)}return!1};wa.sameType=function(a,b){return wa.toString(aa["typeof"](a))==wa.toString(aa["typeof"](b))};wa.typeInheritance=function(a){switch(a[1]){case 1:return["Int"];case 2:return["Float"];case 3:return["Bool"];case 4:return["{}"];case 5:return["Function"];case 6:a=a[2];for(var b=[];null!=a;)b.push(a),a=aa.getSuperClass(a);return b.map(aa.getClassName);case 7:return[aa.getEnumName(a[2])];default:throw new ca("invalid type "+H.string(a));}};wa.toString=
function(a){switch(a[1]){case 0:return"Null";case 1:return"Int";case 2:return"Float";case 3:return"Bool";case 4:return"{}";case 5:return"Function";case 6:return aa.getClassName(a[2]);case 7:return aa.getEnumName(a[2]);default:throw new ca("invalid type "+H.string(a));}};wa.valueTypeInheritance=function(a){return wa.typeInheritance(aa["typeof"](a))};wa.valueTypeToString=function(a){return wa.toString(aa["typeof"](a))};wa.anyValueToString=function(a){return R.__instanceof(a,ga)?wa.toString(a):R.__instanceof(a,
$c)?aa.getClassName(a):R.__instanceof(a,ad)?aa.getEnumName(a):wa.toString(aa["typeof"](a))};var Xc={__ename__:["thx","Unit"],__constructs__:["unit"],unit:["unit",0]};Xc.unit.__enum__=Xc;var F={__name__:["thx","_Validation","Validation_Impl_"],get_either:function(a){return a},pure:function(a){return Q.Right(a)},success:function(a){return Q.Right(a)},failure:function(a){return Q.Left(a)},successNel:function(a){return Q.Right(a)},failureNel:function(a){return Q.Left(oa.pure(a))},nn:function(a,b){return null==
a?Q.Left(b):Q.Right(a)},nnNel:function(a,b){return null==a?Q.Left(oa.pure(b)):Q.Right(a)},map:function(a,b){return ja.map(a,b)},ap:function(a,b,c){switch(a[1]){case 0:a=a[2];switch(b[1]){case 0:return b=b[2],Q.Left(dd.get_append(c)(a,b));case 1:return Q.Left(a)}break;case 1:switch(c=a[2],b[1]){case 0:return Q.Left(b[2]);case 1:return Q.Right((0,b[2])(c))}}},flatMapV:function(a,b){switch(a[1]){case 0:return Q.Left(a[2]);case 1:return b(a[2])}},orElseV:function(a,b,c){switch(a[1]){case 0:switch(b[1]){case 0:return a=
a[2],b=b[2],Q.Left(dd.get_append(c)(a,b));case 1:return b}break;case 1:return a}},foldLeft:function(a,b,c){return ja.foldLeft(a,b,c)},foldMap:function(a,b,c){return ja.foldMap(a,b,c)},leftMap:function(a,b){return ja.leftMap(a,b)},wrapNel:function(a){return ja.leftMap(a,oa.pure)},ensure:function(a,b,c){return ja.ensure(a,b,c)},vnel:function(a){return a},val2:function(a,b,c,d){return F.ap(c,F.map(b,la.curry(a)),d)},val3:function(a,b,c,d,e){return F.ap(d,F.ap(c,F.map(b,la.curry(function(b,c){return function(d){return a(b,
c,d)}})),e),e)},val4:function(a,b,c,d,e,f){var h=function(b,c,d){return function(e){return a(b,c,d,e)}};return F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return h(a,b,c)}})),f),f),f)},val5:function(a,b,c,d,e,f,h){var g=function(b,c,d,e){return function(f){return a(b,c,d,e,f)}},k=function(a,b,c){return function(d){return g(a,b,c,d)}};return F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return k(a,b,c)}})),h),h),h),h)},val6:function(a,b,c,
d,e,f,h,g){var k=function(b,c,d,e,f){return function(h){return a(b,c,d,e,f,h)}},t=function(a,b,c,d){return function(e){return k(a,b,c,d,e)}},l=function(a,b,c){return function(d){return t(a,b,c,d)}};return F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return l(a,b,c)}})),g),g),g),g),g)},val7:function(a,b,c,d,e,f,h,g,k){var t=function(b,c,d,e,f,h){return function(g){return a(b,c,d,e,f,h,g)}},l=function(a,b,c,d,e){return function(f){return t(a,b,c,d,e,f)}},n=function(a,
b,c,d){return function(e){return l(a,b,c,d,e)}},m=function(a,b,c){return function(d){return n(a,b,c,d)}};return F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return m(a,b,c)}})),k),k),k),k),k),k)},val8:function(a,b,c,d,e,f,h,g,k,l){var t=function(b,c,d,e,f,h,g){return function(k){return a(b,c,d,e,f,h,g,k)}},n=function(a,b,c,d,e,f){return function(h){return t(a,b,c,d,e,f,h)}},m=function(a,b,c,d,e){return function(f){return n(a,b,c,d,e,f)}},q=function(a,
b,c,d){return function(e){return m(a,b,c,d,e)}},r=function(a,b,c){return function(d){return q(a,b,c,d)}};return F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return r(a,b,c)}})),l),l),l),l),l),l),l)},val9:function(a,b,c,d,e,f,h,g,k,l,n){var t=function(b,c,d,e,f,h,g,k){return function(t){return a(b,c,d,e,f,h,g,k,t)}},m=function(a,b,c,d,e,f,h){return function(g){return t(a,b,c,d,e,f,h,g)}},q=function(a,b,c,d,e,f){return function(h){return m(a,b,c,
d,e,f,h)}},r=function(a,b,c,d,e){return function(f){return q(a,b,c,d,e,f)}},p=function(a,b,c,d){return function(e){return r(a,b,c,d,e)}},u=function(a,b,c){return function(d){return p(a,b,c,d)}};return F.ap(l,F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return u(a,b,c)}})),n),n),n),n),n),n),n),n)},val10:function(a,b,c,d,e,f,h,g,k,l,n,m){var t=function(b,c,d,e,f,h,g,k,t){return function(l){return a(b,c,d,e,f,h,g,k,t,l)}},q=function(a,b,c,d,e,f,h,
g){return function(k){return t(a,b,c,d,e,f,h,g,k)}},r=function(a,b,c,d,e,f,h){return function(g){return q(a,b,c,d,e,f,h,g)}},p=function(a,b,c,d,e,f){return function(h){return r(a,b,c,d,e,f,h)}},u=function(a,b,c,d,e){return function(f){return p(a,b,c,d,e,f)}},v=function(a,b,c,d){return function(e){return u(a,b,c,d,e)}},w=function(a,b,c){return function(d){return v(a,b,c,d)}};return F.ap(n,F.ap(l,F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return w(a,
b,c)}})),m),m),m),m),m),m),m),m),m)},val11:function(a,b,c,d,e,f,h,g,k,l,n,m,q){var t=function(b,c,d,e,f,h,g,k,t,l){return function(n){return a(b,c,d,e,f,h,g,k,t,l,n)}},r=function(a,b,c,d,e,f,h,g,k){return function(l){return t(a,b,c,d,e,f,h,g,k,l)}},p=function(a,b,c,d,e,f,h,g){return function(k){return r(a,b,c,d,e,f,h,g,k)}},u=function(a,b,c,d,e,f,h){return function(g){return p(a,b,c,d,e,f,h,g)}},v=function(a,b,c,d,e,f){return function(h){return u(a,b,c,d,e,f,h)}},w=function(a,b,c,d,e){return function(f){return v(a,
b,c,d,e,f)}},x=function(a,b,c,d){return function(e){return w(a,b,c,d,e)}},y=function(a,b,c){return function(d){return x(a,b,c,d)}};return F.ap(m,F.ap(n,F.ap(l,F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return y(a,b,c)}})),q),q),q),q),q),q),q),q),q),q)},val12:function(a,b,c,d,e,f,h,g,k,l,n,m,q,r){var t=function(b,c,d,e,f,h,g,k,t,l,n){return function(m){return a(b,c,d,e,f,h,g,k,t,l,n,m)}},p=function(a,b,c,d,e,f,h,g,k,l){return function(n){return t(a,
b,c,d,e,f,h,g,k,l,n)}},u=function(a,b,c,d,e,f,h,g,k){return function(t){return p(a,b,c,d,e,f,h,g,k,t)}},v=function(a,b,c,d,e,f,h,g){return function(k){return u(a,b,c,d,e,f,h,g,k)}},w=function(a,b,c,d,e,f,h){return function(g){return v(a,b,c,d,e,f,h,g)}},x=function(a,b,c,d,e,f){return function(h){return w(a,b,c,d,e,f,h)}},y=function(a,b,c,d,e){return function(f){return x(a,b,c,d,e,f)}},z=function(a,b,c,d){return function(e){return y(a,b,c,d,e)}},A=function(a,b,c){return function(d){return z(a,b,c,
d)}};return F.ap(q,F.ap(m,F.ap(n,F.ap(l,F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return A(a,b,c)}})),r),r),r),r),r),r),r),r),r),r),r)},val13:function(a,b,c,d,e,f,h,g,k,l,n,m,q,r,p){var t=function(b,c,d,e,f,h,g,k,t,l,n,m){return function(q){return a(b,c,d,e,f,h,g,k,t,l,n,m,q)}},u=function(a,b,c,d,e,f,h,g,k,l,n){return function(m){return t(a,b,c,d,e,f,h,g,k,l,n,m)}},v=function(a,b,c,d,e,f,h,g,k,t){return function(l){return u(a,b,c,d,e,f,h,g,
k,t,l)}},w=function(a,b,c,d,e,f,h,g,k){return function(t){return v(a,b,c,d,e,f,h,g,k,t)}},x=function(a,b,c,d,e,f,h,g){return function(k){return w(a,b,c,d,e,f,h,g,k)}},y=function(a,b,c,d,e,f,h){return function(g){return x(a,b,c,d,e,f,h,g)}},z=function(a,b,c,d,e,f){return function(h){return y(a,b,c,d,e,f,h)}},A=function(a,b,c,d,e){return function(f){return z(a,b,c,d,e,f)}},B=function(a,b,c,d){return function(e){return A(a,b,c,d,e)}},C=function(a,b,c){return function(d){return B(a,b,c,d)}};return F.ap(r,
F.ap(q,F.ap(m,F.ap(n,F.ap(l,F.ap(k,F.ap(g,F.ap(h,F.ap(f,F.ap(e,F.ap(d,F.ap(c,F.map(b,la.curry(function(a,b){return function(c){return C(a,b,c)}})),p),p),p),p),p),p),p),p),p),p),p),p)}},qb=function(a,b,c,d,e,f,h,g,k,l,n,m,q,r,p,u,v,w,x,y,z,A,B,C,D,E,F){this.calendarWeekRuleIndex=a;this.calendarWeekRuleName=b;this.designatorAm=c;this.designatorPm=d;this.firstDayOfWeekIndex=e;this.firstDayOfWeekName=f;this.nameCalendar=h;this.nameCalendarNative=g;this.nameDays=k;this.nameDaysAbbreviated=l;this.nameDaysShortest=
n;this.nameMonths=m;this.nameMonthsAbbreviated=q;this.nameMonthGenitives=r;this.nameMonthGenitivesAbbreviated=p;this.patternDateLong=u;this.patternDateShort=v;this.patternDateTimeFull=w;this.patternDateTimeSortable=x;this.patternMonthDay=y;this.patternRfc1123=z;this.patternTimeLong=A;this.patternTimeShort=B;this.patternUniversalSortable=C;this.patternYearMonth=D;this.separatorDate=E;this.separatorTime=F};qb.__name__=["thx","culture","DateFormatInfo"];qb.fromObject=function(a){return new qb(a.calendarWeekRuleIndex,
a.calendarWeekRuleName,a.designatorAm,a.designatorPm,a.firstDayOfWeekIndex,a.firstDayOfWeekName,a.nameCalendar,a.nameCalendarNative,a.nameDays,a.nameDaysAbbreviated,a.nameDaysShortest,a.nameMonths,a.nameMonthsAbbreviated,a.nameMonthGenitives,a.nameMonthGenitivesAbbreviated,a.patternDateLong,a.patternDateShort,a.patternDateTimeFull,a.patternDateTimeSortable,a.patternMonthDay,a.patternRfc1123,a.patternTimeLong,a.patternTimeShort,a.patternUniversalSortable,a.patternYearMonth,a.separatorDate,a.separatorTime)};
qb.prototype={calendarWeekRuleIndex:null,calendarWeekRuleName:null,designatorAm:null,designatorPm:null,firstDayOfWeekIndex:null,firstDayOfWeekName:null,nameCalendar:null,nameCalendarNative:null,nameDays:null,nameDaysAbbreviated:null,nameDaysShortest:null,nameMonths:null,nameMonthsAbbreviated:null,nameMonthGenitives:null,nameMonthGenitivesAbbreviated:null,patternDateLong:null,patternDateShort:null,patternDateTimeFull:null,patternDateTimeSortable:null,patternMonthDay:null,patternRfc1123:null,patternTimeLong:null,
patternTimeShort:null,patternUniversalSortable:null,patternYearMonth:null,separatorDate:null,separatorTime:null,toObject:function(){return{calendarWeekRuleIndex:this.calendarWeekRuleIndex,calendarWeekRuleName:this.calendarWeekRuleName,designatorAm:this.designatorAm,designatorPm:this.designatorPm,firstDayOfWeekIndex:this.firstDayOfWeekIndex,firstDayOfWeekName:this.firstDayOfWeekName,nameCalendar:this.nameCalendar,nameCalendarNative:this.nameCalendarNative,nameDays:this.nameDays,nameDaysAbbreviated:this.nameDaysAbbreviated,
nameDaysShortest:this.nameDaysShortest,nameMonths:this.nameMonths,nameMonthsAbbreviated:this.nameMonthsAbbreviated,nameMonthGenitives:this.nameMonthGenitives,nameMonthGenitivesAbbreviated:this.nameMonthGenitivesAbbreviated,patternDateLong:this.patternDateLong,patternDateShort:this.patternDateShort,patternDateTimeFull:this.patternDateTimeFull,patternDateTimeSortable:this.patternDateTimeSortable,patternMonthDay:this.patternMonthDay,patternRfc1123:this.patternRfc1123,patternTimeLong:this.patternTimeLong,
patternTimeShort:this.patternTimeShort,patternUniversalSortable:this.patternUniversalSortable,patternYearMonth:this.patternYearMonth,separatorDate:this.separatorDate,separatorTime:this.separatorTime}},__class__:qb};var rb=function(a,b,c,d,e,f,h,g,k,l,n,m,q,r,p,u,v,w,x,y,z,A,B,C,D){this.decimalDigitsCurrency=a;this.decimalDigitsNumber=b;this.decimalDigitsPercent=c;this.groupSizesCurrency=d;this.groupSizesNumber=e;this.groupSizesPercent=f;this.patternNegativeCurrency=h;this.patternNegativeNumber=g;
this.patternNegativePercent=k;this.patternPositiveCurrency=l;this.patternPositivePercent=n;this.separatorDecimalCurrency=m;this.separatorDecimalNumber=q;this.separatorDecimalPercent=r;this.separatorGroupCurrency=p;this.separatorGroupNumber=u;this.separatorGroupPercent=v;this.signNegative=w;this.signPositive=x;this.symbolCurrency=y;this.symbolNaN=z;this.symbolNegativeInfinity=A;this.symbolPercent=B;this.symbolPermille=C;this.symbolPositiveInfinity=D};rb.__name__=["thx","culture","NumberFormatInfo"];
rb.fromObject=function(a){return new rb(a.decimalDigitsCurrency,a.decimalDigitsNumber,a.decimalDigitsPercent,a.groupSizesCurrency,a.groupSizesNumber,a.groupSizesPercent,a.patternNegativeCurrency,a.patternNegativeNumber,a.patternNegativePercent,a.patternPositiveCurrency,a.patternPositivePercent,a.separatorDecimalCurrency,a.separatorDecimalNumber,a.separatorDecimalPercent,a.separatorGroupCurrency,a.separatorGroupNumber,a.separatorGroupPercent,a.signNegative,a.signPositive,a.symbolCurrency,a.symbolNaN,
a.symbolNegativeInfinity,a.symbolPercent,a.symbolPermille,a.symbolPositiveInfinity)};rb.prototype={decimalDigitsCurrency:null,decimalDigitsNumber:null,decimalDigitsPercent:null,groupSizesCurrency:null,groupSizesNumber:null,groupSizesPercent:null,patternNegativeCurrency:null,patternNegativeNumber:null,patternNegativePercent:null,patternPositiveCurrency:null,patternPositivePercent:null,separatorDecimalCurrency:null,separatorDecimalNumber:null,separatorDecimalPercent:null,separatorGroupCurrency:null,
separatorGroupNumber:null,separatorGroupPercent:null,signNegative:null,signPositive:null,symbolCurrency:null,symbolNaN:null,symbolNegativeInfinity:null,symbolPercent:null,symbolPermille:null,symbolPositiveInfinity:null,toObject:function(){return{decimalDigitsCurrency:this.decimalDigitsCurrency,decimalDigitsNumber:this.decimalDigitsNumber,decimalDigitsPercent:this.decimalDigitsPercent,groupSizesCurrency:this.groupSizesCurrency,groupSizesNumber:this.groupSizesNumber,groupSizesPercent:this.groupSizesPercent,
patternNegativeCurrency:this.patternNegativeCurrency,patternNegativeNumber:this.patternNegativeNumber,patternNegativePercent:this.patternNegativePercent,patternPositiveCurrency:this.patternPositiveCurrency,patternPositivePercent:this.patternPositivePercent,separatorDecimalCurrency:this.separatorDecimalCurrency,separatorDecimalNumber:this.separatorDecimalNumber,separatorDecimalPercent:this.separatorDecimalPercent,separatorGroupCurrency:this.separatorGroupCurrency,separatorGroupNumber:this.separatorGroupNumber,
separatorGroupPercent:this.separatorGroupPercent,signNegative:this.signNegative,signPositive:this.signPositive,symbolCurrency:this.symbolCurrency,symbolNaN:this.symbolNaN,symbolNegativeInfinity:this.symbolNegativeInfinity,symbolPercent:this.symbolPercent,symbolPermille:this.symbolPermille,symbolPositiveInfinity:this.symbolPositiveInfinity}},__class__:rb};var ta=function(a,b,c,d,e,f,h,g,k,l,n,m,q,r,p,u){this.code=a;this.dateTime=b;this.ietf=c;this.isNeutral=d;this.iso2=e;this.iso3=f;this.isRightToLeft=
h;this.lcid=g;this.nameCalendar=k;this.nameEnglish=l;this.nameNative=n;this.nameRegionEnglish=m;this.nameRegionNative=q;this.number=r;this.separatorList=p;this.win3=u};ta.__name__=["thx","culture","Culture"];ta.fromObject=function(a){var b=a.code,c;null==a.dateTime?c=null:(c=a.dateTime,c=new qb(c.calendarWeekRuleIndex,c.calendarWeekRuleName,c.designatorAm,c.designatorPm,c.firstDayOfWeekIndex,c.firstDayOfWeekName,c.nameCalendar,c.nameCalendarNative,c.nameDays,c.nameDaysAbbreviated,c.nameDaysShortest,
c.nameMonths,c.nameMonthsAbbreviated,c.nameMonthGenitives,c.nameMonthGenitivesAbbreviated,c.patternDateLong,c.patternDateShort,c.patternDateTimeFull,c.patternDateTimeSortable,c.patternMonthDay,c.patternRfc1123,c.patternTimeLong,c.patternTimeShort,c.patternUniversalSortable,c.patternYearMonth,c.separatorDate,c.separatorTime));var d=a.ietf,e=a.isNeutral,f=a.iso2,h=a.iso3,g=a.isRightToLeft,k=a.lcid,l=a.nameCalendar,n=a.nameEnglish,m=a.nameNative,q=a.nameRegionEnglish,r=a.nameRegionNative,p;null==a.number?
p=null:(p=a.number,p=new rb(p.decimalDigitsCurrency,p.decimalDigitsNumber,p.decimalDigitsPercent,p.groupSizesCurrency,p.groupSizesNumber,p.groupSizesPercent,p.patternNegativeCurrency,p.patternNegativeNumber,p.patternNegativePercent,p.patternPositiveCurrency,p.patternPositivePercent,p.separatorDecimalCurrency,p.separatorDecimalNumber,p.separatorDecimalPercent,p.separatorGroupCurrency,p.separatorGroupNumber,p.separatorGroupPercent,p.signNegative,p.signPositive,p.symbolCurrency,p.symbolNaN,p.symbolNegativeInfinity,
p.symbolPercent,p.symbolPermille,p.symbolPositiveInfinity));return new ta(b,c,d,e,f,h,g,k,l,n,m,q,r,p,a.separatorList,a.win3)};ta.register=function(a){var b="C:"+a.code.toLowerCase(),c=ta.cultures;if(null!=k[b]?c.existsReserved(b):c.h.hasOwnProperty(b))return a=ta.cultures,null!=k[b]?a.getReserved(b):a.h[b];ta.list.push(a);c=ta.cultures;null!=k[b]?c.setReserved(b,a):c.h[b]=a;b=ta.cultures;c="I2:"+a.iso2.toLowerCase();null!=k[c]?b.setReserved(c,a):b.h[c]=a;b=ta.cultures;c="I3:"+a.iso3.toLowerCase();
null!=k[c]?b.setReserved(c,a):b.h[c]=a;return a};ta.getByCode=function(a){var b=ta.cultures;a="C:"+a.toLowerCase();return null!=k[a]?b.getReserved(a):b.h[a]};ta.getByIso2=function(a){var b=ta.cultures;a="I2:"+a.toLowerCase();return null!=k[a]?b.getReserved(a):b.h[a]};ta.getByIso3=function(a){var b=ta.cultures;a="I3:"+a.toLowerCase();return null!=k[a]?b.getReserved(a):b.h[a]};ta.iterator=function(){return L.iter(ta.list)};ta.getCodeKey=function(a){return"C:"+a.toLowerCase()};ta.getIso2Key=function(a){return"I2:"+
a.toLowerCase()};ta.getIso3Key=function(a){return"I3:"+a.toLowerCase()};ta.prototype={code:null,dateTime:null,ietf:null,isNeutral:null,iso2:null,iso3:null,isRightToLeft:null,lcid:null,nameCalendar:null,nameDisplayEnglish:null,nameDisplayNative:null,nameEnglish:null,nameNative:null,nameRegionEnglish:null,nameRegionNative:null,number:null,separatorList:null,win3:null,toObject:function(){return{code:this.code,dateTime:null==this.dateTime?null:this.dateTime.toObject(),ietf:this.ietf,isNeutral:this.isNeutral,
iso2:this.iso2,iso3:this.iso3,isRightToLeft:this.isRightToLeft,lcid:this.lcid,nameCalendar:this.nameCalendar,nameEnglish:this.nameEnglish,nameNative:this.nameNative,nameRegionEnglish:this.nameRegionEnglish,nameRegionNative:this.nameRegionNative,number:null==this.number?null:this.number.toObject(),separatorList:this.separatorList,win3:this.win3}},get_nameDisplayEnglish:function(){return this.nameEnglish+(null==this.nameRegionEnglish?"":" ("+this.nameRegionEnglish+")")},get_nameDisplayNative:function(){return this.nameNative+
(null==this.nameRegionNative?"":" ("+this.nameRegionNative+")")},toString:function(){return this.nameEnglish+(null==this.nameRegionEnglish?"":" ("+this.nameRegionEnglish+")")},__class__:ta};var $a=function(){};$a.__name__=["thx","culture","Pattern"];var Zb=function(a){ba.call(this,"method "+a.className+"."+a.methodName+"() is abstract",null,a)};Zb.__name__=["thx","error","AbstractMethod"];Zb.__super__=ba;Zb.prototype=D(ba.prototype,{__class__:Zb});var uc=function(a,b,c,d){ba.call(this,a,c,d);this.innerError=
b};uc.__name__=["thx","error","ErrorWrapper"];uc.__super__=ba;uc.prototype=D(ba.prototype,{innerError:null,__class__:uc});var Eb=function(){};Eb.__name__=["thx","format","Format"];Eb.get_defaultCulture=function(){return null!=Eb.defaultCulture?Eb.defaultCulture:ta.invariant};Eb.set_defaultCulture=function(a){Eb.defaultCulture=a;return Eb.get_defaultCulture()};var w=function(){};w.__name__=["thx","format","NumberFormat"];w.binary=function(a,b,c){null==b&&(b=1);var d=w.numberFormat(c);return isNaN(a)?
d.symbolNaN:isFinite(a)?0==b&&0==a?"":E.lpad(w.toBase(a|0,2,c),"0",b):0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity};w.currency=function(a,b,c,d){d=w.numberFormat(d);if(isNaN(a))return d.symbolNaN;if(!isFinite(a))return 0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity;var e=0>a?$a.currencyNegatives[d.patternNegativeCurrency]:$a.currencyPositives[d.patternPositiveCurrency];b=null==b?null:b;a=w.value(a,null!=b?b:d.decimalDigitsCurrency,d.groupSizesCurrency,d.separatorGroupCurrency,d.separatorDecimalCurrency);
a=E.replace(e,"n",a);c=null==c?null:c;return E.replace(a,"$",null!=c?c:d.symbolCurrency)};w.customFormat=function(a,b,c){c=w.numberFormat(c);if(isNaN(a))return c.symbolNaN;if(!isFinite(a))return 0>a?c.symbolNegativeInfinity:c.symbolPositiveInfinity;var d=w.hasSymbols(b,"$"),e=!d&&w.hasSymbols(b,"%\u2030"),f=w.splitPattern(b,";");if(3<f.length)throw new ca('invalid number of sections in "'+b+'"');if(0>a)return null!=f[1]?w.customFormatF(-a,f[1],c,d,e):w.customFormatF(-a,"-"+f[0],c,d,e);if(0<a)return w.customFormatF(a,
f[0],c,d,e);null==f?a=null:(a=f[2],a=null==a?null:a);return w.customFormatF(0,null!=a?a:f[0],c,d,e)};w.decimal=function(a,b,c){null==b&&(b=1);c=w.numberFormat(c);if(isNaN(a))return c.symbolNaN;if(!isFinite(a))return 0>a?c.symbolNegativeInfinity:c.symbolPositiveInfinity;var d=w.value(a,0,[0],"","");return(0>a?c.signNegative:"")+E.lpad(d,"0",b)};w.exponential=function(a,b,c,d,e){null==d&&(d="e");null==c&&(c=3);null==b&&(b=6);var f=w.numberFormat(e);if(isNaN(a))return f.symbolNaN;if(!isFinite(a))return 0>
a?f.symbolNegativeInfinity:f.symbolPositiveInfinity;a=w.exponentialInfo(a);b=w.number(a.f,b,e)+d;d=a.e;return b+(0>a.e?f.signNegative:f.signPositive)+E.lpad(""+(0>d?-d:d),"0",c)};w.fixed=function(a,b,c){var d=w.numberFormat(c);if(isNaN(a))return d.symbolNaN;if(!isFinite(a))return 0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity;c=0>a?$a.numberNegatives[d.patternNegativeNumber]:"n";b=null==b?null:b;a=w.value(a,null!=b?b:d.decimalDigitsNumber,[0],"",d.separatorDecimalNumber);return E.replace(c,
"n",a)};w.format=function(a,b,c){var d=b.substring(0,1),e=w.paramOrNull(b.substring(1));switch(d){case "%":return w.printf(a,b,c);case "C":case "c":return w.currency(a,e,null,c);case "E":return w.exponential(a,e,null,null,c);case "G":return w.general(a,e,c);case "P":case "p":return w.percent(a,e,c);case "X":return w.hex(a,e,c).toUpperCase();case "D":case "d":return w.decimal(a,e,c);case "e":return w.exponential(a,e,null,null,c).toLowerCase();case "F":case "f":return w.fixed(a,e,c);case "g":return w.general(a,
e,c).toLowerCase();case "N":case "n":return w.number(a,e,c);case "R":case "r":return""+a;case "x":return w.hex(a,e,c);default:return w.customFormat(a,b,c)}};w.general=function(a,b,c){var d=w.exponential(a,b,null,null,c);a=w.fixed(a,b,c);return d.length<a.length?d:a};w.hex=function(a,b,c){null==b&&(b=1);var d=w.numberFormat(c);return isNaN(a)?d.symbolNaN:isFinite(a)?0==b&&0==a?"":E.lpad(w.toBase(a|0,16,c),"0",b):0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity};w.integer=function(a,b){var c=w.numberFormat(b);
return isNaN(a)?c.symbolNaN:isFinite(a)?w.number(a,0,b):0>a?c.symbolNegativeInfinity:c.symbolPositiveInfinity};w.number=function(a,b,c){var d=w.numberFormat(c);if(isNaN(a))return d.symbolNaN;if(!isFinite(a))return 0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity;c=0>a?$a.numberNegatives[d.patternNegativeNumber]:"n";b=null==b?null:b;a=w.value(a,null!=b?b:d.decimalDigitsNumber,d.groupSizesNumber,d.separatorGroupNumber,d.separatorDecimalNumber);return E.replace(c,"n",a)};w.octal=function(a,b,c){null==
b&&(b=1);var d=w.numberFormat(c);return isNaN(a)?d.symbolNaN:isFinite(a)?0==b&&0==a?"":E.lpad(w.toBase(a|0,8,c),"0",b):0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity};w.percent=function(a,b,c){var d=w.numberFormat(c);if(isNaN(a))return d.symbolNaN;if(!isFinite(a))return 0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity;b=null==b?null:b;return w.unit(100*a,null!=b?b:d.decimalDigitsPercent,d.symbolPercent,c)};w.permille=function(a,b,c){var d=w.numberFormat(c);if(isNaN(a))return d.symbolNaN;
if(!isFinite(a))return 0>a?d.symbolNegativeInfinity:d.symbolPositiveInfinity;b=null==b?null:b;return w.unit(1E3*a,null!=b?b:d.decimalDigitsPercent,d.symbolPermille,c)};w.printf=function(a,b,c){if(!E.startsWith(b,"%"))throw new ca('invalid printf term "'+b+'"');for(var d=b.substring(b.length-1),e=b.substring(1,b.length-1).split("."),f=null==e[1]||""==e[1]?null:H.parseInt(e[1]),h=!0,g=!0,k=!1,l=!1,n=" ",m=0,e=e[0];0<e.length;){var p=e.substring(0,1);switch(p){case " ":k=!0;break;case "#":l=!0;break;
case "+":g=!1;break;case "-":h=!1;break;case "0":n="0";break;default:if(P.canParse(p)){m=P.parse(e);e="";continue}else throw new ca("invalid flags "+e);}e=e.substring(1)}e=function(a,b,c,d,e){l&&(a=c+a);0>b?a=d+a:g?k&&(a=" "+a):a=e+a;return h?E.lpad(a,n,m):E.rpad(a,n,m)};p=w.numberFormat(c);switch(d){case "%":return e(w.fixed(Math.abs(a),f,c)+"%",a,"",p.signNegative,p.signPositive);case "B":return a|=0,e((0>a?-a:a).toString(2),1,"B","","");case "E":return e(w.exponential(Math.abs(a),f,0,"E",c),a,
"",p.signNegative,p.signPositive);case "G":return e=w.printf(a,"E",c),a=w.printf(a,"f",c),e.length<a.length?e:a;case "X":return e(w.hex(Math.abs(a),f,c),a,"0X",p.signNegative,p.signPositive);case "b":return a|=0,e((0>a?-a:a).toString(2),1,"b","","");case "c":return a|=0,e(String.fromCharCode(0>a?-a:a),1,"","","");case "d":case "i":return c=null==f?null:f,e(E.lpad(""+Math.round(a),"0",null!=c?c:0),a,"",p.signNegative,p.signPositive);case "e":return e(w.exponential(Math.abs(a),f,0,"e",c),a,"",p.signNegative,
p.signPositive);case "f":return e(w.fixed(Math.abs(a),f,c),a,"",p.signNegative,p.signPositive);case "g":return e=w.printf(a,"e",c),a=w.printf(a,"f",c),e.length<a.length?e:a;case "o":return e(w.octal(Math.abs(a),f,c),a,"0",p.signNegative,p.signPositive);case "u":return w.printf(Math.abs(a),"d",c);case "x":return e(w.hex(Math.abs(a),f,c),a,"0x",p.signNegative,p.signPositive);default:throw new ca('invalid pattern "'+b+'"');}};w.toBase=function(a,b,c){c=w.numberFormat(c);return E.replace(a.toString(b),
"-",c.signNegative)};w.unit=function(a,b,c,d){var e=w.numberFormat(d);if(isNaN(a))return e.symbolNaN;if(!isFinite(a))return 0>a?e.symbolNegativeInfinity:e.symbolPositiveInfinity;d=0>a?$a.percentNegatives[e.patternNegativePercent]:$a.percentPositives[e.patternPositivePercent];a=w.value(a,b,e.groupSizesPercent,e.separatorGroupPercent,e.separatorDecimalPercent);return E.replace(E.replace(d,"n",a),"%",c)};w.countSymbols=function(a,b){for(var c=0,d=0,e=0;c<a.length;){var f=a.substring(c,c+1);switch(f){case '"':switch(d){case 0:d=
2;break;case 2:d=0}break;case "'":switch(d){case 0:d=1;break;case 1:d=0}break;case "\\":++c;break;default:0==d&&0<=b.indexOf(f)&&++e}++c}return e};w.customFormatDecimalFraction=function(a,b,c){var d="",e=0,f=0;for(a=a.split("");e<b.length;){var h=b.substring(e,e+1);switch(h){case '"':switch(f){case 0:f=2;break;case 1:d+=h;break;case 2:f=0;break;default:d+=h}break;case "#":switch(f){case 0:d+=0==a.length?"":a.shift();break;case 1:case 2:d+=h;break;default:d+=h}break;case "$":switch(f){case 0:d+=c.symbolCurrency;
break;case 1:case 2:d+=h;break;default:d+=h}break;case "%":switch(f){case 0:d+=c.symbolPercent;break;case 1:case 2:d+=h;break;default:d+=h}break;case "'":switch(f){case 0:f=1;break;case 1:f=0;break;case 2:d+=h;break;default:d+=h}break;case "0":switch(f){case 0:d+=0==a.length?"0":a.shift();break;case 1:case 2:d+=h;break;default:d+=h}break;case "\\":++e;d+=b.substring(e,e+1);break;case "\u2030":switch(f){case 0:d+=c.symbolPermille;break;case 1:case 2:d+=h;break;default:d+=h}break;default:switch(f){case 1:case 2:d+=
h;break;default:d+=h}}++e}return d};w.customFormatF=function(a,b,c,d,e){e&&(a*=w.hasSymbols(b,"\u2030")?1E3:100);var f=w.splitPattern(b,"eE");if(1<f.length){a=w.exponentialInfo(a);b=b.substring(f[0].length,f[0].length+1);var h=E.startsWith(f[1],"+");if(h||E.startsWith(f[1],"-"))f[1]=f[1].substring(1);return w.customIntegerAndFraction(a.f,f[0],c,d,e)+b+(0>a.e?c.signNegative:h?c.signPositive:"")+w.customFormatInteger(""+Math.abs(a.e),f[1],c,d,e)}return w.customIntegerAndFraction(a,b,c,d,e)};w.customFormatInteger=
function(a,b,c,d,e){var f=[],h=0,g=0,k=a.split(""),l="",n=!0;a=!1;for(var p=0;h<b.length;){var m=b.substring(h,h+1);switch(m){case '"':switch(g){case 0:g=2;break;case 1:l+=m;break;case 2:g=0;f.push(Ca.Literal(l));l="";break;default:f.push(Ca.Literal(m))}break;case "#":switch(g){case 0:f.push(Ca.Hash(n));n=!1;break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;case "$":switch(g){case 0:f.push(Ca.Literal(c.symbolCurrency));break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;
case "%":switch(g){case 0:f.push(Ca.Literal(c.symbolPercent));break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;case "'":switch(g){case 0:g=1;break;case 1:g=0;f.push(Ca.Literal(l));l="";break;case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;case ",":switch(g){case 0:a=!0;break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;case "0":switch(g){case 0:f.push(Ca.Zero(n));n=!1;++p;break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;case "\\":++h;f.push(Ca.Literal(b.substring(h,
h+1)));break;case "\u2030":switch(g){case 0:f.push(Ca.Literal(c.symbolPermille));break;case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}break;default:switch(g){case 1:case 2:l+=m;break;default:f.push(Ca.Literal(m))}}++h}0<l.length&&f.push(Ca.Literal(l));h=k.length;for(b=p;h<b;)h++,k.unshift("0");if(a)for(h=k.length-1,a=d?c.groupSizesCurrency.slice():e?c.groupSizesPercent.slice():c.groupSizesNumber.slice(),b=a.shift(),g=0;0<=h&&0!=b;)g==b?(k[h]+=d?c.separatorGroupCurrency:e?c.separatorGroupPercent:
c.separatorGroupNumber,g=0,0<a.length&&(b=a.shift())):(++g,--h);f.reverse();c=f.map(function(a){switch(a[1]){case 0:return a[2];case 1:return a=a[2],0==k.length?"":a?k.join(""):k.pop();case 2:return a[2]?k.join(""):k.pop()}});c.reverse();return c.join("")};w.customIntegerAndFraction=function(a,b,c,d,e){b=w.splitPattern(b,".");var f=b[0].length-(b[0]=r.trimCharsRight(b[0],",")).length;a/=Math.pow(1E3,f);if(1==b.length)return w.customFormatInteger(""+Math.round(a),b[0],c,d,e);a=X.roundTo(a,w.countSymbols(b[1],
"#0"));f=w.splitOnDecimalSeparator(a);a=w.customFormatInteger(f[0],b[0],c,d,e);null==f?f=null:(f=f[1],f=null==f?null:f);return a+(d?c.separatorDecimalCurrency:e?c.separatorDecimalPercent:c.separatorDecimalNumber)+w.customFormatDecimalFraction(null!=f?f:"0",b[1],c)};w.exponentialInfo=function(a){var b=(""+Math.abs(a)).toLowerCase(),c=b.indexOf("e"),d;0<c?(d=b.substring(0,c).split("."),b=P.parse(b.substring(c+1))):(d=b.split(".").concat([""]),b=0,1<d[0].length?(b=d[0].length-1,d[1]=d[0].substring(1)+
d[1],d[0]=d[0].substring(0,1)):"0"==d[0]&&(b=-(1+d[1].length-r.trimCharsLeft(d[1],"0").length),d[1]=d[1].substring(-b-1),d[0]=d[1].substring(0,1),d[1]=d[1].substring(1)));return{e:b,f:(0>a?-1:1)*parseFloat(d.slice(0,2).join("."))}};w.hasSymbols=function(a,b){for(var c=0,d=0;c<a.length;){var e=a.substring(c,c+1);switch(e){case '"':switch(d){case 0:d=2;break;case 2:d=0}break;case "'":switch(d){case 0:d=1;break;case 1:d=0}break;case "\\":++c;break;default:if(0==d&&0<=b.indexOf(e))return!0}++c}return!1};
w.intPart=function(a,b,c){var d=[];b=b.slice();for(var e=b.shift();0<a.length;)0==e?(d.unshift(a),a=""):a.length>e?(d.unshift(a.substring(a.length-e)),a=a.substring(0,a.length-e),0<b.length&&(e=b.shift())):(d.unshift(a),a="");return d.join(c)};w.numberFormat=function(a){return null!=a&&null!=a.number?a.number:Eb.get_defaultCulture().number};w.pad=function(a,b,c){a=null==a?null:a;a=null!=a?a:"";return 0<b&&a.length>b?c?a.substring(0,b-1)+(H.parseInt(a.substring(b-1,b))+(5<=H.parseInt(a.substring(b,
b+1))?1:0)):a.substring(0,b):E.rpad(a,"0",b)};w.paramOrNull=function(a){return 0==a.length?null:H.parseInt(a)};w.splitOnDecimalSeparator=function(a){var b=(""+a).split(".");a=b[0];var c=b;null==c?c=null:(c=c[1],c=null==c?null:c);c=(null!=c?c:"").toLowerCase();0<=c.indexOf("e")&&(b=c.split("e"),c=b[0],b=P.parse(b[1]),0>b?(c=E.rpad("","0",-b-1)+a+c,a="0"):(a+=c,c=a.substring(b+1),a=w.pad(a,b+1,!1)));return 0<c.length?[a,c]:[a]};w.splitPattern=function(a,b){for(var c=[],d=0,e=0;d<a.length;){var f=a.substring(d,
d+1);switch(f){case '"':switch(e){case 0:e=2;break;case 2:e=0}break;case "'":switch(e){case 0:e=1;break;case 1:e=0}break;case "\\":++d;break;default:0==e&&0<=b.indexOf(f)&&c.push(d)}++d}d=[];for(f=e=0;f<c.length;){var h=c[f];++f;d.push(a.substring(e,h));e=h+1}d.push(a.substring(e));return d};w.value=function(a,b,c,d,e){a=Math.abs(X.roundTo(a,b));a=w.splitOnDecimalSeparator(a);var f=[];f.push(w.intPart(a[0],c,d));0<b&&f.push(w.pad(a[1],b,!0));return f.join(e)};var Ca={__ename__:["thx","format","_NumberFormat",
"CustomFormat"],__constructs__:["Literal","Hash","Zero"],Literal:function(a){a=["Literal",0,a];a.__enum__=Ca;return a},Hash:function(a){a=["Hash",1,a];a.__enum__=Ca;return a},Zero:function(a){a=["Zero",2,a];a.__enum__=Ca;return a}},I={__name__:["thx","fp","_Map","Map_Impl_"],empty:function(){return na.Tip},singleton:function(a,b){return na.Bin(1,a,b,na.Tip,na.Tip)},bin:function(a,b,c,d){return na.Bin(I.size(c)+I.size(d)+1,a,b,c,d)},fromNative:function(a,b){for(var c=na.Tip,d=a.keys();d.hasNext();)var e=
d.next(),c=I.insert(c,e,a.get(e),b);return c},lookup:function(a,b,c){switch(a[1]){case 0:return B.None;case 1:var d=a[6],e=a[5],f=a[4];switch(c(b,a[3])[1]){case 0:return I.lookup(e,b,c);case 1:return I.lookup(d,b,c);case 2:return B.Some(f)}}},lookupTuple:function(a,b,c){switch(a[1]){case 0:return B.None;case 1:var d=a[6],e=a[5],f=a[4];a=a[3];switch(c(b,a)[1]){case 0:return I.lookupTuple(e,b,c);case 1:return I.lookupTuple(d,b,c);case 2:return B.Some({_0:a,_1:f})}}},"delete":function(a,b,c){switch(a[1]){case 0:return na.Tip;
case 1:var d=a[6],e=a[5],f=a[4];a=a[3];switch(c(b,a)[1]){case 0:return I.balance(a,f,I["delete"](e,b,c),d);case 1:return I.balance(a,f,e,I["delete"](d,b,c));case 2:return I.glue(e,d)}}},insert:function(a,b,c,d){switch(a[1]){case 0:return na.Bin(1,b,c,na.Tip,na.Tip);case 1:var e=a[6],f=a[5],h=a[4],g=a[3];a=a[2];switch(d(b,g)[1]){case 0:return I.balance(g,h,I.insert(f,b,c,d),e);case 1:return I.balance(g,h,f,I.insert(e,b,c,d));case 2:return na.Bin(a,b,c,f,e)}}},foldLeft:function(a,b,c){switch(a[1]){case 0:return b;
case 1:return I.foldLeft(a[6],I.foldLeft(a[5],c(b,a[4]),c),c)}},map:function(a,b){switch(a[1]){case 0:return na.Tip;case 1:var c=a[6],d=a[5];return na.Bin(a[2],a[3],b(a[4]),I.map(d,b),I.map(c,b))}},values:function(a){return I.foldLeft(a,[],function(a,c){a.push(c);return a})},foldLeftKeys:function(a,b,c){switch(a[1]){case 0:return b;case 1:return I.foldLeftKeys(a[6],I.foldLeftKeys(a[5],c(b,a[3]),c),c)}},foldLeftAll:function(a,b,c){switch(a[1]){case 0:return b;case 1:return I.foldLeftAll(a[6],I.foldLeftAll(a[5],
c(b,a[3],a[4]),c),c)}},foldLeftTuples:function(a,b,c){switch(a[1]){case 0:return b;case 1:return I.foldLeftTuples(a[6],I.foldLeftTuples(a[5],c(b,{_0:a[3],_1:a[4]}),c),c)}},size:function(a){switch(a[1]){case 0:return 0;case 1:return a[2]}},balance:function(a,b,c,d){var e=I.size(c),f=I.size(d),h=e+f+1;return 1>=e+f?na.Bin(h,a,b,c,d):f>=5*e?I.rotateLeft(a,b,c,d):e>=5*f?I.rotateRight(a,b,c,d):na.Bin(h,a,b,c,d)},glue:function(a,b){if(0==a[1])return b;if(0==b[1])return a;if(I.size(a)>I.size(b)){var c=I.deleteFindMax(a);
return I.balance(c.k,c.x,c.t,b)}c=I.deleteFindMin(b);return I.balance(c.k,c.x,a,c.t)},deleteFindMin:function(a){switch(a[1]){case 0:throw new ba("can not return the minimal element of an empty map",null,{fileName:"Map.hx",lineNumber:161,className:"thx.fp._Map.Map_Impl_",methodName:"deleteFindMin"});case 1:if(0==a[5][1])return{k:a[3],x:a[4],t:a[6]};var b=a[6],c=a[3],d=a[4];a=I.deleteFindMin(a[5]);return{k:a.k,x:a.x,t:I.balance(c,d,a.t,b)}}},deleteFindMax:function(a){switch(a[1]){case 0:throw new ba("can not return the maximal element of an empty map",
null,{fileName:"Map.hx",lineNumber:171,className:"thx.fp._Map.Map_Impl_",methodName:"deleteFindMax"});case 1:if(0==a[6][1])return{k:a[3],x:a[4],t:a[5]};var b=a[3],c=a[4],d=a[5];a=I.deleteFindMax(a[6]);return{k:a.k,x:a.x,t:I.balance(b,c,d,a.t)}}},rotateLeft:function(a,b,c,d){if(1==d[1]){var e=d[6];return I.size(d[5])<2*I.size(e)?I.singleLeft(a,b,c,d):I.doubleLeft(a,b,c,d)}return I.doubleLeft(a,b,c,d)},rotateRight:function(a,b,c,d){if(1==c[1]){var e=c[5];return I.size(c[6])<2*I.size(e)?I.singleRight(a,
b,c,d):I.doubleRight(a,b,c,d)}return I.doubleRight(a,b,c,d)},singleLeft:function(a,b,c,d){if(1==d[1]){var e=d[6],f=d[5],h=d[4];d=d[3];a=na.Bin(I.size(c)+I.size(f)+1,a,b,c,f);return na.Bin(I.size(a)+I.size(e)+1,d,h,a,e)}throw new ba("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:193,className:"thx.fp._Map.Map_Impl_",methodName:"singleLeft"});},singleRight:function(a,b,c,d){if(1==c[1]){var e=c[6],f=c[5],h=c[4];c=c[3];a=na.Bin(I.size(e)+I.size(d)+1,a,b,e,d);return na.Bin(I.size(f)+
I.size(a)+1,c,h,f,a)}throw new ba("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:199,className:"thx.fp._Map.Map_Impl_",methodName:"singleRight"});},doubleLeft:function(a,b,c,d){if(1==d[1]&&1==d[5][1]){var e=d[6],f=d[3],h=d[4],g=d[5][6],k=d[5][5],l=d[5][4];d=d[5][3];a=na.Bin(I.size(c)+I.size(k)+1,a,b,c,k);e=na.Bin(I.size(g)+I.size(e)+1,f,h,g,e);return na.Bin(I.size(a)+I.size(e)+1,d,l,a,e)}throw new ba("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:206,
className:"thx.fp._Map.Map_Impl_",methodName:"doubleLeft"});},doubleRight:function(a,b,c,d){if(1==c[1]&&1==c[6][1]){var e=c[3],f=c[4],h=c[5],g=c[6][6],k=c[6][5],l=c[6][4];c=c[6][3];e=na.Bin(I.size(h)+I.size(k)+1,e,f,h,k);a=na.Bin(I.size(g)+I.size(d)+1,a,b,g,d);return na.Bin(I.size(e)+I.size(a)+1,c,l,e,a)}throw new ba("damn it, this should never happen",null,{fileName:"Map.hx",lineNumber:213,className:"thx.fp._Map.Map_Impl_",methodName:"doubleRight"});}},na={__ename__:["thx","fp","MapImpl"],__constructs__:["Tip",
"Bin"],Tip:["Tip",0]};na.Tip.__enum__=na;na.Bin=function(a,b,c,d,e){a=["Bin",1,a,b,c,d,e];a.__enum__=na;return a};var Pc=function(){};Pc.__name__=["thx","math","random","Seed"];Pc.prototype={get_int:null,get_normalized:null,"int":null,normalized:null,next:null,__class__:Pc};var gb=function(a,b,c){this.x=a;this.n=b;this.g=c};gb.__name__=["thx","math","random","LehmerSeed"];gb.__interfaces__=[Pc];gb.std=function(a){return gb.create(a,2147483647,48271)};gb.create=function(a,b,c){b=new ma(b>>31,b);c=
new ma(c>>31,c);return new gb(a,b,c)};gb.prototype={x:null,n:null,g:null,"int":null,normalized:null,next:function(){var a=this.x,a=new ma(a>>31,a),b=this.g,c=a.low&65535,d=a.low>>>16,e=b.low&65535,f=b.low>>>16,h=Ra._mul(c,e),e=Ra._mul(d,e),c=Ra._mul(c,f),d=(Ra._mul(d,f)+(c>>>16)|0)+(e>>>16)|0,c=c<<16,h=h+c|0;0>Ra.ucompare(h,c)&&(d++,d|=0);e<<=16;h=h+e|0;0>Ra.ucompare(h,e)&&(d++,d|=0);d=d+(Ra._mul(a.low,b.high)+Ra._mul(a.high,b.low)|0)|0;a=new ma(d,h);a=jd.divMod(a,this.n).modulus;if(a.high!=a.low>>
31)throw new ca("Overflow");return new gb(a.low,this.n,this.g)},get_int:function(){return this.x},get_normalized:function(){var a=this.n;if(a.high!=a.low>>31)throw new ca("Overflow");return this.x/a.low},__class__:gb};var pa=function(){this.handlers=[];this.state=B.None};pa.__name__=["thx","promise","Future"];pa.sequence=function(a){return pa.create(function(b){var c=[],d=null,d=function(e){e==a.length?b(c):a[e].then(function(a){c[e]=a;d(e+1)})};d(0)})};pa.afterAll=function(a){return pa.sequence(a).nil()};
pa.all=function(a){return pa.sequence(a)};pa.create=function(a){var b=new pa;a(M(b,b.setState));return b};pa.flatten=function(a){return pa.create(function(b){a.then(function(a){a.then(b)})})};pa.value=function(a){return pa.create(function(b){b(a)})};pa.prototype={handlers:null,state:null,delay:function(a){return null==a?this.flatMap(function(a){return hb.immediateValue(a)}):this.flatMap(function(b){return hb.delayValue(b,a)})},hasValue:function(){return p.toBool(this.state)},map:function(a){var b=
this;return pa.create(function(c){b.then(function(b){b=a(b);c(b)})})},mapAsync:function(a){var b=this;return pa.create(function(c){b.then(function(b){a(b,c)})})},mapPromise:function(a){var b=this;return N.create(function(c,d){b.then(function(b){N.failure(N.success(a(b),c),d)})})},nil:function(){return this.map(function(a){return Ob.nil})},mapFuture:function(a){return this.flatMap(a)},flatMap:function(a){var b=this;return pa.create(function(c){b.then(function(b){a(b).then(c)})})},then:function(a){this.handlers.push(a);
this.update();return this},toString:function(){return"Future"},setState:function(a){var b=this.state;switch(b[1]){case 0:throw new ba('future was already "'+H.string(b[2])+'", can\'t apply the new state "'+H.string(a)+'"',null,{fileName:"Future.hx",lineNumber:121,className:"thx.promise.Future",methodName:"setState"});case 1:this.state=B.Some(a)}this.update();return this},update:function(){var a=this.state;switch(a[1]){case 0:for(var a=a[2],b=-1;++b<this.handlers.length;)(0,this.handlers[b])(a);this.handlers=
[]}},__class__:pa};var N={__name__:["thx","promise","_Promise","Promise_Impl_"],_new:function(a){return a},fromFuture:function(a){return a.map(function(a){return Q.Right(a)})},get_nil:function(){return N.value(Ob.nil)},all:function(a){return 0==a.length?N.value([]):N.create(function(b,c){for(var d=[],e=0,f=!1,h=0,g=a.length;h<g;){var k=[h++];N.either(a[k[0]],function(c){return function(h){f||(d[c[0]]=h,e+=1,e==a.length&&b(d))}}(k),function(){return function(a){f||(f=!0,c(a))}}())}})},afterAll:function(a){return N.map(N.sequence(a),
function(a){return Ob.nil})},sequence:function(a){return l.reduce(a,function(a,c){return N.flatMapEither(a,function(a){return N.map(c,function(b){return a.concat([b])})},function(a){return N.error(a)})},N.value([]))},allSequence:function(a){return N.sequence(a)},create:function(a){return pa.create(function(b){try{a(function(a){b(Q.Right(a))},function(a){b(Q.Left(a))})}catch(d){fa.lastException=d;d instanceof ca&&(d=d.val);var c=ba.fromDynamic(d,{fileName:"Promise.hx",lineNumber:90,className:"thx.promise._Promise.Promise_Impl_",
methodName:"create"});b(Q.Left(c))}})},createUnsafe:function(a){return pa.create(function(b){a(function(a){b(Q.Right(a))},function(a){b(Q.Left(a))})})},createFulfill:function(a){return pa.create(function(b){try{a(b)}catch(c){fa.lastException=c,c instanceof ca&&(c=c.val),b(Q.Left(ba.fromDynamic(c,{fileName:"Promise.hx",lineNumber:107,className:"thx.promise._Promise.Promise_Impl_",methodName:"createFulfill"})))}})},fail:function(a,b){return N.error(new ba(a,null,b))},error:function(a){return N.create(function(b,
c){c(a)})},value:function(a){return N.create(function(b,c){b(a)})},always:function(a,b){return pa.create(function(c){a.then(function(a){try{b(),c(a)}catch(e){fa.lastException=e,e instanceof ca&&(e=e.val),a=Q.Left(ba.fromDynamic(e,{fileName:"Promise.hx",lineNumber:127,className:"thx.promise._Promise.Promise_Impl_",methodName:"always"})),c(a)}})})},either:function(a,b,c){return N.createUnsafe(function(d,e){a.then(function(a){try{switch(a[1]){case 0:var f=a[2];c(f);e(f);break;case 1:var g=a[2];b(g);
d(g)}}catch(Xb){fa.lastException=Xb,Xb instanceof ca&&(Xb=Xb.val),a=ba.fromDynamic(Xb,{fileName:"Promise.hx",lineNumber:146,className:"thx.promise._Promise.Promise_Impl_",methodName:"either"}),e(a)}})})},delay:function(a,b){return null==b?a.flatMap(function(a){return hb.immediateValue(a)}):a.flatMap(function(a){return hb.delayValue(a,b)})},isFailure:function(a){a=a.state;switch(a[1]){case 0:return 1==a[2][1]?!1:!0;case 1:return!1}},isResolved:function(a){a=a.state;switch(a[1]){case 0:return 0==a[2][1]?
!1:!0;case 1:return!1}},isPending:function(a){switch(a.state[1]){case 0:return!1;case 1:return!0}},failure:function(a,b){return N.either(a,function(a){},b)},mapAlways:function(a,b){return N.map(a,function(a){return b()})},mapAlwaysAsyncFuture:function(a,b){return a.mapAsync(function(a,d){b(d)})},mapAlwaysFuture:function(a,b){return a.flatMap(function(a){return b()})},mapEither:function(a,b,c){return N.flatMapEither(a,function(a){return N.value(b(a))},function(a){return N.value(c(a))})},mapEitherFuture:function(a,
b,c){return N.flatMapEitherFuture(a,function(a){return pa.value(b(a))},function(a){return pa.value(c(a))})},flatMapEitherFuture:function(a,b,c){return a.flatMap(function(a){switch(a[1]){case 0:return c(a[2]);case 1:return b(a[2])}})},flatMapEither:function(a,b,c){return N.createUnsafe(function(d,e){a.then(function(a){switch(a[1]){case 0:a=a[2];try{N.either(c(a),d,e)}catch(h){fa.lastException=h,h instanceof ca&&(h=h.val),a=ba.fromDynamic(h,{fileName:"Promise.hx",lineNumber:210,className:"thx.promise._Promise.Promise_Impl_",
methodName:"flatMapEither"}),e(a)}break;case 1:a=a[2];try{N.either(b(a),d,e)}catch(h){fa.lastException=h,h instanceof ca&&(h=h.val),a=ba.fromDynamic(h,{fileName:"Promise.hx",lineNumber:209,className:"thx.promise._Promise.Promise_Impl_",methodName:"flatMapEither"}),e(a)}}})})},mapFailure:function(a,b){return N.mapEitherFuture(a,function(a){return a},b)},mapFailureFuture:function(a,b){return N.flatMapEitherFuture(a,function(a){return pa.value(a)},b)},mapFailurePromise:function(a,b){return N.recover(a,
b)},recover:function(a,b){return N.flatMapEither(a,function(a){return N.value(a)},b)},recoverAsFuture:function(a,b){return N.mapEitherFuture(a,function(a){return a},b)},map:function(a,b){return N.flatMapEither(a,function(a){return N.value(b(a))},function(a){return N.error(a)})},ap:function(a,b){return N.flatMapEither(a,function(a){return N.map(b,function(b){return b(a)})},function(a){return N.error(a)})},mapSuccess:function(a,b){return N.map(a,b)},flatMap:function(a,b){return N.flatMapEither(a,b,
function(a){return N.error(a)})},append:function(a,b){return N.flatMapEither(a,function(a){return b()},function(a){return N.error(a)})},andThen:function(a,b){return N.flatMapEither(a,function(a){return b()},function(a){return N.error(a)})},foreachM:function(a,b){return N.flatMapEither(a,function(a){return N.map(b(a),function(b){return a})},function(a){return N.error(a)})},mapSuccessPromise:function(a,b){return N.flatMapEither(a,b,function(a){return N.error(a)})},mapNull:function(a,b){return N.recoverNull(a,
b)},recoverNull:function(a,b){return N.flatMapEither(a,function(a){return null==a?b():N.value(a)},function(a){return N.error(a)})},success:function(a,b){return N.either(a,b,function(a){})},throwFailure:function(a){return a.then(function(a){if(0==a[1])throw a[2];})},toString:function(a){return"Promise"},toFuture:function(a){return a}},hb=function(){};hb.__name__=["thx","promise","Timer"];hb.delay=function(a){return hb.delayValue(Ob.nil,a)};hb.delayValue=function(a,b){return pa.create(function(c){sa.delay(function(){c(a)},
b)})};hb.immediate=function(){return hb.immediateValue(Ob.nil)};hb.immediateValue=function(a){return pa.create(function(b){sa.immediate(function(){b(a)})})};var A={__ename__:["thx","stream","Message"],__constructs__:["Next","Error","Done"],Next:function(a){a=["Next",0,a];a.__enum__=A;return a},Error:function(a){a=["Error",1,a];a.__enum__=A;return a},Done:["Done",2]};A.Done.__enum__=A;var va=function(a,b){this.handler=Vb.wrapHandler(a);this.init=b};va.__name__=["thx","stream","Process"];va.nextAsMessageHandler=
function(a){return function(b){0==b[1]&&a(b[2])}};va.failureAsMessageHandler=function(a){return function(b){1==b[1]&&a(b[2])}};va.doneAsMessageHandler=function(a){return function(b){2==b[1]&&a()}};va.alwaysAsMessageHandler=function(a){return function(b){switch(b[1]){case 1:case 2:a()}}};va.prototype={handler:null,init:null,message:function(a){var b=this.handler;return new va(function(c){b(c);a(c)},this.init)},next:function(a){var b=this.handler,c=va.nextAsMessageHandler(a);return new va(function(a){b(a);
c(a)},this.init)},failure:function(a){var b=this.handler,c=va.failureAsMessageHandler(a);return new va(function(a){b(a);c(a)},this.init)},done:function(a){var b=this.handler,c=va.doneAsMessageHandler(a);return new va(function(a){b(a);c(a)},this.init)},always:function(a){var b=this.handler,c=va.alwaysAsMessageHandler(a);return new va(function(a){b(a);c(a)},this.init)},run:function(){this.init(this.handler)},__class__:va};var Pb=function(a,b){this.equals=null==b?Aa.equality:b;this.subjects=[];this.set(a)};
Pb.__name__=["thx","stream","Property"];Pb.prototype={value:null,equals:null,subjects:null,modify:function(a){a=a(this.value);this.equals(this.value,a)||(this.value=a,this.emit(A.Next(a)))},get:function(){return this.value},set:function(a){this.modify(function(b){return a})},error:function(a){this.emit(A.Error(a))},emit:function(a){for(var b=0,c=this.subjects;b<c.length;){var d=c[b];++b;d.message(a)}},stream:function(){var a=this;return T.cancellable(function(b,c){a.subjects.push(b);c(function(){L.remove(a.subjects,
b)});b.message(A.Next(a.value))})},__class__:Pb};var Dc={__name__:["thx","stream","_Reducer","Middleware_Impl_"],compose:function(a,b){return function(c,d,e){a(c,d,e);b(c,d,e)}},onlyAction:function(a){return function(b,c,d){a(c,d)}},onlyState:function(a){return function(b,c,d){a(b,d)}},sideEffect:function(a){return function(b,c,d){a(b,c)}},sideEffectState:function(a){return function(b,c,d){a(b)}},sideEffectAction:function(a){return function(b,c,d){a(c)}},empty:function(){return function(a,b,c){}}},
ub=function(a,b,c){this.property=a;this.reducer=b;this.middleware=c};ub.__name__=["thx","stream","Store"];ub.withReducer=function(a,b,c){b=new Pb(b,c);return new ub(b,a,Dc.empty())};ub.withMiddleware=function(a,b,c,d){c=new Pb(c,d);return new ub(c,a,b)};ub.prototype={property:null,reducer:null,middleware:null,dispatch:function(a,b){var c=this;try{var d=this.reducer(this.get(),a);this.property.set(d);this.middleware(this.property.get(),a,function(a){c.dispatch(a,b)})}catch(e){fa.lastException=e,e instanceof
ca&&(e=e.val),this.property.error(ba.fromDynamic(e,b))}return this},dispatcher:function(a){var b=M(this,this.dispatch);return function(c){return b(c,a)}},stream:function(){return this.property.stream()},get:function(){return this.property.get()},__class__:ub};var T=function(a){this.init=function(b){var c=!1,d=null,d=a(function(a){b(a);switch(a[1]){case 1:case 2:null!=d?d():c=!0}});c&&d();return d}};T.__name__=["thx","stream","Stream"];T.value=function(a){return T.create(function(b){b.message(A.Next(a));
b.message(A.Done)})};T.empty=function(){return T.create(function(a){a.message(A.Done)})};T.error=function(a){return T.create(function(b){b.message(A.Error(a))})};T.fail=function(a,b){return T.error(new ba(a,null,b))};T.values=function(a){return T.create(function(b){l.each(a,function(a){return b.message(A.Next(a))});b.message(A.Done)})};T.iterator=function(a){return T.create(function(b){for(;a.hasNext();){var c=a.next();b.message(A.Next(c))}b.message(A.Done)})};T.create=function(a){return T.cancellable(function(b,
c){a(b);return function(){}})};T.cancellable=function(a){return new T(function(b){b=new vc(b);var c=Aa.noop,d=function(a){var b=c;c=function(){b();a()}};try{a(b,d)}catch(e){fa.lastException=e,e instanceof ca&&(e=e.val),b.message(A.Error(ba.fromDynamic(e,{fileName:"Stream.hx",lineNumber:58,className:"thx.stream.Stream",methodName:"cancellable"})))}return c})};T.repeat=function(a){return T.repeatValue(a,Xc.unit)};T.repeatValue=function(a,b){return T.poll(a,function(){return b})};T.poll=function(a,b){return T.cancellable(function(c,
d){d(sa.repeat(function(){var a=A.Next(b());c.message(a)},a))})};T.delay=function(a){return T.cancellable(function(b,c){c(sa.delay(function(){b.message(A.Done)},a))})};T.delayValue=function(a,b){return T.cancellable(function(c,d){d(sa.delay(function(){c.message(A.Next(b));c.message(A.Done)},a))})};T.frame=function(){return T.cancellable(function(a,b){b(sa.frame(function(b){return a.message(A.Next(b))}))})};T.prototype={init:null,message:function(a){return new va(a,this.init)},next:function(a){return new va(va.nextAsMessageHandler(a),
this.init)},failure:function(a){return new va(va.failureAsMessageHandler(a),this.init)},done:function(a){return new va(va.doneAsMessageHandler(a),this.init)},always:function(a){return new va(va.alwaysAsMessageHandler(a),this.init)},log:function(a,b){a=null==a?"":a+": ";return this.map(function(c){$b.trace(""+a+H.string(c),b);return c})},logMessage:function(a,b){var c=this;return T.create(function(d){a=null==a?"":a+": ";c.message(function(c){$b.trace(""+a+H.string(c),b);d.message(c)}).run()})},filter:function(a){return this.filterFuture(function(b){return pa.value(a(b))})},
filterFuture:function(a){return this.filterPromise(function(b){return N.create(function(c,d){a(b).then(c)})})},filterPromise:function(a){var b=this;return T.create(function(c){b.message(function(b){switch(b[1]){case 0:var d=b[2];b=N.success(a(d),function(a){a&&c.message(A.Next(d))});N.failure(b,function(a){return c.message(A.Error(a))});break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},filterMap:function(a){return this.filterMapFuture(function(b){return pa.value(a(b))})},
filterMapFuture:function(a){return this.filterMapPromise(function(b){return N.create(function(c,d){a(b).then(c)})})},filterMapPromise:function(a){var b=this;return T.create(function(c){b.message(function(b){switch(b[1]){case 0:b=N.success(a(b[2]),function(a){0==a[1]&&c.message(A.Next(a[2]))});N.failure(b,function(a){return c.message(A.Error(a))});break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},first:function(){return this.take(1)},sampledBy:function(a){var b=this;
return T.create(function(c){var d=B.None,e=!1;b.message(function(a){switch(a[1]){case 0:d=B.Some(a[2]);break;case 1:c.message(A.Error(a[2]));break;case 2:e=!0}}).run();a.message(function(a){switch(a[1]){case 0:switch(d[1]){case 0:c.message(A.Next({_0:d[2],_1:a[2]}));d=B.None;break;case 1:e&&c.message(A.Done)}break;case 1:c.message(A.Error(a[2]));break;case 2:c.message(A.Done)}}).run()})},samplerOf:function(a){return a.sampledBy(this)},skip:function(a){var b=this;0>a&&(a=0);return T.create(function(c){var d=
0;b.message(function(b){switch(b[1]){case 0:b=b[2];d+=1;d-1>=a&&c.message(A.Next(b));break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},skipFirst:function(){return this.skip(1)},skipFromEnd:function(a){var b=this;0>a&&(a=0);return T.create(function(c){var d=[];b.message(function(b){switch(b[1]){case 0:d.push(b[2]);d.length==a+1&&(b=A.Next(d.shift()),c.message(b));break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},skipLast:function(){return this.skipFromEnd(1)},
skipUntil:function(a){var b=!1;return this.filter(function(c){return b?!0:a(c)?!1:b=!0})},take:function(a){var b=this;0>a&&(a=0);return T.create(function(c){var d=0;a==d?c.message(A.Done):b.message(function(b){switch(b[1]){case 0:c.message(A.Next(b[2]));(d+=1)==a&&c.message(A.Done);break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},takeAt:function(a){var b=this;0>a&&(a=0);return T.create(function(c){var d=0;b.message(function(b){switch(b[1]){case 0:b=b[2];d+=1;d-1==a&&
(c.message(A.Next(b)),c.message(A.Done));break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},takeUntil:function(a){var b=!0;return this.filter(function(c){return b&&a(c)?!0:b=!1})},comp:function(a){var b=this;return T.create(function(c){var d=B.None;b.message(function(b){switch(b[1]){case 0:switch(d[1]){case 0:b=b[2];a(b,d[2])&&(d=B.Some(b),c.message(A.Next(b)));break;case 1:b=b[2],d=B.Some(b),c.message(A.Next(b))}break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},
distinct:function(a){null==a&&(a=Aa.equality);return this.comp(function(b,c){return!a(b,c)})},unique:function(a){return this.filter(function(b){if(a.exists(b))return!1;ha.add(a,b);return!0})},last:function(){var a=this;return T.create(function(b){var c=B.None;a.message(function(a){switch(a[1]){case 0:c=B.Some(a[2]);break;case 1:b.message(A.Error(a[2]));break;case 2:switch(c[1]){case 0:b.message(A.Next(c[2]));b.message(A.Done);break;case 1:b.message(A.Done)}}}).run()})},slidingWindow:function(a,b){var c=
this;return T.create(function(d){var e=[];c.message(function(c){switch(c[1]){case 0:e.push(c[2]);e.length==b+1&&e.shift();e.length>=a&&(c=A.Next(e.slice()),d.message(c));break;case 1:d.message(A.Error(c[2]));break;case 2:d.message(A.Done)}}).run()})},window:function(a){var b=this;return T.create(function(c){var d=[];b.message(function(b){switch(b[1]){case 0:d.push(b[2]);d.length==a&&(c.message(A.Next(d)),d=[]);break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},flatMap:function(a){var b=
this;return T.create(function(c){b.message(function(b){switch(b[1]){case 0:a(b[2]).next(function(a){return c.message(A.Next(a))}).failure(function(a){return c.message(A.Error(a))}).run();break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},map:function(a){return this.flatMap(function(b){return T.value(a(b))})},effect:function(a){return this.map(function(b){a(b);return b})},reduce:function(a,b){return this.map(function(c){return b=a(b,c)})},scan:function(a,b){return this.reduce(b,
a)},fold:function(a){var b=this;return T.create(function(c){var d=B.None;b.message(function(b){switch(b[1]){case 0:switch(d[1]){case 0:b=a(d[2],b[2]);d=B.Some(b);c.message(A.Next(b));break;case 1:b=b[2],d=B.Some(b),c.message(A.Next(b))}break;case 1:c.message(A.Error(b[2]));break;case 2:c.message(A.Done)}}).run()})},collect:function(){return this.reduce(function(a,b){return a.concat([b])},[])},collectAll:function(){return this.collect().last()},concat:function(a){var b=this;return T.create(function(c){b.message(function(b){switch(b[1]){case 0:c.message(A.Next(b[2]));
break;case 1:c.message(A.Error(b[2]));break;case 2:a.message(M(c,c.message)).run()}}).run()})},merge:function(a){var b=this;return T.create(function(c){b.message(M(c,c.message)).run();a.message(M(c,c.message)).run()})},appendTo:function(a){return a.concat(this)},pair:function(a){var b=this;return T.create(function(c){var d=B.None,e=B.None;b.message(function(a){switch(a[1]){case 0:if(0==e[1]){a=a[2];var b=e[2];d=B.Some(a);c.message(A.Next({_0:a,_1:b}))}else d=B.Some(a[2]);break;case 1:c.message(A.Error(a[2]));
break;case 2:c.message(A.Done)}}).run();a.message(function(a){switch(a[1]){case 0:if(0==d[1]){a=a[2];var b=d[2];e=B.Some(a);c.message(A.Next({_0:b,_1:a}))}else e=B.Some(a[2]);break;case 1:c.message(A.Error(a[2]));break;case 2:c.message(A.Done)}}).run()})},alternate:function(a){var b=this;return T.create(function(c){var d=[],e=!1,f=[],h=!1,g=!0,k=function(){for(var a;;){a=!1;if(g&&0<d.length){g=!1;a=!0;var b=A.Next(d.shift());c.message(b)}!g&&0<f.length&&!g&&(a=g=!0,b=A.Next(f.shift()),c.message(b));
if(!a)break}};b.message(function(a){switch(a[1]){case 0:d.push(a[2]);k();h&&0==f.length&&c.message(A.Done);break;case 1:c.message(A.Error(a[2]));break;case 2:h?c.message(A.Done):e=!0}}).run();a.message(function(a){switch(a[1]){case 0:f.push(a[2]);k();e&&0==d.length&&g&&c.message(A.Done);break;case 1:c.message(A.Error(a[2]));break;case 2:e?c.message(A.Done):h=!0}}).run()})},zip:function(a){var b=this;return T.create(function(c){var d=[],e=!1,f=[],h=!1,g=function(){for(;0<d.length&&0<f.length;){var a=
{_0:d.shift(),_1:f.shift()};c.message(A.Next(a))}};b.message(function(a){switch(a[1]){case 0:d.push(a[2]);g();h&&0==f.length&&c.message(A.Done);break;case 1:c.message(A.Error(a[2]));break;case 2:h?c.message(A.Done):e=!0}}).run();a.message(function(a){switch(a[1]){case 0:f.push(a[2]);g();e&&0==d.length&&c.message(A.Done);break;case 1:c.message(A.Error(a[2]));break;case 2:e?c.message(A.Done):h=!0}}).run()})},delayed:function(a){return T.delay(a).concat(this)},spaced:function(a){var b=this;return T.create(function(c){var d=
performance.now(),e=[],f=!1,h=!1,g=null,k=g=function(){var b=performance.now(),k=b-d;d=b;f=!1;k>=a&&(b=A.Next(e.shift()),c.message(b),h&&0==e.length&&c.message(A.Done));0<e.length&&(f=!0,sa.delay(g,a))};b.message(function(a){switch(a[1]){case 0:e.push(a[2]);f||k();break;case 1:c.message(A.Error(a[2]));break;case 2:0==e.length?c.message(A.Done):h=!0}}).run()})},debounce:function(a){return Qc.left(this.sampledBy(T.repeat(a)))},__class__:T};var Qc=function(){};Qc.__name__=["thx","stream","TupleStreamExtensions"];
Qc.left=function(a){return a.map(function(a){return a._0})};Qc.right=function(a){return a.map(function(a){return a._1})};var Rc=function(){};Rc.__name__=["thx","stream","Subject"];Rc.prototype={message:null,__class__:Rc};var vc=function(a){this.handler=a};vc.__name__=["thx","stream","SubjectF"];vc.__interfaces__=[Rc];vc.prototype={handler:null,message:function(a){this.handler(a);return this},__class__:vc};var Vb=function(){};Vb.__name__=["thx","stream","Subjects"];Vb.next=function(a,b){return a.message(A.Next(b))};
Vb.error=function(a,b){return a.message(A.Error(b))};Vb.done=function(a){return a.message(A.Done)};Vb.wrapHandler=function(a){var b=!1;return function(c){if(!b)switch(a(c),c[1]){case 1:case 2:b=!0}}};var ua=function(){};ua.__name__=["view","DiceWorker"];ua.cancel=function(){};ua.onMessage=q.onmessage=function(a){null!=a.data.expression?ua.evaluate(a.data.expression):null!=a.data.init&&ua.init(a.data.init)};ua.init=function(a){for(var b=new x,c=0,d=G.fields(a);c<d.length;){var e=d[c];++c;try{var f=
vb.create(e),h=G.field(a,e);f.results=wb.fromObject(h);null!=k[e]?b.setReserved(e,f):b.h[e]=f}catch(t){fa.lastException=t}}ua.cache=b};ua.evaluate=function(a){ua.cancel();var b=ua.cache,b=null!=k[a]?b.getReserved(a):b.h[a];if(null==b){b=vb.create(a);a=b.exprString;var c=ua.cache;null!=k[a]?c.setReserved(a,b):c.h[a]=b}b.results.count>=ua.MAXRUNS?ua.send(b):ua.run(b)};ua.run=function(a){for(var b=performance.now()+ua.RUNTIME;;){a.results.add(Ja.getResult(a.roller.roll(a.expr)));if(a.results.count==
ua.MAXRUNS)break;if(performance.now()>=b)break}ua.send(a);a.results.count<ua.MAXRUNS&&(ua.cancel=sa.delay(function(){ua.run(a)},ua.RUNDELAY))};ua.send=function(a){postMessage({expression:a.exprString,results:a.results.toObject()})};var vb=function(a,b){this.exprString=a;this.expr=b;this.roller=new eb(function(a){return 1+Math.floor(Math.random()*a)});this.results=new wb};vb.__name__=["view","DiceWorkerData"];vb.create=function(a){return new vb(a,m.unsafeParse(a))};vb.prototype={results:null,exprString:null,
expr:null,roller:null,roll:function(){this.results.add(Ja.getResult(this.roller.roll(this.expr)))},__class__:vb};var Ta=function(a,b){this.start=this.end=0;ab.call(this,a,b)};Ta.__name__=["view","ExpressionInput"];Ta.renderValidationsErrors=function(a){var b=new x,c=u.fromString("validation-prefix");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var b=z.el("div",b,y.children([J.Text(ra.msg.validationPrefix,null,null)])),c=new x,d=u.fromString("validation-messages");null!=k["class"]?c.setReserved("class",
d):c.h["class"]=d;return z.el("div",null,y.children([b,z.el("div",c,y.children(oa.toArray(a).map(function(a){var b=new x,c=u.fromString("validation-message");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;return z.el("div",b,y.children([J.Text(Ta.validationMessage(a),null,null)]))})))]))};Ta.rangeToString=function(a){switch(a[1]){case 0:return E.replace(ra.msg.exact,"$value",""+a[2]);case 1:var b=a[3];return E.replace(E.replace(ra.msg.between,"$minInclusive",""+a[2]),"$maxInclusive",""+
b);case 2:return E.replace(ra.msg.valueOrMore,"$value",""+a[2]);case 3:return E.replace(ra.msg.valueOrLess,"$value",""+a[2]);case 4:return a[2].map(Ta.rangeToString).join(" "+ra.msg.or+" ")}};Ta.validationMessage=function(a){switch(a[1]){case 0:return E.replace(ra.msg.insufficientSides,"$sides",""+a[2]);case 1:return ra.msg.emptySet;case 2:var b=a[3];return E.replace(E.replace(ra.msg.infiniteReroll,"$sides",""+a[2]),"$range",Ta.rangeToString(b));case 3:return b=a[3],E.replace(E.replace(ra.msg.tooManyDrops,
"$available",""+a[2]),"$toDrop",""+b);case 4:return b=a[3],E.replace(E.replace(ra.msg.tooManyKeeps,"$available",""+a[2]),"$toKeep",""+b);case 5:return ra.msg.dropOrKeepShouldBePositive}};Ta.renderParseError=function(a){var b=new x,c=u.fromString("label");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var b=[z.el("span",b,y.children([J.Text(ra.msg.expectedOneOf,null,null)])),z.el("br",null,null)].concat(l.interspersef(a.expected.map(function(a){var b=new x,c=u.fromString("expected");null!=
k["class"]?b.setReserved("class",c):b.h["class"]=c;return z.el("span",b,y.children([J.Text(a,null,null)]))}),function(){return z.el("span",null,y.children([J.Text(", ",null,null)]))})),c=z.el("br",null,null),d=new x,e=u.fromString("label");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;b=b.concat([c,z.el("span",d,y.children([J.Text(ra.msg.found,null,null)]))]);a=a.positionToString();var f;switch(a[1]){case 0:f=a[2];a=z.el("br",null,null);c=new x;d=u.fromString("got");null!=k["class"]?c.setReserved("class",
d):c.h["class"]=d;f=[a,z.el("span",c,y.children([J.Text(f,null,null)]))];break;case 1:f=new x,a=u.fromString("eof"),null!=k["class"]?f.setReserved("class",a):f.h["class"]=a,f=[z.el("span",f,y.children([J.Text(" "+ra.msg.endOfFile,null,null)]))]}return b.concat(f)};Ta.__super__=Pa;Ta.prototype=D(Pa.prototype,{start:null,end:null,render:function(){var a,b=this.props.expr;switch(b[1]){case 0:a=b[2];break;case 1:a=b[2];break;case 2:a=b[2];break;case 3:a=b[2]}var b=new x,c=u.fromString("expression-input");
null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var c=new x,d=u.fromString("text-editor");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;d=u.fromString("true");null!=k.contentEditable?c.setReserved("contentEditable",d):c.h.contentEditable=d;var e=M(this,this.onInput),d=u.fromEventHandler(function(a,b){b.preventDefault();e(a)});null!=k.input?c.setReserved("input",d):c.h.input=d;var f=M(this,this.selectionChange),d=u.fromEventHandler(function(a,b){b.preventDefault();f(a)});null!=
k.keyup?c.setReserved("keyup",d):c.h.keyup=d;a=[z.el("div",b,y.children([z.el("span",c,y.children([J.Text(a,null,null)]))]))];b=this.props.expr;switch(b[1]){case 2:b=b[3];c=new x;d=u.fromString("error");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;b=[z.el("div",c,y.children([Ta.renderValidationsErrors(b)]))];break;case 3:b=b[3];c=new x;d=u.fromString("error");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;b=[z.el("div",c,y.children(Ta.renderParseError(b)))];break;default:b=[]}return z.el("div",
null,y.children(a.concat(b)))},didUpdate:function(){},selectionChange:function(a){this.start=a.selectionStart;this.end=a.selectionEnd},onInput:function(a){this.selectionChange(a);this.props.dispatch(qa.EvaluateExpression(a.textContent))},classes:function(){return"view_expression-input"},__class__:Ta});var ka=function(a){var b=y.children([]);ab.call(this,a,b);ka.view=this;ka.post(a.expression)};ka.__name__=["view","ProbabilitiesView"];ka.post=function(a){ka.worker.postMessage({expression:a})};ka.percent=
function(a){a=w.fixed(100*a,ka.ROUND).split(".");a[1]=r.trimCharsRight(a[1],"0");a=a.filter(r.hasContent);return a.join(".")+"%"};ka.__super__=Pa;ka.prototype=D(Pa.prototype,{migrationFields:function(){return Pa.prototype.migrationFields.call(this).concat(["worker"])},render:function(){var a=this.props.probabilities.stats(),b=new x,c=u.fromString("bars");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var c=new x,d=u.fromString("stats");null!=k["class"]?c.setReserved("class",d):c.h["class"]=
d;var c=z.el("div",c,y.children([J.Text(E.replace(E.replace(E.replace(ra.msg.probabilitiesStats,"$minValue",w.number(a.minValue,0)),"$maxValue",w.number(a.maxValue,0)),"$count",w.number(a.count,0)),null,null)])),d=new x,e=u.fromString("probabilities-container");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;var e=new x,f=u.fromString("probabilities");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;var f=new x,h=u.fromString("barchart");null!=k["class"]?f.setReserved("class",h):
f.h["class"]=h;var f=z.el("div",f,y.children(a.map(M(this,this.renderAtLeast)))),h=new x,g=u.fromString("barchart");null!=k["class"]?h.setReserved("class",g):h.h["class"]=g;var h=z.el("div",h,y.children(a.map(M(this,this.renderProb)))),g=new x,l=u.fromString("barchart");null!=k["class"]?g.setReserved("class",l):g.h["class"]=l;a=z.el("div",e,y.children([f,h,z.el("div",g,y.children(a.map(M(this,this.renderAtMost))))]));e=new x;f=u.fromString("probabilities-labels");null!=k["class"]?e.setReserved("class",
f):e.h["class"]=f;f=new x;h=u.fromString("label");null!=k["class"]?f.setReserved("class",h):f.h["class"]=h;f=z.el("div",f,y.children([J.Text(ra.msg.atLeast,null,null)]));h=new x;g=u.fromString("label");null!=k["class"]?h.setReserved("class",g):h.h["class"]=g;h=z.el("div",h,y.children([J.Text(ra.msg.probabilities,null,null)]));g=new x;l=u.fromString("label");null!=k["class"]?g.setReserved("class",l):g.h["class"]=l;return z.el("div",b,y.children([c,z.el("div",d,y.children([a,z.el("div",e,y.children([f,
h,z.el("div",g,y.children([J.Text(ra.msg.atMost,null,null)]))]))]))]))},willMount:function(){ka.view=this},willUnmount:function(){ka.view=null},mouseEnter:function(a){var b=this;return function(){b.update({expression:b.props.expression,parsed:b.props.parsed,probabilities:b.props.probabilities,selected:B.Some(a)},{fileName:"ProbabilitiesView.hx",lineNumber:94,className:"view.ProbabilitiesView",methodName:"mouseEnter"})}},renderProb:function(a){var b=new x,c=new x;null!=k["bar-container"]?c.setReserved("bar-container",
!0):c.h["bar-container"]=!0;var d=this.isSelected(a.value);null!=k.selected?c.setReserved("selected",d):c.h.selected=d;c=u.fromBoolMap(c);null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var e=this.mouseEnter(a.value),c=u.fromEventHandler(function(a,b){b.preventDefault();e()});null!=k.mouseenter?b.setReserved("mouseenter",c):b.h.mouseenter=c;var f=this.mouseEnter(a.value),c=u.fromEventHandler(function(a,b){b.preventDefault();f()});null!=k.click?b.setReserved("click",c):b.h.click=c;c=new x;
d=u.fromString("label");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;var d=new x,h=u.fromString("text");null!=k["class"]?d.setReserved("class",h):d.h["class"]=h;c=z.el("div",c,y.children([z.el("div",d,y.children([J.Text(""+a.value,null,null)]))]));d=new x;h=u.fromString("bar");null!=k["class"]?d.setReserved("class",h):d.h["class"]=h;h=u.fromString("height: "+this.height(a.get_maxPercent()*ka.barHeight));null!=k.style?d.setReserved("style",h):d.h.style=h;var d=z.el("div",d,y.children([J.Text("",
null,null)])),h=new x,g=u.fromString("percent");null!=k["class"]?h.setReserved("class",g):h.h["class"]=g;var g=new x,l=u.fromString("text");null!=k["class"]?g.setReserved("class",l):g.h["class"]=l;return z.el("div",b,y.children([c,d,z.el("div",h,y.children([z.el("div",g,y.children([J.Text(ka.percent(a.get_percent()),null,null)]))]))]))},isSelected:function(a){var b=this.props.selected;switch(b[1]){case 0:return b[2]==a;case 1:return!1}},renderAtMost:function(a){var b=new x,c=new x;null!=k["bar-container"]?
c.setReserved("bar-container",!0):c.h["bar-container"]=!0;var d=this.isSelected(a.value);null!=k.selected?c.setReserved("selected",d):c.h.selected=d;c=u.fromBoolMap(c);null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var e=this.mouseEnter(a.value),c=u.fromEventHandler(function(a,b){b.preventDefault();e()});null!=k.mouseenter?b.setReserved("mouseenter",c):b.h.mouseenter=c;var f=this.mouseEnter(a.value),c=u.fromEventHandler(function(a,b){b.preventDefault();f()});null!=k.click?b.setReserved("click",
c):b.h.click=c;c=new x;d=u.fromString("label");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;var d=new x,h=u.fromString("text");null!=k["class"]?d.setReserved("class",h):d.h["class"]=h;c=z.el("div",c,y.children([z.el("div",d,y.children([J.Text(""+a.value,null,null)]))]));d=new x;h=u.fromString("bar");null!=k["class"]?d.setReserved("class",h):d.h["class"]=h;h=u.fromString("height: "+this.height(a.get_accPercent()*ka.barHeight));null!=k.style?d.setReserved("style",h):d.h.style=h;var d=z.el("div",
d,y.children([J.Text("",null,null)])),h=new x,g=u.fromString("percent");null!=k["class"]?h.setReserved("class",g):h.h["class"]=g;var g=new x,l=u.fromString("text");null!=k["class"]?g.setReserved("class",l):g.h["class"]=l;return z.el("div",b,y.children([c,d,z.el("div",h,y.children([z.el("div",g,y.children([J.Text(ka.percent(a.get_accPercent()),null,null)]))]))]))},renderAtLeast:function(a){var b=a.get_revPercent(),c=new x,d=new x;null!=k["bar-container"]?d.setReserved("bar-container",!0):d.h["bar-container"]=
!0;var e=this.isSelected(a.value);null!=k.selected?d.setReserved("selected",e):d.h.selected=e;d=u.fromBoolMap(d);null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;var f=this.mouseEnter(a.value),d=u.fromEventHandler(function(a,b){b.preventDefault();f()});null!=k.mouseenter?c.setReserved("mouseenter",d):c.h.mouseenter=d;var h=this.mouseEnter(a.value),d=u.fromEventHandler(function(a,b){b.preventDefault();h()});null!=k.click?c.setReserved("click",d):c.h.click=d;d=new x;e=u.fromString("label");
null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;var e=new x,g=u.fromString("text");null!=k["class"]?e.setReserved("class",g):e.h["class"]=g;a=z.el("div",d,y.children([z.el("div",e,y.children([J.Text(""+a.value,null,null)]))]));d=new x;e=u.fromString("bar");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;e=u.fromString("height: "+this.height(b*ka.barHeight));null!=k.style?d.setReserved("style",e):d.h.style=e;d=z.el("div",d,y.children([J.Text("",null,null)]));e=new x;g=u.fromString("percent");
null!=k["class"]?e.setReserved("class",g):e.h["class"]=g;var g=new x,l=u.fromString("text");null!=k["class"]?g.setReserved("class",l):g.h["class"]=l;return z.el("div",c,y.children([a,d,z.el("div",e,y.children([z.el("div",g,y.children([J.Text(ka.percent(b),null,null)]))]))]))},height:function(a){return Math.round(10*a)/10+"px"},classes:function(){return"view_probabilities-view"},__class__:ka});var Fb=function(a,b){ab.call(this,a,b)};Fb.__name__=["view","RollDetailsView"];Fb.__super__=Pa;Fb.prototype=
D(Pa.prototype,{render:function(){return this.renderRollResult(this.props)},renderRollResult:function(a){switch(a[1]){case 0:return this.renderDie(a[2]);case 1:var b=a[3];a=new x;var c=u.fromString("literal");null!=k["class"]?a.setReserved("class",c):a.h["class"]=c;return z.el("div",a,y.children([J.Text(""+b,null,null)]));case 2:switch(a[2][1]){case 0:return b=a[4],c=a[3],this.renderRolls(this.renderExpressionSet(a[2][2],c),b,c);case 1:return b=a[4],c=a[3],this.renderRolls(this.renderDieResultFilterSet(a[2][2],
a[2][3],c),b,c);case 2:return b=a[4],c=a[3],this.renderRolls(this.renderDieResultMapSet(a[2][2],a[2][3],c),b,c)}break;case 3:var b=a[4],d=a[3],c=a[2];a=new x;var e=u.fromString("binop");null!=k["class"]?a.setReserved("class",e):a.h["class"]=e;var e=new x,f=u.fromString("left");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;d=z.el("div",e,y.children([(new Fb(d)).asNode()]));e=new x;f=u.fromString("op");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;c=z.el("div",e,y.children([J.Text(this.renderOp(c),
null,null)]));e=new x;f=u.fromString("right");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;return z.el("div",a,y.children([d,c,z.el("div",e,y.children([(new Fb(b)).asNode()]))]));case 4:return b=a[3],a=new x,c=u.fromString("unop"),null!=k["class"]?a.setReserved("class",c):a.h["class"]=c,z.el("div",a,y.children([(new Fb(b)).asNode()]))}},renderRollFilterResult:function(a){switch(a[1]){case 0:a=a[2];var b=new x,c=u.fromString("keep");null!=k["class"]?b.setReserved("class",c):b.h["class"]=
c;return z.el("div",b,y.children([this.renderRollResult(a)]));case 1:return a=a[2],b=new x,c=u.fromString("discard"),null!=k["class"]?b.setReserved("class",c):b.h["class"]=c,z.el("div",b,y.children([this.renderRollResult(a)]))}},renderRollMapResult:function(a){switch(a[1]){case 0:var b=a[2];a=b.slice(0,-1).map(M(this,this.renderDie)).map(function(a){var b=new x,c=u.fromString("discard");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;return z.el("div",b,y.children([a]))});var c=new x,d=u.fromString("keep");
null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;a.push(z.el("div",c,y.children([this.renderDie(b[b.length-1])])));b=new x;c=u.fromString("rerolled");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;a=a.slice();a.reverse();return z.el("div",b,y.children(a));case 1:return b=a[2],a=new x,c=u.fromString("exploded"),null!=k["class"]?a.setReserved("class",c):a.h["class"]=c,b=b.slice(),b.reverse(),z.el("div",a,y.children(b.map(M(this,this.renderDie)).map(function(a){var b=new x,c=u.fromString("keep");
null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;return z.el("div",b,y.children([a]))})));case 2:return a=a[2],b=new x,c=u.fromString("normal"),null!=k["class"]?b.setReserved("class",c):b.h["class"]=c,z.el("div",b,y.children([this.renderDie(a)]))}},instersperseOp:function(a){var b=0==a[1]?"+":",";return function(){var a=new x,d=u.fromString("comma");null!=k["class"]?a.setReserved("class",d):a.h["class"]=d;return z.el("div",a,y.children([J.Text(b,null,null)]))}},renderExpressionSet:function(a,
b){return l.interspersef(a.map(M(this,this.renderRollResult)),this.instersperseOp(b))},renderDieResultMapSet:function(a,b,c){return l.interspersef(a.map(M(this,this.renderRollMapResult)),this.instersperseOp(c))},renderDieResultFilterSet:function(a,b,c){return l.interspersef(a.map(M(this,this.renderRollFilterResult)),this.instersperseOp(c))},renderRolls:function(a,b,c){var d=this;if(1==a.length){b=new x;var e=u.fromString("reduce");null!=k["class"]?b.setReserved("class",e):b.h["class"]=e;e=y.children([this.displayReducer(c)]);
return z.el("div",b,y.children(a.concat(e)))}return this.details(b,function(){var b=new x,e=u.fromString("dice-set");null!=k["class"]?b.setReserved("class",e):b.h["class"]=e;var b=[z.el("div",b,y.children(a))],e=new x,g=u.fromString("reduce");null!=k["class"]?e.setReserved("class",g):e.h["class"]=g;return z.el("div",e,y.children(b.concat(y.children([d.displayReducer(c)]))))})},displayReducer:function(a){switch(a[1]){case 0:a=new x;var b=u.fromString("display:none");null!=k.style?a.setReserved("style",
b):a.h.style=b;b=u.fromString("empty node");null!=k["data-comment"]?a.setReserved("data-comment",b):a.h["data-comment"]=b;return z.el("div",a);case 1:return z.el("div",null,y.children([J.Text("average",null,null)]));case 2:return z.el("div",null,y.children([J.Text("min",null,null)]));case 3:return z.el("div",null,y.children([J.Text("max",null,null)]));case 4:return z.el("div",null,y.children([J.Text("median",null,null)]))}},renderDie:function(a){var b="roll"+Math.ceil(5*Math.random());switch(a.sides){case 6:var c=
new x,d=u.fromString("die-container");null!=k["class"]?c.setReserved("class",d):c.h["class"]=d;d=new x;b=u.fromString("die-icon roll "+b);null!=k["class"]?d.setReserved("class",b):d.h["class"]=b;var b=new x,e=u.fromString("df-dot-d6-"+a.result);null!=k["class"]?b.setReserved("class",e):b.h["class"]=e;return z.el("div",c,y.children([z.el("div",d,y.children([z.el("i",b,null)]))]));case 2:case 4:case 8:case 10:case 12:case 20:return c=new x,d=u.fromString("die-container"),null!=k["class"]?c.setReserved("class",
d):c.h["class"]=d,d=new x,b=u.fromString("die-icon roll "+b),null!=k["class"]?d.setReserved("class",b):d.h["class"]=b,b=new x,e=u.fromString("df-d"+a.sides+"-"+a.result),null!=k["class"]?b.setReserved("class",e):b.h["class"]=e,z.el("div",c,y.children([z.el("div",d,y.children([z.el("i",b,null)]))]));default:return this.details(a.result,function(){var b=new x,c=u.fromString("die");null!=k["class"]?b.setReserved("class",c):b.h["class"]=c;var c=new x,d=u.fromString("d");null!=k["class"]?c.setReserved("class",
d):c.h["class"]=d;var c=z.el("div",c,y.children([J.Text("d",null,null)])),d=new x,e=u.fromString("X");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;return z.el("div",b,y.children([c,z.el("div",d,100==a.sides?y.children([J.Text("%",null,null)]):y.children([J.Text(""+a.sides,null,null)]))]))})}},renderOp:function(a){switch(a[1]){case 0:return"+";case 1:return"-";case 2:return"\u00f7";case 3:return"\u00d7"}},details:function(a,b){var c=new x,d=u.fromString("pair");null!=k["class"]?c.setReserved("class",
d):c.h["class"]=d;var d=new x,e=u.fromString("result");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;var d=z.el("div",d,y.children([J.Text(""+a,null,null)])),e=new x,f=u.fromString("details");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;return z.el("div",c,y.children([d,z.el("div",e,y.children([b()]))]))},classes:function(){return"view_roll-details-view"},__class__:Fb});var ac=function(a,b){ab.call(this,a,b)};ac.__name__=["view","RollView"];ac.__super__=Pa;ac.prototype=D(Pa.prototype,
{render:function(){var a=this.props;switch(a[1]){case 0:var b=a[2].seed,a=a[2].expression,c=gb.std(b),a=(new eb(function(a){a=Math.floor(c.get_normalized()*a)+1;c=c.next();return a})).roll(a),d=new x,e=u.fromString("roll-box");null!=k["class"]?d.setReserved("class",e):d.h["class"]=e;var e=new x,f=u.fromString("rolling");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;var f=new x,g=u.fromString("roll-result");null!=k["class"]?f.setReserved("class",g):f.h["class"]=g;var g=new x,l=M(this,this.roll),
n=c.get_int(),m=u.fromEventHandler(function(a,b){b.preventDefault();l(n)});null!=k.click?g.setReserved("click",m):g.h.click=m;m=u.fromString("#");null!=k.href?g.setReserved("href",m):g.h.href=m;f=z.el("div",f,y.children([z.el("a",g,y.children([J.Text(""+Ja.getResult(a),null,null)]))]));g=new x;m=u.fromString("roll-seed");null!=k["class"]?g.setReserved("class",m):g.h["class"]=m;var m=z.el("span",null,y.children([J.Text("seed: ",null,null)])),p=new x,q=u.fromString("text-editor");null!=k["class"]?p.setReserved("class",
q):p.h["class"]=q;var r=M(this,this.changeSeed),q=u.fromEventHandler(function(a,b){b.preventDefault();var c=O.getValue(a);r(c)});null!=k.input?p.setReserved("input",q):p.h.input=q;q=u.fromString("true");null!=k.contentEditable?p.setReserved("contentEditable",q):p.h.contentEditable=q;b=z.el("div",e,y.children([f,z.el("div",g,y.children([m,z.el("span",p,y.children([J.Text(""+b,null,null)]))]))]));e=new x;f=u.fromString("roll-details");null!=k["class"]?e.setReserved("class",f):e.h["class"]=f;return z.el("div",
d,y.children([b,z.el("div",e,y.children([J.Comp(new Fb(a))]))]));case 1:return a=new x,d=u.fromString("display:none"),null!=k.style?a.setReserved("style",d):a.h.style=d,d=u.fromString("empty node"),null!=k["data-comment"]?a.setReserved("data-comment",d):a.h["data-comment"]=d,z.el("div",a)}},changeSeed:function(a){a=H.parseInt(a);this.roll(1>a?1:2147483647<=a?2147483646:a)},roll:function(a){p.map(this.props,function(b){b.updateSeed(a)})},didMount:function(){this.rollEffect()},didUpdate:function(){this.rollEffect()},
rollEffect:function(){var a,b=Sa.selectNodes(".roll",null);l.each(Array.prototype.slice.call(b,0),function(b){for(var c=1;6>c;){var e=c++;b.classList.remove("roll"+e)}a=b.offsetWidth;b.classList.add("roll"+Math.ceil(5*Math.random()))});return a},classes:function(){return"view_roll-view"},__class__:ac});var gd=0;String.prototype.__class__=String;String.__name__=["String"];Array.__name__=["Array"];Date.prototype.__class__=Date;Date.__name__=["Date"];var id={__name__:["Int"]},hd={__name__:["Dynamic"]},
Zc=Number;Zc.__name__=["Float"];var Yc=Boolean;Yc.__ename__=["Bool"];var $c={__name__:["Class"]},ad={},k={},ya="undefined"!==typeof window&&window||"undefined"!==typeof global&&global||Function("return this")();ya.setImmediate||(ya.setImmediate=function(a){ya.setTimeout(a,0)});for(var ed=0,Sc=["webkit","moz"],wc=0;wc<Sc.length&&!ya.requestAnimationFrame;)ya.requestAnimationFrame=ya[Sc[wc]+"RequestAnimationFrame"],ya.cancelAnimationFrame=ya[Sc[wc]+"CancelAnimationFrame"]||ya[Sc[wc]+"CancelRequestAnimationFrame"],
++wc;ya.requestAnimationFrame||(ya.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-ed)),d=ya.setTimeout(function(){a(b+c)},c);ed=b+c;return d});ya.cancelAnimationFrame||(ya.cancelAnimationFrame=function(a){ya.clearTimeout(a)});"undefined"==typeof ya.performance&&(ya.performance={});if("undefined"==typeof ya.performance.now){var fd=(new Date).getTime();ya.performance.timing&&ya.performance.timing.navigationStart&&(fd=ya.performance.timing.navigationStart);ya.performance.now=
function(){return new Date-fd}}ta.cultures=new x;ta.list=[];ib.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];Ia.defaultNamespaces=function(a){a=new x;null!=k.svg?a.setReserved("svg","http://www.w3.org/2000/svg"):a.h.svg="http://www.w3.org/2000/svg";null!=k.xlink?a.setReserved("xlink","http://www.w3.org/1999/xlink"):a.h.xlink="http://www.w3.org/1999/xlink";null!=k.ev?a.setReserved("ev","http://www.w3.org/2001/xml-events"):a.h.ev="http://www.w3.org/2001/xml-events";null!=k.xsl?a.setReserved("xsl",
"http://www.w3.org/1999/XSL/Transform"):a.h.xsl="http://www.w3.org/1999/XSL/Transform";null!=k.m?a.setReserved("m","http://www.w3.org/1998/Math/MathML"):a.h.m="http://www.w3.org/1998/Math/MathML";return a}(this);Tc.browser=new Ia;ra.description2="# Basic Expressions\n\nType your dice expressions in the box.\n\nThe simplest expression is [`d`][1] which means roll one die with 6 faces. You can be more explicit and input [`1d6`](#/d/1d6) or  [`d6`][2]. Of course you can run multiple dice ([`3d6`][3]) and with different number of sides [`2d10`][4]. The popular [`d100`][5] (a percent die) can also be expressed as [`d%`][6].\n\n# Math Operations\n\nYou can use basic mathematical operators [`3d6+4-1d4`][7]. All math operations will return integer numbers: [`5d6/2`][8]\n\n# Expression Set and Reducing\n\nMany expressions can be provided in a set like [`(2d6,3d8,1d10+2)`][9]. By default the result of each expression will be summed together. You can also be explicit [`(2d6,3d8,1d10+2) sum`][10] or you can use other reducing function like [`min`][11], [`max`][12], [`average`][13] or [`median`][14].\n\nYou can use expression set to force the order of arithmetic operations: [`(3d6+2)*2`][15] which is equivalent to [`(3d6,2)*2`][16]. Reduced sets can be used as part of more complex mathematical expressions [`(3d6,9) keep 1 * 2`][17].\n\n# Filtering\n\nIt is also possible to peform filtering operations on a set of expressions like *drop* and *keep*. Drop will only keep the values that do not match a condition: [`4d6 drop lowest 1`][18]. For *drop* the default matching condition is *lowest* so you can ommit it: [`4d6 drop 1`][19]. *Keep* will retain by default the top `N` values. [`4d6 keep 3`][20] is basically equivalend to the `drop 1` above. You can be explicit and state [`4d6 keep highest 3`][21].\n\n# Dice Set\n\nSimpler sets of dice like [`5d6`][22] are expanded into [`(d6,d6,d6,d6,d6)`][23]. On these simple sets it is possible to apply two special functions: *explode* and *reroll*.\n\nA dice set can be composed of dice with different denominations [`(d2,d4,d6,d8,d10)`][24]. On the other hand a dice set can only be composed of nominal dice: [`(d6,2d8)`][25] is NOT a dice set! It is still a valid expression set that can be reduced and filtered.\n\n# Explode / Reroll\n\nTODO\n\n  * dice set\n  * explode/reroll\n  * dice font\n  * dice roller\n  * dice link template: [``](#/d/)\n\n  [1]: #/d/d\n  [2]: #/d/d6\n  [3]: #/d/3d6\n  [4]: #/d/2d10\n  [5]: #/d/d100\n  [6]: #/d/d%\n  [7]: #/d/3d6+4-1d4\n  [8]: #/d/5d6/2\n  [9]: #/d/(2d6,3d8,1d10+2)_\n  [10]: #/d/(2d6,3d8,1d10+2)_sum\n  [11]: #/d/(2d6,3d8,1d10+2)_min\n  [12]: #/d/(2d6,3d8,1d10+2)_max\n  [13]: #/d/(2d6,3d8,1d10+2)_average\n  [14]: #/d/(2d6,3d8,1d10+2)_median\n  [15]: #/d/(3d6+2)*2\n  [16]: #/d/(3d6,2)*2\n  [17]: #/d/(3d6,9)_keep_1_*_2\n  [18]: #/d/4d6_drop_lowest_1\n  [19]: #/d/4d6_drop_1\n  [20]: #/d/4d6_keep_3\n  [21]: #/d/4d6_keep_highest_3\n  [22]: #/d/5d6\n  [23]: #/d/(d6,d6,d6,d6,d6)_\n  [24]: #/d/(d2,d4,d6,d8,d10)_\n  [25]: #/d/(d6,2d8)_\n";
ra.description="# Basic Expressions\n\nType your dice expressions in the box.\n\nThe simplest expression is [`d`](#/d/d) which means roll one die with 6 faces. You can be more explicit and input [`1d6`](#/d/1d6) or  [`d6`](#/d/d6). Of course you can run multiple dice ([`3d6`](#/d/3d6)) and with different number of sides [`2d10`](#/d/2d10). The popular [`d100`](#/d/d100) (a percent die) can also be expressed as [`d%`](#/d/d%).\n\n# Math Operations\n\nYou can use basic mathematical operators [`3d6+4-1d4`](#/d/3d6+4-1d4). All math operations will return integer numbers: [`5d6/2`](#/d/5d6/2)\n\n# Expression Set and Reducing\n\nMany expressions can be provided in a set like [`(2d6,3d8,1d10+2)`](#/d/(2d6,3d8,1d10+2). By default the result of each expression will be summed together. You can also be explicit [`(2d6,3d8,1d10+2) sum`](#/d/(2d6,3d8,1d10+2)sum) or you can use other reducing function like [`min`](#/d/(2d6,3d8,1d10+2)min), [`max`](#/d/(2d6,3d8,1d10+2)max) or [`average`](#/d/(2d6,3d8,1d10+2)average).\n\nYou can use expression set to force the order of arithmetic operations: [`(3d6+2)*2`](#/d/(3d6+2)*2) which is equivalent to [`(3d6,2)*2`](#/d/(3d6,2)*2). Reduced sets can be used as part of more complex mathematical expressions [`(3d6,9) keep 1 * 2`](#/d/(3d6,9)_keep_1_*_2).\n\n# Filtering\n\nIt is also possible to peform filtering operations on a set of expressions like *drop* and *keep*. Drop will only keep the values that do not match a condition: [`4d6 drop lowest 1`](#/d/4d6_drop_lowest_1). For *drop* the default matching condition is *lowest* so you can ommit it: [`4d6 drop 1`](#/d/4d6_drop_1). *Keep* will retain by default the top `N` values. [`4d6 keep 3`](#/d/4d6_keep_3) is basically equivalend to the `drop 1` above. You can be explicit and state [`4d6 keep highest 3`](#/d/4d6_keep_highest_3).\n\n# Dice Set\n\nSimpler sets of dice like [`5d6`](#/d/5d6) are expanded into [`(d6,d6,d6,d6,d6)`](#/d/(d6,d6,d6,d6,d6)). On these simple sets it is possible to apply two special functions: *explode* and *reroll*.\n\nA dice set can be composed of dice with different denominations [`(d2,d4,d6,d8,d10)`](#/d/(d2,d4,d6,d8,d10)). On the other hand a dice set can only be composed of nominal dice: [`(d6,2d8)`](#/d/(d6,2d8)) is NOT a dice set! It is still a valid expression set that can be reduced and filtered.\n\n# Explode / Reroll\n\nTODO\n\n  * dice set\n  * explode/reroll\n  * dice font\n  * dice roller\n  * dice link template: [``](#/d/)\n";
ra.msg={expectedOneOf:"expected one of",valueOrMore:"$value or more",valueOrLess:"$value or less",validationPrefix:"the expression is valid but the numbers are wrong!",atLeast:"at least",emptySet:"invalid empty set of dice",jumpersideasLink:"https://jumpersideas.com/#!dice-roller",probabilities:"probabilities",infiniteReroll:"this will roll forever! a d$sides always matches $range",jumpersideas:"jumpersideas.com",endOfFile:"end of file",found:"found",or:"or",exact:"exactly $value",probabilitiesStats:"values between $minValue and $maxValue, samples: $count",
between:"between $minInclusive and $maxInclusive",dropOrKeepShouldBePositive:"a drop or keep value should always be more than zero",tooManyDrops:"the set has $available values and you are dropping $toDrop?",tooManyKeeps:"the set has $available values and you are keeping $toKeep?",asConfabulatedOn:"as confabulated on",insufficientSides:"a d$sides, are you for real?",atMost:"at most"};Ea.properties=function(a){a=new x;var b=V.BooleanAttribute;null!=k.allowFullScreen?a.setReserved("allowFullScreen",
b):a.h.allowFullScreen=b;b=V.BooleanAttribute;null!=k.async?a.setReserved("async",b):a.h.async=b;b=V.BooleanAttribute;null!=k.autoFocus?a.setReserved("autoFocus",b):a.h.autoFocus=b;b=V.BooleanAttribute;null!=k.autoPlay?a.setReserved("autoPlay",b):a.h.autoPlay=b;b=V.BooleanAttribute;null!=k.capture?a.setReserved("capture",b):a.h.capture=b;b=V.BooleanProperty;null!=k.checked?a.setReserved("checked",b):a.h.checked=b;b=V.PositiveNumericAttribute;null!=k.cols?a.setReserved("cols",b):a.h.cols=b;b=V.BooleanAttribute;
null!=k.contentEditable?a.setReserved("contentEditable",b):a.h.contentEditable=b;b=V.BooleanAttribute;null!=k.controls?a.setReserved("controls",b):a.h.controls=b;b=V.BooleanAttribute;null!=k["default"]?a.setReserved("default",b):a.h["default"]=b;b=V.BooleanAttribute;null!=k.defer?a.setReserved("defer",b):a.h.defer=b;b=V.BooleanAttribute;null!=k.disabled?a.setReserved("disabled",b):a.h.disabled=b;b=V.OverloadedBooleanAttribute;null!=k.download?a.setReserved("download",b):a.h.download=b;b=V.BooleanAttribute;
null!=k.formNoValidate?a.setReserved("formNoValidate",b):a.h.formNoValidate=b;b=V.BooleanAttribute;null!=k.hidden?a.setReserved("hidden",b):a.h.hidden=b;b=V.BooleanAttribute;null!=k.loop?a.setReserved("loop",b):a.h.loop=b;b=V.BooleanProperty;null!=k.multiple?a.setReserved("multiple",b):a.h.multiple=b;b=V.BooleanProperty;null!=k.muted?a.setReserved("muted",b):a.h.muted=b;b=V.BooleanAttribute;null!=k.noValidate?a.setReserved("noValidate",b):a.h.noValidate=b;b=V.BooleanAttribute;null!=k.open?a.setReserved("open",
b):a.h.open=b;b=V.BooleanAttribute;null!=k.readOnly?a.setReserved("readOnly",b):a.h.readOnly=b;b=V.BooleanAttribute;null!=k.required?a.setReserved("required",b):a.h.required=b;b=V.BooleanAttribute;null!=k.reversed?a.setReserved("reversed",b):a.h.reversed=b;b=V.PositiveNumericAttribute;null!=k.rows?a.setReserved("rows",b):a.h.rows=b;b=V.NumericAttribute;null!=k.rowSpan?a.setReserved("rowSpan",b):a.h.rowSpan=b;b=V.BooleanAttribute;null!=k.scoped?a.setReserved("scoped",b):a.h.scoped=b;b=V.BooleanAttribute;
null!=k.seamless?a.setReserved("seamless",b):a.h.seamless=b;b=V.BooleanProperty;null!=k.selected?a.setReserved("selected",b):a.h.selected=b;b=V.PositiveNumericAttribute;null!=k.size?a.setReserved("size",b):a.h.size=b;b=V.PositiveNumericAttribute;null!=k.span?a.setReserved("span",b):a.h.span=b;b=V.NumericAttribute;null!=k.start?a.setReserved("start",b):a.h.start=b;b=V.SideEffectProperty;null!=k.value?a.setReserved("value",b):a.h.value=b;b=V.BooleanAttribute;null!=k.itemScope?a.setReserved("itemScope",
b):a.h.itemScope=b;return a}(this);Ua.properties=function(a){a=new x;var b=W.BooleanAttribute;null!=k.allowFullScreen?a.setReserved("allowFullScreen",b):a.h.allowFullScreen=b;b=W.BooleanAttribute;null!=k.async?a.setReserved("async",b):a.h.async=b;b=W.BooleanAttribute;null!=k.autoFocus?a.setReserved("autoFocus",b):a.h.autoFocus=b;b=W.BooleanAttribute;null!=k.autoPlay?a.setReserved("autoPlay",b):a.h.autoPlay=b;b=W.BooleanAttribute;null!=k.capture?a.setReserved("capture",b):a.h.capture=b;b=W.BooleanProperty;
null!=k.checked?a.setReserved("checked",b):a.h.checked=b;b=W.PositiveNumericAttribute;null!=k.cols?a.setReserved("cols",b):a.h.cols=b;b=W.BooleanAttribute;null!=k.contentEditable?a.setReserved("contentEditable",b):a.h.contentEditable=b;b=W.BooleanAttribute;null!=k.controls?a.setReserved("controls",b):a.h.controls=b;b=W.BooleanAttribute;null!=k["default"]?a.setReserved("default",b):a.h["default"]=b;b=W.BooleanAttribute;null!=k.defer?a.setReserved("defer",b):a.h.defer=b;b=W.BooleanAttribute;null!=k.disabled?
a.setReserved("disabled",b):a.h.disabled=b;b=W.OverloadedBooleanAttribute;null!=k.download?a.setReserved("download",b):a.h.download=b;b=W.BooleanAttribute;null!=k.formNoValidate?a.setReserved("formNoValidate",b):a.h.formNoValidate=b;b=W.BooleanAttribute;null!=k.hidden?a.setReserved("hidden",b):a.h.hidden=b;b=W.BooleanAttribute;null!=k.loop?a.setReserved("loop",b):a.h.loop=b;b=W.BooleanProperty;null!=k.multiple?a.setReserved("multiple",b):a.h.multiple=b;b=W.BooleanProperty;null!=k.muted?a.setReserved("muted",
b):a.h.muted=b;b=W.BooleanAttribute;null!=k.noValidate?a.setReserved("noValidate",b):a.h.noValidate=b;b=W.BooleanAttribute;null!=k.open?a.setReserved("open",b):a.h.open=b;b=W.BooleanAttribute;null!=k.readOnly?a.setReserved("readOnly",b):a.h.readOnly=b;b=W.BooleanAttribute;null!=k.required?a.setReserved("required",b):a.h.required=b;b=W.BooleanAttribute;null!=k.reversed?a.setReserved("reversed",b):a.h.reversed=b;b=W.PositiveNumericAttribute;null!=k.rows?a.setReserved("rows",b):a.h.rows=b;b=W.NumericAttribute;
null!=k.rowSpan?a.setReserved("rowSpan",b):a.h.rowSpan=b;b=W.BooleanAttribute;null!=k.scoped?a.setReserved("scoped",b):a.h.scoped=b;b=W.BooleanAttribute;null!=k.seamless?a.setReserved("seamless",b):a.h.seamless=b;b=W.BooleanProperty;null!=k.selected?a.setReserved("selected",b):a.h.selected=b;b=W.PositiveNumericAttribute;null!=k.size?a.setReserved("size",b):a.h.size=b;b=W.PositiveNumericAttribute;null!=k.span?a.setReserved("span",b):a.h.span=b;b=W.NumericAttribute;null!=k.start?a.setReserved("start",
b):a.h.start=b;b=W.SideEffectProperty;null!=k.value?a.setReserved("value",b):a.h.value=b;b=W.BooleanAttribute;null!=k.itemScope?a.setReserved("itemScope",b):a.h.itemScope=b;return a}(this);Wa.pattern=new Y("[<]([^> ]+)","");Sa.doc=document;R.__toStr={}.toString;m.PLUS=g.string("+");m.MINUS=g.string("-");m.positive=g.map(g.regexp(new Y("[+]?([1-9][0-9]*)",""),1),H.parseInt);m.negative=g.map(g.regexp(new Y("[-]([0-9]*[1-9])","")),H.parseInt);m.whole=g.or(m.positive,m.negative);m.D=g.or(g.string("d"),
g.string("D"));m.OPEN_SET_BRACKET=g.string("(");m.CLOSE_SET_BRACKET=g.string(")");m.COMMA=g.string(",");m.PERCENT=g.string("%");m.WS=g.regexp(new Y("[\\s_]+","m"));m.OWS=g.or(m.WS,g.string(""));m.MULTIPLICATION=g.as(g.regexp(new Y("[*\u22c5\u00d7x]","")),"\u00d7");m.DIVISION=g.or(g.or(g.string("/"),g.string("\u00f7")),g.string(":"));m.lowOrHigh=g.or(g.result(g.or(g.string("lowest"),g.string("low")),db.Low),g.result(g.or(g.string("highest"),g.string("high")),db.High));m.moreLess=g.or(g.result(g.string("more"),
Ib.More),g.result(g.string("less"),Ib.Less));m.orMoreLess=g.then(g.then(g.then(m.OWS,g.string("or")),m.OWS),g.as(m.moreLess,"or (more|less)"));m.on=g.then(g.then(g.string("on"),m.WS),m.positive);m.range=g.alt([g.flatMap(m.on,function(a){return g.then(m.OWS,g.map(m.positive,function(b){return cb.Between(a,b)}))}),g.flatMap(m.on,function(a){return g.then(m.OWS,g.map(m.orMoreLess,function(b){switch(b[1]){case 0:return cb.ValueOrMore(a);case 1:return cb.ValueOrLess(a)}}))}),g.map(m.on,cb.Exact)]);m.diceFunctor=
g.lazy(function(){var a=g.then(g.string("e"),m.OWS),a=g.then(a,g.map(m.positive,function(a){return Sb.Explode(pb.Always,cb.ValueOrMore(a))})),b=g.then(g.string("r"),m.OWS);return g.alt([a,g.then(b,g.map(m.positive,function(a){return Sb.Reroll(pb.Always,cb.ValueOrLess(a))})),m.diceFunctorConst("explode",Sb.Explode),m.diceFunctorConst("reroll",Sb.Reroll)])});m.SUM=g.string("sum");m.AVERAGE=g.or(g.string("average"),g.string("avg"));m.MEDIAN=g.or(g.string("median"),g.string("mdn"));m.MIN=g.or(g.string("minimum"),
g.string("min"));m.MAX=g.or(g.string("maximum"),g.string("max"));m.times=g.alt([g.result(g.string("once"),1),g.result(g.string("twice"),2),g.result(g.string("thrice"),3),g.skip(m.positive,g.then(m.OWS,g.string("times")))]);m.functorTimes=g.alt([g.map(m.times,pb.UpTo),g.then(m.OWS,g.result(g.string("always"),pb.Always)),g.result(g.string(""),pb.Always)]);m.DEFAULT_DIE_SIDES=6;m.die=g.as(g.alt([g.result(g.then(m.D,m.PERCENT),100),g.then(m.D,m.positive),g.result(m.D,m.DEFAULT_DIE_SIDES)]),"one die");
m.negate=g.as(g.lazy(function(){return g.then(m.MINUS,g.map(m.termExpression,function(a){return Ka.UnaryOp(Hc.Negate,a)}))}),"negate");m.unary=g.alt([m.negate]);m.binOpSymbol=g.alt([g.result(m.PLUS,Fa.Sum),g.result(m.MINUS,Fa.Difference),g.result(m.MULTIPLICATION,Fa.Multiplication),g.result(m.DIVISION,Fa.Division)]);m.opRight=g.then(m.OWS,g.flatMap(m.binOpSymbol,function(a){return g.then(m.OWS,g.map(m.termExpression,function(b){return{op:a,right:b}}))}));m.binop=g.lazy(function(){return g.flatMap(m.termExpression,
function(a){return g.map(g.times(m.opRight,1,1E3),function(b){return l.reduce(b,function(a,b){switch(b.op[1]){case 0:case 1:return Ka.BinaryOp(b.op,a,b.right);case 2:case 3:return 3==a[1]?Ka.BinaryOp(a[2],a[3],Ka.BinaryOp(b.op,a[4],b.right)):Ka.BinaryOp(b.op,a,b.right)}},a)})})});m.dieExpression=g.or(g.then(g.string("1"),g.map(m.die,Ka.Die)),g.as(g.map(m.die,Ka.Die),"die"));m.literalExpression=g.as(g.map(m.whole,Ka.Literal),"literal");m.diceExpressions=g.lazy(function(){return g.alt([g.flatMap(m.positive,
function(a){return g.map(m.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(Ka.Die(b));return Hb.DiceExpressions(c)})}),g.map(m.commaSeparated(m.expression),Hb.DiceExpressions)])});m.diceFilterable=g.lazy(function(){return g.flatMap(g.alt([g.flatMap(m.positive,function(a){return g.map(m.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(b);return dc.DiceArray(c)})}),g.map(m.commaSeparated(m.die),function(a){return dc.DiceArray(a)}),g.map(m.commaSeparated(m.expression),dc.DiceExpressions)]),function(a){var b=
m.OWS,c=g.then(g.string("d"),m.OWS),c=g.then(c,g.map(m.positive,function(a){return Rb.Drop(db.Low,a)})),d=m.dirValue(g.string("drop"),db.Low),d=g.map(d,function(a){return Rb.Drop(a.dir,a.value)}),e=g.then(g.string("k"),m.OWS),e=g.then(e,g.map(m.positive,function(a){return Rb.Keep(db.High,a)})),f=m.dirValue(g.string("keep"),db.High);return g.then(b,g.map(g.alt([c,d,e,g.map(f,function(a){return Rb.Keep(a.dir,a.value)})]),function(b){return Hb.DiceListWithFilter(a,b)}))})});m.diceMapeable=g.lazy(function(){var a=
g.flatMap(m.positive,function(a){return g.map(m.die,function(b){for(var c=[],d=0;d<a;)d++,c.push(b);return c})}),b=m.commaSeparated(m.die),c=g.string("1"),c=g.then(c,g.map(m.die,function(a){return[a]}));return g.flatMap(g.alt([a,b,c,g.map(m.die,function(a){return[a]})]),function(a){return g.then(m.OWS,g.map(m.diceFunctor,function(b){return Hb.DiceListWithMap(a,b)}))})});m.termExpression=g.lazy(function(){return g.alt([m.diceReduce(m.diceMapeable),m.diceReduce(m.diceFilterable),m.diceReduce(m.diceExpressions),
m.dieExpression,m.literalExpression,m.unary])});m.expression=g.as(g.lazy(function(){return g.alt([m.binop,m.termExpression])}),"expression");m.grammar=g.then(m.OWS,g.skip(g.skip(m.expression,m.OWS),g.eof()));Ra._mul=null!=Math.imul?Math.imul:function(a,b){return a*(b&65535)+(a*(b>>>16)<<16|0)|0};Vc.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";nb.count=0;K.RE_EMPTY=new Y("^([ \\t]*)$","");K.RE_SETEXT=new Y("^((=+)|(-+))$","");K.RE_HEADER=new Y("^(#{1,6})(.*?)#*$","");K.RE_BLOCKQUOTE=
new Y("^[ ]{0,3}>[ ]?(.*)$","");K.RE_INDENT=new Y("^(?:    |\t)(.*)$","");K.RE_CODE=new Y("^```(\\w*)\\s*$","");K.RE_HR=new Y("^[ ]{0,3}((-+[ ]{0,2}){3,}|(_+[ ]{0,2}){3,}|(\\*+[ ]{0,2}){3,})$","");K.RE_HTML=new Y("^<[ ]*\\w+[ >]","");K.RE_UL=new Y("^[ ]{0,3}[*+-][ \\t]+(.*)$","");K.RE_OL=new Y("^[ ]{0,3}\\d+\\.[ \\t]+(.*)$","");Ya.TABLE_PATTERN=new Y("^(.+? +:?\\|:? +)+(.+)$","");Ya.CELL_PATTERN=new Y("(\\|)?([^\\|]+)(\\|)?","g");Xa.BLOCK_TAGS=new Y("blockquote|h1|h2|h3|h4|h5|h6|hr|p|pre","");Xa.attributeOrder=
["src","alt"];Db.linkPattern='\\](?:(\\s?\\[([^\\]]*)\\]|\\s?\\(([^ )]+)(?:[ ]*"([^"]+)"|)\\))|)';Nb.linkPattern='\\](?:(\\s?\\[([^\\]]*)\\]|\\s?\\(([^ )]+)(?:[ ]*"([^"]+)"|)\\))|)';Gb.defaultSyntaxes=[new rc,new Za(" {2,}\n","<br />\n"),new Za("\\s*[A-Za-z0-9]+"),new sc,new Db,new Nb,new Za(" \\* "),new Za(" _ "),new Za("&[#a-zA-Z0-9]*;"),new Za("&","&amp;"),new Za("</?\\w+.*?>"),new Za("<","&lt;"),new Va("\\*\\*","strong"),new Va("__","strong"),new Va("\\*","em"),new Va("\\b_","em","_\\b"),new Ub("``\\s?((?:.|\\n)*?)\\s?``"),
new Ub("`([^`]*)`")];v.order=Jb.fromIntComparison(v.compare);X.TOLERANCE=1E-4;X.EPSILON=1E-9;X.pattern_parse=new Y("^(\\+|-)?\\d+(\\.\\d+)?(e-?\\d+)?$","");X.order=Jb.fromIntComparison(X.compare);X.monoid={zero:0,append:function(a,b){return a+b}};P.pattern_parse=new Y("^[ \t\r\n]*[+-]?(\\d+|0x[0-9A-F]+)","i");P.BASE="0123456789abcdefghijklmnopqrstuvwxyz";P.order=function(a,b){return a>b?Ba.GT:a==b?Ba.EQ:Ba.LT};P.monoid={zero:0,append:function(a,b){return a+b}};r.order=Jb.fromIntComparison(r.compare);
r.HASCODE_MAX=2147483647;r.HASCODE_MUL=31;r.monoid={zero:"",append:function(a,b){return a+b}};r.UCWORDS=new Y("[^a-zA-Z]([a-z])","g");r.IS_BREAKINGWHITESPACE=new Y("[^\t\n\r ]","");r.IS_ALPHA=new Y("[^a-zA-Z]","");r.UCWORDSWS=new Y("[ \t\r\n][a-z]","g");r.ALPHANUM=new Y("^[a-z0-9]+$","i");r.DIGITS=new Y("^[0-9]+$","");r.STRIPTAGS=new Y("</?[a-z]+[^>]*>","gi");r.WSG=new Y("[ \t\r\n]+","g");r.SPLIT_LINES=new Y("\r\n|\n\r|\n|\r","g");r.CANONICALIZE_LINES=new Y("\r\n|\n\r|\r","g");sa.FRAME_RATE=Math.round(16.666666666666668);
qb.invariant=new qb(0,"FirstDay","AM","PM",0,"Sunday","Gregorian",null,"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"Sun Mon Tue Wed Thu Fri Sat".split(" "),"Su Mo Tu We Th Fr Sa".split(" "),"January February March April May June July August September October November December ".split(" "),"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" "),"January February March April May June July August September October November December ".split(" "),"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" "),
"dddd, dd MMMM yyyy","MM/dd/yyyy","dddd, dd MMMM yyyy HH:mm:ss","yyyy'-'MM'-'dd'T'HH':'mm':'ss","MMMM dd","ddd, dd MMM yyyy HH':'mm':'ss 'GMT'","HH:mm:ss","HH:mm","yyyy'-'MM'-'dd HH':'mm':'ss'Z'","yyyy MMMM","/",":");rb.invariant=new rb(2,2,2,[3],[3],[3],0,1,0,0,0,".",".",".",",",",",",","-","+","\u00a4","NaN","-Infinity","%","\u2030","Infinity");ta.invariant=new ta("",qb.invariant,"",!1,"iv","IVL",!1,127,"Gregorian","Invariant Language","Invariant Language","Invariant Country","Invariant Country",
rb.invariant,",","IVL");$a.currencyNegatives="($n);-$n;$-n;$n-;(n$);-n$;n-$;n$-;-n $;-$ n;n $-;$ n-;$ -n;n- $;($ n);(n $)".split(";");$a.currencyPositives=["$n","n$","$ n","n $"];$a.numberNegatives=["(n)","-n","- n","n-","n -"];$a.percentNegatives="-n %;-n%;-%n;%-n;%n-;n-%;n%-;-%n;n %-;% n-;% -n;n- %".split(";");$a.percentPositives=["n %","n%","%n","% n"];w.BASE="0123456789abcdefghijklmnopqrstuvwxyz";I.delta=5;I.ratio=2;gb.MINSTD_RAND=48271;ua.RUNTIME=100;ua.RUNDELAY=100;ua.MAXRUNS=1E7;ua.cache=new x;
ka.ROUND=1;ka.barHeight=100;ka.STORAGE_PREFIX="dice.run-expression:";ka.worker=function(a){a=new Worker("worker.js");var b=window.localStorage;a.onmessage=function(a){var c=a.data.expression,d=wb.fromObject(a.data.results),e=""+ka.STORAGE_PREFIX+c;a=JSON.stringify(a.data.results);b.setItem(e,a);null!=ka.view&&c==ka.view.props.expression&&ka.view.update({expression:ka.view.props.expression,parsed:ka.view.props.parsed,probabilities:d,selected:ka.view.props.selected},{fileName:"ProbabilitiesView.hx",
lineNumber:24,className:"view.ProbabilitiesView",methodName:"worker"})};for(var c={},d=0,e=b.length;d<e;){var f=d++,g=b.key(f);E.startsWith(g,ka.STORAGE_PREFIX)&&(f=JSON.parse(b.getItem(g)),g=g.substring(ka.STORAGE_PREFIX.length),c[g]=f)}a.postMessage({init:c});return a}(this);bb.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
